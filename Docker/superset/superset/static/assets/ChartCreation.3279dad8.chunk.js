"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(globalThis["webpackChunksuperset"] = globalThis["webpackChunksuperset"] || []).push([["ChartCreation"],{

/***/ "./node_modules/fuse.js/dist/fuse.mjs":
/*!********************************************!*\
  !*** ./node_modules/fuse.js/dist/fuse.mjs ***!
  \********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("{/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Fuse)\n/* harmony export */ });\n/**\n * Fuse.js v7.1.0 - Lightweight fuzzy-search (http://fusejs.io)\n *\n * Copyright (c) 2025 Kiro Risk (http://kiro.me)\n * All Rights Reserved. Apache Software License 2.0\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nfunction isArray(value) {\n  return !Array.isArray\n    ? getTag(value) === '[object Array]'\n    : Array.isArray(value)\n}\n\n// Adapted from: https://github.com/lodash/lodash/blob/master/.internal/baseToString.js\nconst INFINITY = 1 / 0;\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value\n  }\n  let result = value + '';\n  return result == '0' && 1 / value == -INFINITY ? '-0' : result\n}\n\nfunction toString(value) {\n  return value == null ? '' : baseToString(value)\n}\n\nfunction isString(value) {\n  return typeof value === 'string'\n}\n\nfunction isNumber(value) {\n  return typeof value === 'number'\n}\n\n// Adapted from: https://github.com/lodash/lodash/blob/master/isBoolean.js\nfunction isBoolean(value) {\n  return (\n    value === true ||\n    value === false ||\n    (isObjectLike(value) && getTag(value) == '[object Boolean]')\n  )\n}\n\nfunction isObject(value) {\n  return typeof value === 'object'\n}\n\n// Checks if `value` is object-like.\nfunction isObjectLike(value) {\n  return isObject(value) && value !== null\n}\n\nfunction isDefined(value) {\n  return value !== undefined && value !== null\n}\n\nfunction isBlank(value) {\n  return !value.trim().length\n}\n\n// Gets the `toStringTag` of `value`.\n// Adapted from: https://github.com/lodash/lodash/blob/master/.internal/getTag.js\nfunction getTag(value) {\n  return value == null\n    ? value === undefined\n      ? '[object Undefined]'\n      : '[object Null]'\n    : Object.prototype.toString.call(value)\n}\n\nconst EXTENDED_SEARCH_UNAVAILABLE = 'Extended search is not available';\n\nconst INCORRECT_INDEX_TYPE = \"Incorrect 'index' type\";\n\nconst LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY = (key) =>\n  `Invalid value for key ${key}`;\n\nconst PATTERN_LENGTH_TOO_LARGE = (max) =>\n  `Pattern length exceeds max of ${max}.`;\n\nconst MISSING_KEY_PROPERTY = (name) => `Missing ${name} property in key`;\n\nconst INVALID_KEY_WEIGHT_VALUE = (key) =>\n  `Property 'weight' in key '${key}' must be a positive integer`;\n\nconst hasOwn = Object.prototype.hasOwnProperty;\n\nclass KeyStore {\n  constructor(keys) {\n    this._keys = [];\n    this._keyMap = {};\n\n    let totalWeight = 0;\n\n    keys.forEach((key) => {\n      let obj = createKey(key);\n\n      this._keys.push(obj);\n      this._keyMap[obj.id] = obj;\n\n      totalWeight += obj.weight;\n    });\n\n    // Normalize weights so that their sum is equal to 1\n    this._keys.forEach((key) => {\n      key.weight /= totalWeight;\n    });\n  }\n  get(keyId) {\n    return this._keyMap[keyId]\n  }\n  keys() {\n    return this._keys\n  }\n  toJSON() {\n    return JSON.stringify(this._keys)\n  }\n}\n\nfunction createKey(key) {\n  let path = null;\n  let id = null;\n  let src = null;\n  let weight = 1;\n  let getFn = null;\n\n  if (isString(key) || isArray(key)) {\n    src = key;\n    path = createKeyPath(key);\n    id = createKeyId(key);\n  } else {\n    if (!hasOwn.call(key, 'name')) {\n      throw new Error(MISSING_KEY_PROPERTY('name'))\n    }\n\n    const name = key.name;\n    src = name;\n\n    if (hasOwn.call(key, 'weight')) {\n      weight = key.weight;\n\n      if (weight <= 0) {\n        throw new Error(INVALID_KEY_WEIGHT_VALUE(name))\n      }\n    }\n\n    path = createKeyPath(name);\n    id = createKeyId(name);\n    getFn = key.getFn;\n  }\n\n  return { path, id, weight, src, getFn }\n}\n\nfunction createKeyPath(key) {\n  return isArray(key) ? key : key.split('.')\n}\n\nfunction createKeyId(key) {\n  return isArray(key) ? key.join('.') : key\n}\n\nfunction get(obj, path) {\n  let list = [];\n  let arr = false;\n\n  const deepGet = (obj, path, index) => {\n    if (!isDefined(obj)) {\n      return\n    }\n    if (!path[index]) {\n      // If there's no path left, we've arrived at the object we care about.\n      list.push(obj);\n    } else {\n      let key = path[index];\n\n      const value = obj[key];\n\n      if (!isDefined(value)) {\n        return\n      }\n\n      // If we're at the last value in the path, and if it's a string/number/bool,\n      // add it to the list\n      if (\n        index === path.length - 1 &&\n        (isString(value) || isNumber(value) || isBoolean(value))\n      ) {\n        list.push(toString(value));\n      } else if (isArray(value)) {\n        arr = true;\n        // Search each item in the array.\n        for (let i = 0, len = value.length; i < len; i += 1) {\n          deepGet(value[i], path, index + 1);\n        }\n      } else if (path.length) {\n        // An object. Recurse further.\n        deepGet(value, path, index + 1);\n      }\n    }\n  };\n\n  // Backwards compatibility (since path used to be a string)\n  deepGet(obj, isString(path) ? path.split('.') : path, 0);\n\n  return arr ? list : list[0]\n}\n\nconst MatchOptions = {\n  // Whether the matches should be included in the result set. When `true`, each record in the result\n  // set will include the indices of the matched characters.\n  // These can consequently be used for highlighting purposes.\n  includeMatches: false,\n  // When `true`, the matching function will continue to the end of a search pattern even if\n  // a perfect match has already been located in the string.\n  findAllMatches: false,\n  // Minimum number of characters that must be matched before a result is considered a match\n  minMatchCharLength: 1\n};\n\nconst BasicOptions = {\n  // When `true`, the algorithm continues searching to the end of the input even if a perfect\n  // match is found before the end of the same input.\n  isCaseSensitive: false,\n  // When `true`, the algorithm will ignore diacritics (accents) in comparisons\n  ignoreDiacritics: false,\n  // When true, the matching function will continue to the end of a search pattern even if\n  includeScore: false,\n  // List of properties that will be searched. This also supports nested properties.\n  keys: [],\n  // Whether to sort the result list, by score\n  shouldSort: true,\n  // Default sort function: sort by ascending score, ascending index\n  sortFn: (a, b) =>\n    a.score === b.score ? (a.idx < b.idx ? -1 : 1) : a.score < b.score ? -1 : 1\n};\n\nconst FuzzyOptions = {\n  // Approximately where in the text is the pattern expected to be found?\n  location: 0,\n  // At what point does the match algorithm give up. A threshold of '0.0' requires a perfect match\n  // (of both letters and location), a threshold of '1.0' would match anything.\n  threshold: 0.6,\n  // Determines how close the match must be to the fuzzy location (specified above).\n  // An exact letter match which is 'distance' characters away from the fuzzy location\n  // would score as a complete mismatch. A distance of '0' requires the match be at\n  // the exact location specified, a threshold of '1000' would require a perfect match\n  // to be within 800 characters of the fuzzy location to be found using a 0.8 threshold.\n  distance: 100\n};\n\nconst AdvancedOptions = {\n  // When `true`, it enables the use of unix-like search commands\n  useExtendedSearch: false,\n  // The get function to use when fetching an object's properties.\n  // The default will search nested paths *ie foo.bar.baz*\n  getFn: get,\n  // When `true`, search will ignore `location` and `distance`, so it won't matter\n  // where in the string the pattern appears.\n  // More info: https://fusejs.io/concepts/scoring-theory.html#fuzziness-score\n  ignoreLocation: false,\n  // When `true`, the calculation for the relevance score (used for sorting) will\n  // ignore the field-length norm.\n  // More info: https://fusejs.io/concepts/scoring-theory.html#field-length-norm\n  ignoreFieldNorm: false,\n  // The weight to determine how much field length norm effects scoring.\n  fieldNormWeight: 1\n};\n\nvar Config = {\n  ...BasicOptions,\n  ...MatchOptions,\n  ...FuzzyOptions,\n  ...AdvancedOptions\n};\n\nconst SPACE = /[^ ]+/g;\n\n// Field-length norm: the shorter the field, the higher the weight.\n// Set to 3 decimals to reduce index size.\nfunction norm(weight = 1, mantissa = 3) {\n  const cache = new Map();\n  const m = Math.pow(10, mantissa);\n\n  return {\n    get(value) {\n      const numTokens = value.match(SPACE).length;\n\n      if (cache.has(numTokens)) {\n        return cache.get(numTokens)\n      }\n\n      // Default function is 1/sqrt(x), weight makes that variable\n      const norm = 1 / Math.pow(numTokens, 0.5 * weight);\n\n      // In place of `toFixed(mantissa)`, for faster computation\n      const n = parseFloat(Math.round(norm * m) / m);\n\n      cache.set(numTokens, n);\n\n      return n\n    },\n    clear() {\n      cache.clear();\n    }\n  }\n}\n\nclass FuseIndex {\n  constructor({\n    getFn = Config.getFn,\n    fieldNormWeight = Config.fieldNormWeight\n  } = {}) {\n    this.norm = norm(fieldNormWeight, 3);\n    this.getFn = getFn;\n    this.isCreated = false;\n\n    this.setIndexRecords();\n  }\n  setSources(docs = []) {\n    this.docs = docs;\n  }\n  setIndexRecords(records = []) {\n    this.records = records;\n  }\n  setKeys(keys = []) {\n    this.keys = keys;\n    this._keysMap = {};\n    keys.forEach((key, idx) => {\n      this._keysMap[key.id] = idx;\n    });\n  }\n  create() {\n    if (this.isCreated || !this.docs.length) {\n      return\n    }\n\n    this.isCreated = true;\n\n    // List is Array<String>\n    if (isString(this.docs[0])) {\n      this.docs.forEach((doc, docIndex) => {\n        this._addString(doc, docIndex);\n      });\n    } else {\n      // List is Array<Object>\n      this.docs.forEach((doc, docIndex) => {\n        this._addObject(doc, docIndex);\n      });\n    }\n\n    this.norm.clear();\n  }\n  // Adds a doc to the end of the index\n  add(doc) {\n    const idx = this.size();\n\n    if (isString(doc)) {\n      this._addString(doc, idx);\n    } else {\n      this._addObject(doc, idx);\n    }\n  }\n  // Removes the doc at the specified index of the index\n  removeAt(idx) {\n    this.records.splice(idx, 1);\n\n    // Change ref index of every subsquent doc\n    for (let i = idx, len = this.size(); i < len; i += 1) {\n      this.records[i].i -= 1;\n    }\n  }\n  getValueForItemAtKeyId(item, keyId) {\n    return item[this._keysMap[keyId]]\n  }\n  size() {\n    return this.records.length\n  }\n  _addString(doc, docIndex) {\n    if (!isDefined(doc) || isBlank(doc)) {\n      return\n    }\n\n    let record = {\n      v: doc,\n      i: docIndex,\n      n: this.norm.get(doc)\n    };\n\n    this.records.push(record);\n  }\n  _addObject(doc, docIndex) {\n    let record = { i: docIndex, $: {} };\n\n    // Iterate over every key (i.e, path), and fetch the value at that key\n    this.keys.forEach((key, keyIndex) => {\n      let value = key.getFn ? key.getFn(doc) : this.getFn(doc, key.path);\n\n      if (!isDefined(value)) {\n        return\n      }\n\n      if (isArray(value)) {\n        let subRecords = [];\n        const stack = [{ nestedArrIndex: -1, value }];\n\n        while (stack.length) {\n          const { nestedArrIndex, value } = stack.pop();\n\n          if (!isDefined(value)) {\n            continue\n          }\n\n          if (isString(value) && !isBlank(value)) {\n            let subRecord = {\n              v: value,\n              i: nestedArrIndex,\n              n: this.norm.get(value)\n            };\n\n            subRecords.push(subRecord);\n          } else if (isArray(value)) {\n            value.forEach((item, k) => {\n              stack.push({\n                nestedArrIndex: k,\n                value: item\n              });\n            });\n          } else ;\n        }\n        record.$[keyIndex] = subRecords;\n      } else if (isString(value) && !isBlank(value)) {\n        let subRecord = {\n          v: value,\n          n: this.norm.get(value)\n        };\n\n        record.$[keyIndex] = subRecord;\n      }\n    });\n\n    this.records.push(record);\n  }\n  toJSON() {\n    return {\n      keys: this.keys,\n      records: this.records\n    }\n  }\n}\n\nfunction createIndex(\n  keys,\n  docs,\n  { getFn = Config.getFn, fieldNormWeight = Config.fieldNormWeight } = {}\n) {\n  const myIndex = new FuseIndex({ getFn, fieldNormWeight });\n  myIndex.setKeys(keys.map(createKey));\n  myIndex.setSources(docs);\n  myIndex.create();\n  return myIndex\n}\n\nfunction parseIndex(\n  data,\n  { getFn = Config.getFn, fieldNormWeight = Config.fieldNormWeight } = {}\n) {\n  const { keys, records } = data;\n  const myIndex = new FuseIndex({ getFn, fieldNormWeight });\n  myIndex.setKeys(keys);\n  myIndex.setIndexRecords(records);\n  return myIndex\n}\n\nfunction computeScore$1(\n  pattern,\n  {\n    errors = 0,\n    currentLocation = 0,\n    expectedLocation = 0,\n    distance = Config.distance,\n    ignoreLocation = Config.ignoreLocation\n  } = {}\n) {\n  const accuracy = errors / pattern.length;\n\n  if (ignoreLocation) {\n    return accuracy\n  }\n\n  const proximity = Math.abs(expectedLocation - currentLocation);\n\n  if (!distance) {\n    // Dodge divide by zero error.\n    return proximity ? 1.0 : accuracy\n  }\n\n  return accuracy + proximity / distance\n}\n\nfunction convertMaskToIndices(\n  matchmask = [],\n  minMatchCharLength = Config.minMatchCharLength\n) {\n  let indices = [];\n  let start = -1;\n  let end = -1;\n  let i = 0;\n\n  for (let len = matchmask.length; i < len; i += 1) {\n    let match = matchmask[i];\n    if (match && start === -1) {\n      start = i;\n    } else if (!match && start !== -1) {\n      end = i - 1;\n      if (end - start + 1 >= minMatchCharLength) {\n        indices.push([start, end]);\n      }\n      start = -1;\n    }\n  }\n\n  // (i-1 - start) + 1 => i - start\n  if (matchmask[i - 1] && i - start >= minMatchCharLength) {\n    indices.push([start, i - 1]);\n  }\n\n  return indices\n}\n\n// Machine word size\nconst MAX_BITS = 32;\n\nfunction search(\n  text,\n  pattern,\n  patternAlphabet,\n  {\n    location = Config.location,\n    distance = Config.distance,\n    threshold = Config.threshold,\n    findAllMatches = Config.findAllMatches,\n    minMatchCharLength = Config.minMatchCharLength,\n    includeMatches = Config.includeMatches,\n    ignoreLocation = Config.ignoreLocation\n  } = {}\n) {\n  if (pattern.length > MAX_BITS) {\n    throw new Error(PATTERN_LENGTH_TOO_LARGE(MAX_BITS))\n  }\n\n  const patternLen = pattern.length;\n  // Set starting location at beginning text and initialize the alphabet.\n  const textLen = text.length;\n  // Handle the case when location > text.length\n  const expectedLocation = Math.max(0, Math.min(location, textLen));\n  // Highest score beyond which we give up.\n  let currentThreshold = threshold;\n  // Is there a nearby exact match? (speedup)\n  let bestLocation = expectedLocation;\n\n  // Performance: only computer matches when the minMatchCharLength > 1\n  // OR if `includeMatches` is true.\n  const computeMatches = minMatchCharLength > 1 || includeMatches;\n  // A mask of the matches, used for building the indices\n  const matchMask = computeMatches ? Array(textLen) : [];\n\n  let index;\n\n  // Get all exact matches, here for speed up\n  while ((index = text.indexOf(pattern, bestLocation)) > -1) {\n    let score = computeScore$1(pattern, {\n      currentLocation: index,\n      expectedLocation,\n      distance,\n      ignoreLocation\n    });\n\n    currentThreshold = Math.min(score, currentThreshold);\n    bestLocation = index + patternLen;\n\n    if (computeMatches) {\n      let i = 0;\n      while (i < patternLen) {\n        matchMask[index + i] = 1;\n        i += 1;\n      }\n    }\n  }\n\n  // Reset the best location\n  bestLocation = -1;\n\n  let lastBitArr = [];\n  let finalScore = 1;\n  let binMax = patternLen + textLen;\n\n  const mask = 1 << (patternLen - 1);\n\n  for (let i = 0; i < patternLen; i += 1) {\n    // Scan for the best match; each iteration allows for one more error.\n    // Run a binary search to determine how far from the match location we can stray\n    // at this error level.\n    let binMin = 0;\n    let binMid = binMax;\n\n    while (binMin < binMid) {\n      const score = computeScore$1(pattern, {\n        errors: i,\n        currentLocation: expectedLocation + binMid,\n        expectedLocation,\n        distance,\n        ignoreLocation\n      });\n\n      if (score <= currentThreshold) {\n        binMin = binMid;\n      } else {\n        binMax = binMid;\n      }\n\n      binMid = Math.floor((binMax - binMin) / 2 + binMin);\n    }\n\n    // Use the result from this iteration as the maximum for the next.\n    binMax = binMid;\n\n    let start = Math.max(1, expectedLocation - binMid + 1);\n    let finish = findAllMatches\n      ? textLen\n      : Math.min(expectedLocation + binMid, textLen) + patternLen;\n\n    // Initialize the bit array\n    let bitArr = Array(finish + 2);\n\n    bitArr[finish + 1] = (1 << i) - 1;\n\n    for (let j = finish; j >= start; j -= 1) {\n      let currentLocation = j - 1;\n      let charMatch = patternAlphabet[text.charAt(currentLocation)];\n\n      if (computeMatches) {\n        // Speed up: quick bool to int conversion (i.e, `charMatch ? 1 : 0`)\n        matchMask[currentLocation] = +!!charMatch;\n      }\n\n      // First pass: exact match\n      bitArr[j] = ((bitArr[j + 1] << 1) | 1) & charMatch;\n\n      // Subsequent passes: fuzzy match\n      if (i) {\n        bitArr[j] |=\n          ((lastBitArr[j + 1] | lastBitArr[j]) << 1) | 1 | lastBitArr[j + 1];\n      }\n\n      if (bitArr[j] & mask) {\n        finalScore = computeScore$1(pattern, {\n          errors: i,\n          currentLocation,\n          expectedLocation,\n          distance,\n          ignoreLocation\n        });\n\n        // This match will almost certainly be better than any existing match.\n        // But check anyway.\n        if (finalScore <= currentThreshold) {\n          // Indeed it is\n          currentThreshold = finalScore;\n          bestLocation = currentLocation;\n\n          // Already passed `loc`, downhill from here on in.\n          if (bestLocation <= expectedLocation) {\n            break\n          }\n\n          // When passing `bestLocation`, don't exceed our current distance from `expectedLocation`.\n          start = Math.max(1, 2 * expectedLocation - bestLocation);\n        }\n      }\n    }\n\n    // No hope for a (better) match at greater error levels.\n    const score = computeScore$1(pattern, {\n      errors: i + 1,\n      currentLocation: expectedLocation,\n      expectedLocation,\n      distance,\n      ignoreLocation\n    });\n\n    if (score > currentThreshold) {\n      break\n    }\n\n    lastBitArr = bitArr;\n  }\n\n  const result = {\n    isMatch: bestLocation >= 0,\n    // Count exact matches (those with a score of 0) to be \"almost\" exact\n    score: Math.max(0.001, finalScore)\n  };\n\n  if (computeMatches) {\n    const indices = convertMaskToIndices(matchMask, minMatchCharLength);\n    if (!indices.length) {\n      result.isMatch = false;\n    } else if (includeMatches) {\n      result.indices = indices;\n    }\n  }\n\n  return result\n}\n\nfunction createPatternAlphabet(pattern) {\n  let mask = {};\n\n  for (let i = 0, len = pattern.length; i < len; i += 1) {\n    const char = pattern.charAt(i);\n    mask[char] = (mask[char] || 0) | (1 << (len - i - 1));\n  }\n\n  return mask\n}\n\nconst stripDiacritics = String.prototype.normalize\n    ? ((str) => str.normalize('NFD').replace(/[\\u0300-\\u036F\\u0483-\\u0489\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u07FD\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0859-\\u085B\\u08D3-\\u08E1\\u08E3-\\u0903\\u093A-\\u093C\\u093E-\\u094F\\u0951-\\u0957\\u0962\\u0963\\u0981-\\u0983\\u09BC\\u09BE-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CD\\u09D7\\u09E2\\u09E3\\u09FE\\u0A01-\\u0A03\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81-\\u0A83\\u0ABC\\u0ABE-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AE2\\u0AE3\\u0AFA-\\u0AFF\\u0B01-\\u0B03\\u0B3C\\u0B3E-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B62\\u0B63\\u0B82\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD7\\u0C00-\\u0C04\\u0C3E-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0C81-\\u0C83\\u0CBC\\u0CBE-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CE2\\u0CE3\\u0D00-\\u0D03\\u0D3B\\u0D3C\\u0D3E-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4D\\u0D57\\u0D62\\u0D63\\u0D82\\u0D83\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DF2\\u0DF3\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EB9\\u0EBB\\u0EBC\\u0EC8-\\u0ECD\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F3E\\u0F3F\\u0F71-\\u0F84\\u0F86\\u0F87\\u0F8D-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102B-\\u103E\\u1056-\\u1059\\u105E-\\u1060\\u1062-\\u1064\\u1067-\\u106D\\u1071-\\u1074\\u1082-\\u108D\\u108F\\u109A-\\u109D\\u135D-\\u135F\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17B4-\\u17D3\\u17DD\\u180B-\\u180D\\u1885\\u1886\\u18A9\\u1920-\\u192B\\u1930-\\u193B\\u1A17-\\u1A1B\\u1A55-\\u1A5E\\u1A60-\\u1A7C\\u1A7F\\u1AB0-\\u1ABE\\u1B00-\\u1B04\\u1B34-\\u1B44\\u1B6B-\\u1B73\\u1B80-\\u1B82\\u1BA1-\\u1BAD\\u1BE6-\\u1BF3\\u1C24-\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE8\\u1CED\\u1CF2-\\u1CF4\\u1CF7-\\u1CF9\\u1DC0-\\u1DF9\\u1DFB-\\u1DFF\\u20D0-\\u20F0\\u2CEF-\\u2CF1\\u2D7F\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3099\\u309A\\uA66F-\\uA672\\uA674-\\uA67D\\uA69E\\uA69F\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA823-\\uA827\\uA880\\uA881\\uA8B4-\\uA8C5\\uA8E0-\\uA8F1\\uA8FF\\uA926-\\uA92D\\uA947-\\uA953\\uA980-\\uA983\\uA9B3-\\uA9C0\\uA9E5\\uAA29-\\uAA36\\uAA43\\uAA4C\\uAA4D\\uAA7B-\\uAA7D\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uAAEB-\\uAAEF\\uAAF5\\uAAF6\\uABE3-\\uABEA\\uABEC\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE2F]/g, ''))\n    : ((str) => str);\n\nclass BitapSearch {\n  constructor(\n    pattern,\n    {\n      location = Config.location,\n      threshold = Config.threshold,\n      distance = Config.distance,\n      includeMatches = Config.includeMatches,\n      findAllMatches = Config.findAllMatches,\n      minMatchCharLength = Config.minMatchCharLength,\n      isCaseSensitive = Config.isCaseSensitive,\n      ignoreDiacritics = Config.ignoreDiacritics,\n      ignoreLocation = Config.ignoreLocation\n    } = {}\n  ) {\n    this.options = {\n      location,\n      threshold,\n      distance,\n      includeMatches,\n      findAllMatches,\n      minMatchCharLength,\n      isCaseSensitive,\n      ignoreDiacritics,\n      ignoreLocation\n    };\n\n    pattern = isCaseSensitive ? pattern : pattern.toLowerCase();\n    pattern = ignoreDiacritics ? stripDiacritics(pattern) : pattern;\n    this.pattern = pattern;\n\n    this.chunks = [];\n\n    if (!this.pattern.length) {\n      return\n    }\n\n    const addChunk = (pattern, startIndex) => {\n      this.chunks.push({\n        pattern,\n        alphabet: createPatternAlphabet(pattern),\n        startIndex\n      });\n    };\n\n    const len = this.pattern.length;\n\n    if (len > MAX_BITS) {\n      let i = 0;\n      const remainder = len % MAX_BITS;\n      const end = len - remainder;\n\n      while (i < end) {\n        addChunk(this.pattern.substr(i, MAX_BITS), i);\n        i += MAX_BITS;\n      }\n\n      if (remainder) {\n        const startIndex = len - MAX_BITS;\n        addChunk(this.pattern.substr(startIndex), startIndex);\n      }\n    } else {\n      addChunk(this.pattern, 0);\n    }\n  }\n\n  searchIn(text) {\n    const { isCaseSensitive, ignoreDiacritics, includeMatches } = this.options;\n\n    text = isCaseSensitive ? text : text.toLowerCase();\n    text = ignoreDiacritics ? stripDiacritics(text) : text;\n\n    // Exact match\n    if (this.pattern === text) {\n      let result = {\n        isMatch: true,\n        score: 0\n      };\n\n      if (includeMatches) {\n        result.indices = [[0, text.length - 1]];\n      }\n\n      return result\n    }\n\n    // Otherwise, use Bitap algorithm\n    const {\n      location,\n      distance,\n      threshold,\n      findAllMatches,\n      minMatchCharLength,\n      ignoreLocation\n    } = this.options;\n\n    let allIndices = [];\n    let totalScore = 0;\n    let hasMatches = false;\n\n    this.chunks.forEach(({ pattern, alphabet, startIndex }) => {\n      const { isMatch, score, indices } = search(text, pattern, alphabet, {\n        location: location + startIndex,\n        distance,\n        threshold,\n        findAllMatches,\n        minMatchCharLength,\n        includeMatches,\n        ignoreLocation\n      });\n\n      if (isMatch) {\n        hasMatches = true;\n      }\n\n      totalScore += score;\n\n      if (isMatch && indices) {\n        allIndices = [...allIndices, ...indices];\n      }\n    });\n\n    let result = {\n      isMatch: hasMatches,\n      score: hasMatches ? totalScore / this.chunks.length : 1\n    };\n\n    if (hasMatches && includeMatches) {\n      result.indices = allIndices;\n    }\n\n    return result\n  }\n}\n\nclass BaseMatch {\n  constructor(pattern) {\n    this.pattern = pattern;\n  }\n  static isMultiMatch(pattern) {\n    return getMatch(pattern, this.multiRegex)\n  }\n  static isSingleMatch(pattern) {\n    return getMatch(pattern, this.singleRegex)\n  }\n  search(/*text*/) {}\n}\n\nfunction getMatch(pattern, exp) {\n  const matches = pattern.match(exp);\n  return matches ? matches[1] : null\n}\n\n// Token: 'file\n\nclass ExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'exact'\n  }\n  static get multiRegex() {\n    return /^=\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^=(.*)$/\n  }\n  search(text) {\n    const isMatch = text === this.pattern;\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, this.pattern.length - 1]\n    }\n  }\n}\n\n// Token: !fire\n\nclass InverseExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'inverse-exact'\n  }\n  static get multiRegex() {\n    return /^!\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^!(.*)$/\n  }\n  search(text) {\n    const index = text.indexOf(this.pattern);\n    const isMatch = index === -1;\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, text.length - 1]\n    }\n  }\n}\n\n// Token: ^file\n\nclass PrefixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'prefix-exact'\n  }\n  static get multiRegex() {\n    return /^\\^\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^\\^(.*)$/\n  }\n  search(text) {\n    const isMatch = text.startsWith(this.pattern);\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, this.pattern.length - 1]\n    }\n  }\n}\n\n// Token: !^fire\n\nclass InversePrefixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'inverse-prefix-exact'\n  }\n  static get multiRegex() {\n    return /^!\\^\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^!\\^(.*)$/\n  }\n  search(text) {\n    const isMatch = !text.startsWith(this.pattern);\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, text.length - 1]\n    }\n  }\n}\n\n// Token: .file$\n\nclass SuffixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'suffix-exact'\n  }\n  static get multiRegex() {\n    return /^\"(.*)\"\\$$/\n  }\n  static get singleRegex() {\n    return /^(.*)\\$$/\n  }\n  search(text) {\n    const isMatch = text.endsWith(this.pattern);\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [text.length - this.pattern.length, text.length - 1]\n    }\n  }\n}\n\n// Token: !.file$\n\nclass InverseSuffixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'inverse-suffix-exact'\n  }\n  static get multiRegex() {\n    return /^!\"(.*)\"\\$$/\n  }\n  static get singleRegex() {\n    return /^!(.*)\\$$/\n  }\n  search(text) {\n    const isMatch = !text.endsWith(this.pattern);\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, text.length - 1]\n    }\n  }\n}\n\nclass FuzzyMatch extends BaseMatch {\n  constructor(\n    pattern,\n    {\n      location = Config.location,\n      threshold = Config.threshold,\n      distance = Config.distance,\n      includeMatches = Config.includeMatches,\n      findAllMatches = Config.findAllMatches,\n      minMatchCharLength = Config.minMatchCharLength,\n      isCaseSensitive = Config.isCaseSensitive,\n      ignoreDiacritics = Config.ignoreDiacritics,\n      ignoreLocation = Config.ignoreLocation\n    } = {}\n  ) {\n    super(pattern);\n    this._bitapSearch = new BitapSearch(pattern, {\n      location,\n      threshold,\n      distance,\n      includeMatches,\n      findAllMatches,\n      minMatchCharLength,\n      isCaseSensitive,\n      ignoreDiacritics,\n      ignoreLocation\n    });\n  }\n  static get type() {\n    return 'fuzzy'\n  }\n  static get multiRegex() {\n    return /^\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^(.*)$/\n  }\n  search(text) {\n    return this._bitapSearch.searchIn(text)\n  }\n}\n\n// Token: 'file\n\nclass IncludeMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'include'\n  }\n  static get multiRegex() {\n    return /^'\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^'(.*)$/\n  }\n  search(text) {\n    let location = 0;\n    let index;\n\n    const indices = [];\n    const patternLen = this.pattern.length;\n\n    // Get all exact matches\n    while ((index = text.indexOf(this.pattern, location)) > -1) {\n      location = index + patternLen;\n      indices.push([index, location - 1]);\n    }\n\n    const isMatch = !!indices.length;\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices\n    }\n  }\n}\n\n// â—Order is important. DO NOT CHANGE.\nconst searchers = [\n  ExactMatch,\n  IncludeMatch,\n  PrefixExactMatch,\n  InversePrefixExactMatch,\n  InverseSuffixExactMatch,\n  SuffixExactMatch,\n  InverseExactMatch,\n  FuzzyMatch\n];\n\nconst searchersLen = searchers.length;\n\n// Regex to split by spaces, but keep anything in quotes together\nconst SPACE_RE = / +(?=(?:[^\\\"]*\\\"[^\\\"]*\\\")*[^\\\"]*$)/;\nconst OR_TOKEN = '|';\n\n// Return a 2D array representation of the query, for simpler parsing.\n// Example:\n// \"^core go$ | rb$ | py$ xy$\" => [[\"^core\", \"go$\"], [\"rb$\"], [\"py$\", \"xy$\"]]\nfunction parseQuery(pattern, options = {}) {\n  return pattern.split(OR_TOKEN).map((item) => {\n    let query = item\n      .trim()\n      .split(SPACE_RE)\n      .filter((item) => item && !!item.trim());\n\n    let results = [];\n    for (let i = 0, len = query.length; i < len; i += 1) {\n      const queryItem = query[i];\n\n      // 1. Handle multiple query match (i.e, once that are quoted, like `\"hello world\"`)\n      let found = false;\n      let idx = -1;\n      while (!found && ++idx < searchersLen) {\n        const searcher = searchers[idx];\n        let token = searcher.isMultiMatch(queryItem);\n        if (token) {\n          results.push(new searcher(token, options));\n          found = true;\n        }\n      }\n\n      if (found) {\n        continue\n      }\n\n      // 2. Handle single query matches (i.e, once that are *not* quoted)\n      idx = -1;\n      while (++idx < searchersLen) {\n        const searcher = searchers[idx];\n        let token = searcher.isSingleMatch(queryItem);\n        if (token) {\n          results.push(new searcher(token, options));\n          break\n        }\n      }\n    }\n\n    return results\n  })\n}\n\n// These extended matchers can return an array of matches, as opposed\n// to a singl match\nconst MultiMatchSet = new Set([FuzzyMatch.type, IncludeMatch.type]);\n\n/**\n * Command-like searching\n * ======================\n *\n * Given multiple search terms delimited by spaces.e.g. `^jscript .python$ ruby !java`,\n * search in a given text.\n *\n * Search syntax:\n *\n * | Token       | Match type                 | Description                            |\n * | ----------- | -------------------------- | -------------------------------------- |\n * | `jscript`   | fuzzy-match                | Items that fuzzy match `jscript`       |\n * | `=scheme`   | exact-match                | Items that are `scheme`                |\n * | `'python`   | include-match              | Items that include `python`            |\n * | `!ruby`     | inverse-exact-match        | Items that do not include `ruby`       |\n * | `^java`     | prefix-exact-match         | Items that start with `java`           |\n * | `!^earlang` | inverse-prefix-exact-match | Items that do not start with `earlang` |\n * | `.js$`      | suffix-exact-match         | Items that end with `.js`              |\n * | `!.go$`     | inverse-suffix-exact-match | Items that do not end with `.go`       |\n *\n * A single pipe character acts as an OR operator. For example, the following\n * query matches entries that start with `core` and end with either`go`, `rb`,\n * or`py`.\n *\n * ```\n * ^core go$ | rb$ | py$\n * ```\n */\nclass ExtendedSearch {\n  constructor(\n    pattern,\n    {\n      isCaseSensitive = Config.isCaseSensitive,\n      ignoreDiacritics = Config.ignoreDiacritics,\n      includeMatches = Config.includeMatches,\n      minMatchCharLength = Config.minMatchCharLength,\n      ignoreLocation = Config.ignoreLocation,\n      findAllMatches = Config.findAllMatches,\n      location = Config.location,\n      threshold = Config.threshold,\n      distance = Config.distance\n    } = {}\n  ) {\n    this.query = null;\n    this.options = {\n      isCaseSensitive,\n      ignoreDiacritics,\n      includeMatches,\n      minMatchCharLength,\n      findAllMatches,\n      ignoreLocation,\n      location,\n      threshold,\n      distance\n    };\n\n    pattern = isCaseSensitive ? pattern : pattern.toLowerCase();\n    pattern = ignoreDiacritics ? stripDiacritics(pattern) : pattern;\n    this.pattern = pattern;\n    this.query = parseQuery(this.pattern, this.options);\n  }\n\n  static condition(_, options) {\n    return options.useExtendedSearch\n  }\n\n  searchIn(text) {\n    const query = this.query;\n\n    if (!query) {\n      return {\n        isMatch: false,\n        score: 1\n      }\n    }\n\n    const { includeMatches, isCaseSensitive, ignoreDiacritics } = this.options;\n\n    text = isCaseSensitive ? text : text.toLowerCase();\n    text = ignoreDiacritics ? stripDiacritics(text) : text;\n\n    let numMatches = 0;\n    let allIndices = [];\n    let totalScore = 0;\n\n    // ORs\n    for (let i = 0, qLen = query.length; i < qLen; i += 1) {\n      const searchers = query[i];\n\n      // Reset indices\n      allIndices.length = 0;\n      numMatches = 0;\n\n      // ANDs\n      for (let j = 0, pLen = searchers.length; j < pLen; j += 1) {\n        const searcher = searchers[j];\n        const { isMatch, indices, score } = searcher.search(text);\n\n        if (isMatch) {\n          numMatches += 1;\n          totalScore += score;\n          if (includeMatches) {\n            const type = searcher.constructor.type;\n            if (MultiMatchSet.has(type)) {\n              allIndices = [...allIndices, ...indices];\n            } else {\n              allIndices.push(indices);\n            }\n          }\n        } else {\n          totalScore = 0;\n          numMatches = 0;\n          allIndices.length = 0;\n          break\n        }\n      }\n\n      // OR condition, so if TRUE, return\n      if (numMatches) {\n        let result = {\n          isMatch: true,\n          score: totalScore / numMatches\n        };\n\n        if (includeMatches) {\n          result.indices = allIndices;\n        }\n\n        return result\n      }\n    }\n\n    // Nothing was matched\n    return {\n      isMatch: false,\n      score: 1\n    }\n  }\n}\n\nconst registeredSearchers = [];\n\nfunction register(...args) {\n  registeredSearchers.push(...args);\n}\n\nfunction createSearcher(pattern, options) {\n  for (let i = 0, len = registeredSearchers.length; i < len; i += 1) {\n    let searcherClass = registeredSearchers[i];\n    if (searcherClass.condition(pattern, options)) {\n      return new searcherClass(pattern, options)\n    }\n  }\n\n  return new BitapSearch(pattern, options)\n}\n\nconst LogicalOperator = {\n  AND: '$and',\n  OR: '$or'\n};\n\nconst KeyType = {\n  PATH: '$path',\n  PATTERN: '$val'\n};\n\nconst isExpression = (query) =>\n  !!(query[LogicalOperator.AND] || query[LogicalOperator.OR]);\n\nconst isPath = (query) => !!query[KeyType.PATH];\n\nconst isLeaf = (query) =>\n  !isArray(query) && isObject(query) && !isExpression(query);\n\nconst convertToExplicit = (query) => ({\n  [LogicalOperator.AND]: Object.keys(query).map((key) => ({\n    [key]: query[key]\n  }))\n});\n\n// When `auto` is `true`, the parse function will infer and initialize and add\n// the appropriate `Searcher` instance\nfunction parse(query, options, { auto = true } = {}) {\n  const next = (query) => {\n    let keys = Object.keys(query);\n\n    const isQueryPath = isPath(query);\n\n    if (!isQueryPath && keys.length > 1 && !isExpression(query)) {\n      return next(convertToExplicit(query))\n    }\n\n    if (isLeaf(query)) {\n      const key = isQueryPath ? query[KeyType.PATH] : keys[0];\n\n      const pattern = isQueryPath ? query[KeyType.PATTERN] : query[key];\n\n      if (!isString(pattern)) {\n        throw new Error(LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY(key))\n      }\n\n      const obj = {\n        keyId: createKeyId(key),\n        pattern\n      };\n\n      if (auto) {\n        obj.searcher = createSearcher(pattern, options);\n      }\n\n      return obj\n    }\n\n    let node = {\n      children: [],\n      operator: keys[0]\n    };\n\n    keys.forEach((key) => {\n      const value = query[key];\n\n      if (isArray(value)) {\n        value.forEach((item) => {\n          node.children.push(next(item));\n        });\n      }\n    });\n\n    return node\n  };\n\n  if (!isExpression(query)) {\n    query = convertToExplicit(query);\n  }\n\n  return next(query)\n}\n\n// Practical scoring function\nfunction computeScore(\n  results,\n  { ignoreFieldNorm = Config.ignoreFieldNorm }\n) {\n  results.forEach((result) => {\n    let totalScore = 1;\n\n    result.matches.forEach(({ key, norm, score }) => {\n      const weight = key ? key.weight : null;\n\n      totalScore *= Math.pow(\n        score === 0 && weight ? Number.EPSILON : score,\n        (weight || 1) * (ignoreFieldNorm ? 1 : norm)\n      );\n    });\n\n    result.score = totalScore;\n  });\n}\n\nfunction transformMatches(result, data) {\n  const matches = result.matches;\n  data.matches = [];\n\n  if (!isDefined(matches)) {\n    return\n  }\n\n  matches.forEach((match) => {\n    if (!isDefined(match.indices) || !match.indices.length) {\n      return\n    }\n\n    const { indices, value } = match;\n\n    let obj = {\n      indices,\n      value\n    };\n\n    if (match.key) {\n      obj.key = match.key.src;\n    }\n\n    if (match.idx > -1) {\n      obj.refIndex = match.idx;\n    }\n\n    data.matches.push(obj);\n  });\n}\n\nfunction transformScore(result, data) {\n  data.score = result.score;\n}\n\nfunction format(\n  results,\n  docs,\n  {\n    includeMatches = Config.includeMatches,\n    includeScore = Config.includeScore\n  } = {}\n) {\n  const transformers = [];\n\n  if (includeMatches) transformers.push(transformMatches);\n  if (includeScore) transformers.push(transformScore);\n\n  return results.map((result) => {\n    const { idx } = result;\n\n    const data = {\n      item: docs[idx],\n      refIndex: idx\n    };\n\n    if (transformers.length) {\n      transformers.forEach((transformer) => {\n        transformer(result, data);\n      });\n    }\n\n    return data\n  })\n}\n\nclass Fuse {\n  constructor(docs, options = {}, index) {\n    this.options = { ...Config, ...options };\n\n    if (\n      this.options.useExtendedSearch &&\n      !true\n    ) // removed by dead control flow\n{}\n\n    this._keyStore = new KeyStore(this.options.keys);\n\n    this.setCollection(docs, index);\n  }\n\n  setCollection(docs, index) {\n    this._docs = docs;\n\n    if (index && !(index instanceof FuseIndex)) {\n      throw new Error(INCORRECT_INDEX_TYPE)\n    }\n\n    this._myIndex =\n      index ||\n      createIndex(this.options.keys, this._docs, {\n        getFn: this.options.getFn,\n        fieldNormWeight: this.options.fieldNormWeight\n      });\n  }\n\n  add(doc) {\n    if (!isDefined(doc)) {\n      return\n    }\n\n    this._docs.push(doc);\n    this._myIndex.add(doc);\n  }\n\n  remove(predicate = (/* doc, idx */) => false) {\n    const results = [];\n\n    for (let i = 0, len = this._docs.length; i < len; i += 1) {\n      const doc = this._docs[i];\n      if (predicate(doc, i)) {\n        this.removeAt(i);\n        i -= 1;\n        len -= 1;\n\n        results.push(doc);\n      }\n    }\n\n    return results\n  }\n\n  removeAt(idx) {\n    this._docs.splice(idx, 1);\n    this._myIndex.removeAt(idx);\n  }\n\n  getIndex() {\n    return this._myIndex\n  }\n\n  search(query, { limit = -1 } = {}) {\n    const {\n      includeMatches,\n      includeScore,\n      shouldSort,\n      sortFn,\n      ignoreFieldNorm\n    } = this.options;\n\n    let results = isString(query)\n      ? isString(this._docs[0])\n        ? this._searchStringList(query)\n        : this._searchObjectList(query)\n      : this._searchLogical(query);\n\n    computeScore(results, { ignoreFieldNorm });\n\n    if (shouldSort) {\n      results.sort(sortFn);\n    }\n\n    if (isNumber(limit) && limit > -1) {\n      results = results.slice(0, limit);\n    }\n\n    return format(results, this._docs, {\n      includeMatches,\n      includeScore\n    })\n  }\n\n  _searchStringList(query) {\n    const searcher = createSearcher(query, this.options);\n    const { records } = this._myIndex;\n    const results = [];\n\n    // Iterate over every string in the index\n    records.forEach(({ v: text, i: idx, n: norm }) => {\n      if (!isDefined(text)) {\n        return\n      }\n\n      const { isMatch, score, indices } = searcher.searchIn(text);\n\n      if (isMatch) {\n        results.push({\n          item: text,\n          idx,\n          matches: [{ score, value: text, norm, indices }]\n        });\n      }\n    });\n\n    return results\n  }\n\n  _searchLogical(query) {\n\n    const expression = parse(query, this.options);\n\n    const evaluate = (node, item, idx) => {\n      if (!node.children) {\n        const { keyId, searcher } = node;\n\n        const matches = this._findMatches({\n          key: this._keyStore.get(keyId),\n          value: this._myIndex.getValueForItemAtKeyId(item, keyId),\n          searcher\n        });\n\n        if (matches && matches.length) {\n          return [\n            {\n              idx,\n              item,\n              matches\n            }\n          ]\n        }\n\n        return []\n      }\n\n      const res = [];\n      for (let i = 0, len = node.children.length; i < len; i += 1) {\n        const child = node.children[i];\n        const result = evaluate(child, item, idx);\n        if (result.length) {\n          res.push(...result);\n        } else if (node.operator === LogicalOperator.AND) {\n          return []\n        }\n      }\n      return res\n    };\n\n    const records = this._myIndex.records;\n    const resultMap = {};\n    const results = [];\n\n    records.forEach(({ $: item, i: idx }) => {\n      if (isDefined(item)) {\n        let expResults = evaluate(expression, item, idx);\n\n        if (expResults.length) {\n          // Dedupe when adding\n          if (!resultMap[idx]) {\n            resultMap[idx] = { idx, item, matches: [] };\n            results.push(resultMap[idx]);\n          }\n          expResults.forEach(({ matches }) => {\n            resultMap[idx].matches.push(...matches);\n          });\n        }\n      }\n    });\n\n    return results\n  }\n\n  _searchObjectList(query) {\n    const searcher = createSearcher(query, this.options);\n    const { keys, records } = this._myIndex;\n    const results = [];\n\n    // List is Array<Object>\n    records.forEach(({ $: item, i: idx }) => {\n      if (!isDefined(item)) {\n        return\n      }\n\n      let matches = [];\n\n      // Iterate over every key (i.e, path), and fetch the value at that key\n      keys.forEach((key, keyIndex) => {\n        matches.push(\n          ...this._findMatches({\n            key,\n            value: item[keyIndex],\n            searcher\n          })\n        );\n      });\n\n      if (matches.length) {\n        results.push({\n          idx,\n          item,\n          matches\n        });\n      }\n    });\n\n    return results\n  }\n  _findMatches({ key, value, searcher }) {\n    if (!isDefined(value)) {\n      return []\n    }\n\n    let matches = [];\n\n    if (isArray(value)) {\n      value.forEach(({ v: text, i: idx, n: norm }) => {\n        if (!isDefined(text)) {\n          return\n        }\n\n        const { isMatch, score, indices } = searcher.searchIn(text);\n\n        if (isMatch) {\n          matches.push({\n            score,\n            key,\n            value: text,\n            idx,\n            norm,\n            indices\n          });\n        }\n      });\n    } else {\n      const { v: text, n: norm } = value;\n\n      const { isMatch, score, indices } = searcher.searchIn(text);\n\n      if (isMatch) {\n        matches.push({ score, key, value: text, norm, indices });\n      }\n    }\n\n    return matches\n  }\n}\n\nFuse.version = '7.1.0';\nFuse.createIndex = createIndex;\nFuse.parseIndex = parseIndex;\nFuse.config = Config;\n\n{\n  Fuse.parseQuery = parse;\n}\n\n{\n  register(ExtendedSearch);\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvZnVzZS5qcy9kaXN0L2Z1c2UubWpzIiwibWFwcGluZ3MiOiI7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdXBlcnNldC8uL25vZGVfbW9kdWxlcy9mdXNlLmpzL2Rpc3QvZnVzZS5tanM/NGRhNSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEZ1c2UuanMgdjcuMS4wIC0gTGlnaHR3ZWlnaHQgZnV6enktc2VhcmNoIChodHRwOi8vZnVzZWpzLmlvKVxuICpcbiAqIENvcHlyaWdodCAoYykgMjAyNSBLaXJvIFJpc2sgKGh0dHA6Ly9raXJvLm1lKVxuICogQWxsIFJpZ2h0cyBSZXNlcnZlZC4gQXBhY2hlIFNvZnR3YXJlIExpY2Vuc2UgMi4wXG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKi9cblxuZnVuY3Rpb24gaXNBcnJheSh2YWx1ZSkge1xuICByZXR1cm4gIUFycmF5LmlzQXJyYXlcbiAgICA/IGdldFRhZyh2YWx1ZSkgPT09ICdbb2JqZWN0IEFycmF5XSdcbiAgICA6IEFycmF5LmlzQXJyYXkodmFsdWUpXG59XG5cbi8vIEFkYXB0ZWQgZnJvbTogaHR0cHM6Ly9naXRodWIuY29tL2xvZGFzaC9sb2Rhc2gvYmxvYi9tYXN0ZXIvLmludGVybmFsL2Jhc2VUb1N0cmluZy5qc1xuY29uc3QgSU5GSU5JVFkgPSAxIC8gMDtcbmZ1bmN0aW9uIGJhc2VUb1N0cmluZyh2YWx1ZSkge1xuICAvLyBFeGl0IGVhcmx5IGZvciBzdHJpbmdzIHRvIGF2b2lkIGEgcGVyZm9ybWFuY2UgaGl0IGluIHNvbWUgZW52aXJvbm1lbnRzLlxuICBpZiAodHlwZW9mIHZhbHVlID09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHZhbHVlXG4gIH1cbiAgbGV0IHJlc3VsdCA9IHZhbHVlICsgJyc7XG4gIHJldHVybiByZXN1bHQgPT0gJzAnICYmIDEgLyB2YWx1ZSA9PSAtSU5GSU5JVFkgPyAnLTAnIDogcmVzdWx0XG59XG5cbmZ1bmN0aW9uIHRvU3RyaW5nKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSA9PSBudWxsID8gJycgOiBiYXNlVG9TdHJpbmcodmFsdWUpXG59XG5cbmZ1bmN0aW9uIGlzU3RyaW5nKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnXG59XG5cbmZ1bmN0aW9uIGlzTnVtYmVyKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInXG59XG5cbi8vIEFkYXB0ZWQgZnJvbTogaHR0cHM6Ly9naXRodWIuY29tL2xvZGFzaC9sb2Rhc2gvYmxvYi9tYXN0ZXIvaXNCb29sZWFuLmpzXG5mdW5jdGlvbiBpc0Jvb2xlYW4odmFsdWUpIHtcbiAgcmV0dXJuIChcbiAgICB2YWx1ZSA9PT0gdHJ1ZSB8fFxuICAgIHZhbHVlID09PSBmYWxzZSB8fFxuICAgIChpc09iamVjdExpa2UodmFsdWUpICYmIGdldFRhZyh2YWx1ZSkgPT0gJ1tvYmplY3QgQm9vbGVhbl0nKVxuICApXG59XG5cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnXG59XG5cbi8vIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLlxuZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gIHJldHVybiBpc09iamVjdCh2YWx1ZSkgJiYgdmFsdWUgIT09IG51bGxcbn1cblxuZnVuY3Rpb24gaXNEZWZpbmVkKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlICE9PSBudWxsXG59XG5cbmZ1bmN0aW9uIGlzQmxhbmsodmFsdWUpIHtcbiAgcmV0dXJuICF2YWx1ZS50cmltKCkubGVuZ3RoXG59XG5cbi8vIEdldHMgdGhlIGB0b1N0cmluZ1RhZ2Agb2YgYHZhbHVlYC5cbi8vIEFkYXB0ZWQgZnJvbTogaHR0cHM6Ly9naXRodWIuY29tL2xvZGFzaC9sb2Rhc2gvYmxvYi9tYXN0ZXIvLmludGVybmFsL2dldFRhZy5qc1xuZnVuY3Rpb24gZ2V0VGFnKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSA9PSBudWxsXG4gICAgPyB2YWx1ZSA9PT0gdW5kZWZpbmVkXG4gICAgICA/ICdbb2JqZWN0IFVuZGVmaW5lZF0nXG4gICAgICA6ICdbb2JqZWN0IE51bGxdJ1xuICAgIDogT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKVxufVxuXG5jb25zdCBFWFRFTkRFRF9TRUFSQ0hfVU5BVkFJTEFCTEUgPSAnRXh0ZW5kZWQgc2VhcmNoIGlzIG5vdCBhdmFpbGFibGUnO1xuXG5jb25zdCBJTkNPUlJFQ1RfSU5ERVhfVFlQRSA9IFwiSW5jb3JyZWN0ICdpbmRleCcgdHlwZVwiO1xuXG5jb25zdCBMT0dJQ0FMX1NFQVJDSF9JTlZBTElEX1FVRVJZX0ZPUl9LRVkgPSAoa2V5KSA9PlxuICBgSW52YWxpZCB2YWx1ZSBmb3Iga2V5ICR7a2V5fWA7XG5cbmNvbnN0IFBBVFRFUk5fTEVOR1RIX1RPT19MQVJHRSA9IChtYXgpID0+XG4gIGBQYXR0ZXJuIGxlbmd0aCBleGNlZWRzIG1heCBvZiAke21heH0uYDtcblxuY29uc3QgTUlTU0lOR19LRVlfUFJPUEVSVFkgPSAobmFtZSkgPT4gYE1pc3NpbmcgJHtuYW1lfSBwcm9wZXJ0eSBpbiBrZXlgO1xuXG5jb25zdCBJTlZBTElEX0tFWV9XRUlHSFRfVkFMVUUgPSAoa2V5KSA9PlxuICBgUHJvcGVydHkgJ3dlaWdodCcgaW4ga2V5ICcke2tleX0nIG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyYDtcblxuY29uc3QgaGFzT3duID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxuY2xhc3MgS2V5U3RvcmUge1xuICBjb25zdHJ1Y3RvcihrZXlzKSB7XG4gICAgdGhpcy5fa2V5cyA9IFtdO1xuICAgIHRoaXMuX2tleU1hcCA9IHt9O1xuXG4gICAgbGV0IHRvdGFsV2VpZ2h0ID0gMDtcblxuICAgIGtleXMuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICBsZXQgb2JqID0gY3JlYXRlS2V5KGtleSk7XG5cbiAgICAgIHRoaXMuX2tleXMucHVzaChvYmopO1xuICAgICAgdGhpcy5fa2V5TWFwW29iai5pZF0gPSBvYmo7XG5cbiAgICAgIHRvdGFsV2VpZ2h0ICs9IG9iai53ZWlnaHQ7XG4gICAgfSk7XG5cbiAgICAvLyBOb3JtYWxpemUgd2VpZ2h0cyBzbyB0aGF0IHRoZWlyIHN1bSBpcyBlcXVhbCB0byAxXG4gICAgdGhpcy5fa2V5cy5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIGtleS53ZWlnaHQgLz0gdG90YWxXZWlnaHQ7XG4gICAgfSk7XG4gIH1cbiAgZ2V0KGtleUlkKSB7XG4gICAgcmV0dXJuIHRoaXMuX2tleU1hcFtrZXlJZF1cbiAgfVxuICBrZXlzKCkge1xuICAgIHJldHVybiB0aGlzLl9rZXlzXG4gIH1cbiAgdG9KU09OKCkge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLl9rZXlzKVxuICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUtleShrZXkpIHtcbiAgbGV0IHBhdGggPSBudWxsO1xuICBsZXQgaWQgPSBudWxsO1xuICBsZXQgc3JjID0gbnVsbDtcbiAgbGV0IHdlaWdodCA9IDE7XG4gIGxldCBnZXRGbiA9IG51bGw7XG5cbiAgaWYgKGlzU3RyaW5nKGtleSkgfHwgaXNBcnJheShrZXkpKSB7XG4gICAgc3JjID0ga2V5O1xuICAgIHBhdGggPSBjcmVhdGVLZXlQYXRoKGtleSk7XG4gICAgaWQgPSBjcmVhdGVLZXlJZChrZXkpO1xuICB9IGVsc2Uge1xuICAgIGlmICghaGFzT3duLmNhbGwoa2V5LCAnbmFtZScpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoTUlTU0lOR19LRVlfUFJPUEVSVFkoJ25hbWUnKSlcbiAgICB9XG5cbiAgICBjb25zdCBuYW1lID0ga2V5Lm5hbWU7XG4gICAgc3JjID0gbmFtZTtcblxuICAgIGlmIChoYXNPd24uY2FsbChrZXksICd3ZWlnaHQnKSkge1xuICAgICAgd2VpZ2h0ID0ga2V5LndlaWdodDtcblxuICAgICAgaWYgKHdlaWdodCA8PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihJTlZBTElEX0tFWV9XRUlHSFRfVkFMVUUobmFtZSkpXG4gICAgICB9XG4gICAgfVxuXG4gICAgcGF0aCA9IGNyZWF0ZUtleVBhdGgobmFtZSk7XG4gICAgaWQgPSBjcmVhdGVLZXlJZChuYW1lKTtcbiAgICBnZXRGbiA9IGtleS5nZXRGbjtcbiAgfVxuXG4gIHJldHVybiB7IHBhdGgsIGlkLCB3ZWlnaHQsIHNyYywgZ2V0Rm4gfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVLZXlQYXRoKGtleSkge1xuICByZXR1cm4gaXNBcnJheShrZXkpID8ga2V5IDoga2V5LnNwbGl0KCcuJylcbn1cblxuZnVuY3Rpb24gY3JlYXRlS2V5SWQoa2V5KSB7XG4gIHJldHVybiBpc0FycmF5KGtleSkgPyBrZXkuam9pbignLicpIDoga2V5XG59XG5cbmZ1bmN0aW9uIGdldChvYmosIHBhdGgpIHtcbiAgbGV0IGxpc3QgPSBbXTtcbiAgbGV0IGFyciA9IGZhbHNlO1xuXG4gIGNvbnN0IGRlZXBHZXQgPSAob2JqLCBwYXRoLCBpbmRleCkgPT4ge1xuICAgIGlmICghaXNEZWZpbmVkKG9iaikpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAoIXBhdGhbaW5kZXhdKSB7XG4gICAgICAvLyBJZiB0aGVyZSdzIG5vIHBhdGggbGVmdCwgd2UndmUgYXJyaXZlZCBhdCB0aGUgb2JqZWN0IHdlIGNhcmUgYWJvdXQuXG4gICAgICBsaXN0LnB1c2gob2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IGtleSA9IHBhdGhbaW5kZXhdO1xuXG4gICAgICBjb25zdCB2YWx1ZSA9IG9ialtrZXldO1xuXG4gICAgICBpZiAoIWlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIC8vIElmIHdlJ3JlIGF0IHRoZSBsYXN0IHZhbHVlIGluIHRoZSBwYXRoLCBhbmQgaWYgaXQncyBhIHN0cmluZy9udW1iZXIvYm9vbCxcbiAgICAgIC8vIGFkZCBpdCB0byB0aGUgbGlzdFxuICAgICAgaWYgKFxuICAgICAgICBpbmRleCA9PT0gcGF0aC5sZW5ndGggLSAxICYmXG4gICAgICAgIChpc1N0cmluZyh2YWx1ZSkgfHwgaXNOdW1iZXIodmFsdWUpIHx8IGlzQm9vbGVhbih2YWx1ZSkpXG4gICAgICApIHtcbiAgICAgICAgbGlzdC5wdXNoKHRvU3RyaW5nKHZhbHVlKSk7XG4gICAgICB9IGVsc2UgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIGFyciA9IHRydWU7XG4gICAgICAgIC8vIFNlYXJjaCBlYWNoIGl0ZW0gaW4gdGhlIGFycmF5LlxuICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gdmFsdWUubGVuZ3RoOyBpIDwgbGVuOyBpICs9IDEpIHtcbiAgICAgICAgICBkZWVwR2V0KHZhbHVlW2ldLCBwYXRoLCBpbmRleCArIDEpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHBhdGgubGVuZ3RoKSB7XG4gICAgICAgIC8vIEFuIG9iamVjdC4gUmVjdXJzZSBmdXJ0aGVyLlxuICAgICAgICBkZWVwR2V0KHZhbHVlLCBwYXRoLCBpbmRleCArIDEpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvLyBCYWNrd2FyZHMgY29tcGF0aWJpbGl0eSAoc2luY2UgcGF0aCB1c2VkIHRvIGJlIGEgc3RyaW5nKVxuICBkZWVwR2V0KG9iaiwgaXNTdHJpbmcocGF0aCkgPyBwYXRoLnNwbGl0KCcuJykgOiBwYXRoLCAwKTtcblxuICByZXR1cm4gYXJyID8gbGlzdCA6IGxpc3RbMF1cbn1cblxuY29uc3QgTWF0Y2hPcHRpb25zID0ge1xuICAvLyBXaGV0aGVyIHRoZSBtYXRjaGVzIHNob3VsZCBiZSBpbmNsdWRlZCBpbiB0aGUgcmVzdWx0IHNldC4gV2hlbiBgdHJ1ZWAsIGVhY2ggcmVjb3JkIGluIHRoZSByZXN1bHRcbiAgLy8gc2V0IHdpbGwgaW5jbHVkZSB0aGUgaW5kaWNlcyBvZiB0aGUgbWF0Y2hlZCBjaGFyYWN0ZXJzLlxuICAvLyBUaGVzZSBjYW4gY29uc2VxdWVudGx5IGJlIHVzZWQgZm9yIGhpZ2hsaWdodGluZyBwdXJwb3Nlcy5cbiAgaW5jbHVkZU1hdGNoZXM6IGZhbHNlLFxuICAvLyBXaGVuIGB0cnVlYCwgdGhlIG1hdGNoaW5nIGZ1bmN0aW9uIHdpbGwgY29udGludWUgdG8gdGhlIGVuZCBvZiBhIHNlYXJjaCBwYXR0ZXJuIGV2ZW4gaWZcbiAgLy8gYSBwZXJmZWN0IG1hdGNoIGhhcyBhbHJlYWR5IGJlZW4gbG9jYXRlZCBpbiB0aGUgc3RyaW5nLlxuICBmaW5kQWxsTWF0Y2hlczogZmFsc2UsXG4gIC8vIE1pbmltdW0gbnVtYmVyIG9mIGNoYXJhY3RlcnMgdGhhdCBtdXN0IGJlIG1hdGNoZWQgYmVmb3JlIGEgcmVzdWx0IGlzIGNvbnNpZGVyZWQgYSBtYXRjaFxuICBtaW5NYXRjaENoYXJMZW5ndGg6IDFcbn07XG5cbmNvbnN0IEJhc2ljT3B0aW9ucyA9IHtcbiAgLy8gV2hlbiBgdHJ1ZWAsIHRoZSBhbGdvcml0aG0gY29udGludWVzIHNlYXJjaGluZyB0byB0aGUgZW5kIG9mIHRoZSBpbnB1dCBldmVuIGlmIGEgcGVyZmVjdFxuICAvLyBtYXRjaCBpcyBmb3VuZCBiZWZvcmUgdGhlIGVuZCBvZiB0aGUgc2FtZSBpbnB1dC5cbiAgaXNDYXNlU2Vuc2l0aXZlOiBmYWxzZSxcbiAgLy8gV2hlbiBgdHJ1ZWAsIHRoZSBhbGdvcml0aG0gd2lsbCBpZ25vcmUgZGlhY3JpdGljcyAoYWNjZW50cykgaW4gY29tcGFyaXNvbnNcbiAgaWdub3JlRGlhY3JpdGljczogZmFsc2UsXG4gIC8vIFdoZW4gdHJ1ZSwgdGhlIG1hdGNoaW5nIGZ1bmN0aW9uIHdpbGwgY29udGludWUgdG8gdGhlIGVuZCBvZiBhIHNlYXJjaCBwYXR0ZXJuIGV2ZW4gaWZcbiAgaW5jbHVkZVNjb3JlOiBmYWxzZSxcbiAgLy8gTGlzdCBvZiBwcm9wZXJ0aWVzIHRoYXQgd2lsbCBiZSBzZWFyY2hlZC4gVGhpcyBhbHNvIHN1cHBvcnRzIG5lc3RlZCBwcm9wZXJ0aWVzLlxuICBrZXlzOiBbXSxcbiAgLy8gV2hldGhlciB0byBzb3J0IHRoZSByZXN1bHQgbGlzdCwgYnkgc2NvcmVcbiAgc2hvdWxkU29ydDogdHJ1ZSxcbiAgLy8gRGVmYXVsdCBzb3J0IGZ1bmN0aW9uOiBzb3J0IGJ5IGFzY2VuZGluZyBzY29yZSwgYXNjZW5kaW5nIGluZGV4XG4gIHNvcnRGbjogKGEsIGIpID0+XG4gICAgYS5zY29yZSA9PT0gYi5zY29yZSA/IChhLmlkeCA8IGIuaWR4ID8gLTEgOiAxKSA6IGEuc2NvcmUgPCBiLnNjb3JlID8gLTEgOiAxXG59O1xuXG5jb25zdCBGdXp6eU9wdGlvbnMgPSB7XG4gIC8vIEFwcHJveGltYXRlbHkgd2hlcmUgaW4gdGhlIHRleHQgaXMgdGhlIHBhdHRlcm4gZXhwZWN0ZWQgdG8gYmUgZm91bmQ/XG4gIGxvY2F0aW9uOiAwLFxuICAvLyBBdCB3aGF0IHBvaW50IGRvZXMgdGhlIG1hdGNoIGFsZ29yaXRobSBnaXZlIHVwLiBBIHRocmVzaG9sZCBvZiAnMC4wJyByZXF1aXJlcyBhIHBlcmZlY3QgbWF0Y2hcbiAgLy8gKG9mIGJvdGggbGV0dGVycyBhbmQgbG9jYXRpb24pLCBhIHRocmVzaG9sZCBvZiAnMS4wJyB3b3VsZCBtYXRjaCBhbnl0aGluZy5cbiAgdGhyZXNob2xkOiAwLjYsXG4gIC8vIERldGVybWluZXMgaG93IGNsb3NlIHRoZSBtYXRjaCBtdXN0IGJlIHRvIHRoZSBmdXp6eSBsb2NhdGlvbiAoc3BlY2lmaWVkIGFib3ZlKS5cbiAgLy8gQW4gZXhhY3QgbGV0dGVyIG1hdGNoIHdoaWNoIGlzICdkaXN0YW5jZScgY2hhcmFjdGVycyBhd2F5IGZyb20gdGhlIGZ1enp5IGxvY2F0aW9uXG4gIC8vIHdvdWxkIHNjb3JlIGFzIGEgY29tcGxldGUgbWlzbWF0Y2guIEEgZGlzdGFuY2Ugb2YgJzAnIHJlcXVpcmVzIHRoZSBtYXRjaCBiZSBhdFxuICAvLyB0aGUgZXhhY3QgbG9jYXRpb24gc3BlY2lmaWVkLCBhIHRocmVzaG9sZCBvZiAnMTAwMCcgd291bGQgcmVxdWlyZSBhIHBlcmZlY3QgbWF0Y2hcbiAgLy8gdG8gYmUgd2l0aGluIDgwMCBjaGFyYWN0ZXJzIG9mIHRoZSBmdXp6eSBsb2NhdGlvbiB0byBiZSBmb3VuZCB1c2luZyBhIDAuOCB0aHJlc2hvbGQuXG4gIGRpc3RhbmNlOiAxMDBcbn07XG5cbmNvbnN0IEFkdmFuY2VkT3B0aW9ucyA9IHtcbiAgLy8gV2hlbiBgdHJ1ZWAsIGl0IGVuYWJsZXMgdGhlIHVzZSBvZiB1bml4LWxpa2Ugc2VhcmNoIGNvbW1hbmRzXG4gIHVzZUV4dGVuZGVkU2VhcmNoOiBmYWxzZSxcbiAgLy8gVGhlIGdldCBmdW5jdGlvbiB0byB1c2Ugd2hlbiBmZXRjaGluZyBhbiBvYmplY3QncyBwcm9wZXJ0aWVzLlxuICAvLyBUaGUgZGVmYXVsdCB3aWxsIHNlYXJjaCBuZXN0ZWQgcGF0aHMgKmllIGZvby5iYXIuYmF6KlxuICBnZXRGbjogZ2V0LFxuICAvLyBXaGVuIGB0cnVlYCwgc2VhcmNoIHdpbGwgaWdub3JlIGBsb2NhdGlvbmAgYW5kIGBkaXN0YW5jZWAsIHNvIGl0IHdvbid0IG1hdHRlclxuICAvLyB3aGVyZSBpbiB0aGUgc3RyaW5nIHRoZSBwYXR0ZXJuIGFwcGVhcnMuXG4gIC8vIE1vcmUgaW5mbzogaHR0cHM6Ly9mdXNlanMuaW8vY29uY2VwdHMvc2NvcmluZy10aGVvcnkuaHRtbCNmdXp6aW5lc3Mtc2NvcmVcbiAgaWdub3JlTG9jYXRpb246IGZhbHNlLFxuICAvLyBXaGVuIGB0cnVlYCwgdGhlIGNhbGN1bGF0aW9uIGZvciB0aGUgcmVsZXZhbmNlIHNjb3JlICh1c2VkIGZvciBzb3J0aW5nKSB3aWxsXG4gIC8vIGlnbm9yZSB0aGUgZmllbGQtbGVuZ3RoIG5vcm0uXG4gIC8vIE1vcmUgaW5mbzogaHR0cHM6Ly9mdXNlanMuaW8vY29uY2VwdHMvc2NvcmluZy10aGVvcnkuaHRtbCNmaWVsZC1sZW5ndGgtbm9ybVxuICBpZ25vcmVGaWVsZE5vcm06IGZhbHNlLFxuICAvLyBUaGUgd2VpZ2h0IHRvIGRldGVybWluZSBob3cgbXVjaCBmaWVsZCBsZW5ndGggbm9ybSBlZmZlY3RzIHNjb3JpbmcuXG4gIGZpZWxkTm9ybVdlaWdodDogMVxufTtcblxudmFyIENvbmZpZyA9IHtcbiAgLi4uQmFzaWNPcHRpb25zLFxuICAuLi5NYXRjaE9wdGlvbnMsXG4gIC4uLkZ1enp5T3B0aW9ucyxcbiAgLi4uQWR2YW5jZWRPcHRpb25zXG59O1xuXG5jb25zdCBTUEFDRSA9IC9bXiBdKy9nO1xuXG4vLyBGaWVsZC1sZW5ndGggbm9ybTogdGhlIHNob3J0ZXIgdGhlIGZpZWxkLCB0aGUgaGlnaGVyIHRoZSB3ZWlnaHQuXG4vLyBTZXQgdG8gMyBkZWNpbWFscyB0byByZWR1Y2UgaW5kZXggc2l6ZS5cbmZ1bmN0aW9uIG5vcm0od2VpZ2h0ID0gMSwgbWFudGlzc2EgPSAzKSB7XG4gIGNvbnN0IGNhY2hlID0gbmV3IE1hcCgpO1xuICBjb25zdCBtID0gTWF0aC5wb3coMTAsIG1hbnRpc3NhKTtcblxuICByZXR1cm4ge1xuICAgIGdldCh2YWx1ZSkge1xuICAgICAgY29uc3QgbnVtVG9rZW5zID0gdmFsdWUubWF0Y2goU1BBQ0UpLmxlbmd0aDtcblxuICAgICAgaWYgKGNhY2hlLmhhcyhudW1Ub2tlbnMpKSB7XG4gICAgICAgIHJldHVybiBjYWNoZS5nZXQobnVtVG9rZW5zKVxuICAgICAgfVxuXG4gICAgICAvLyBEZWZhdWx0IGZ1bmN0aW9uIGlzIDEvc3FydCh4KSwgd2VpZ2h0IG1ha2VzIHRoYXQgdmFyaWFibGVcbiAgICAgIGNvbnN0IG5vcm0gPSAxIC8gTWF0aC5wb3cobnVtVG9rZW5zLCAwLjUgKiB3ZWlnaHQpO1xuXG4gICAgICAvLyBJbiBwbGFjZSBvZiBgdG9GaXhlZChtYW50aXNzYSlgLCBmb3IgZmFzdGVyIGNvbXB1dGF0aW9uXG4gICAgICBjb25zdCBuID0gcGFyc2VGbG9hdChNYXRoLnJvdW5kKG5vcm0gKiBtKSAvIG0pO1xuXG4gICAgICBjYWNoZS5zZXQobnVtVG9rZW5zLCBuKTtcblxuICAgICAgcmV0dXJuIG5cbiAgICB9LFxuICAgIGNsZWFyKCkge1xuICAgICAgY2FjaGUuY2xlYXIoKTtcbiAgICB9XG4gIH1cbn1cblxuY2xhc3MgRnVzZUluZGV4IHtcbiAgY29uc3RydWN0b3Ioe1xuICAgIGdldEZuID0gQ29uZmlnLmdldEZuLFxuICAgIGZpZWxkTm9ybVdlaWdodCA9IENvbmZpZy5maWVsZE5vcm1XZWlnaHRcbiAgfSA9IHt9KSB7XG4gICAgdGhpcy5ub3JtID0gbm9ybShmaWVsZE5vcm1XZWlnaHQsIDMpO1xuICAgIHRoaXMuZ2V0Rm4gPSBnZXRGbjtcbiAgICB0aGlzLmlzQ3JlYXRlZCA9IGZhbHNlO1xuXG4gICAgdGhpcy5zZXRJbmRleFJlY29yZHMoKTtcbiAgfVxuICBzZXRTb3VyY2VzKGRvY3MgPSBbXSkge1xuICAgIHRoaXMuZG9jcyA9IGRvY3M7XG4gIH1cbiAgc2V0SW5kZXhSZWNvcmRzKHJlY29yZHMgPSBbXSkge1xuICAgIHRoaXMucmVjb3JkcyA9IHJlY29yZHM7XG4gIH1cbiAgc2V0S2V5cyhrZXlzID0gW10pIHtcbiAgICB0aGlzLmtleXMgPSBrZXlzO1xuICAgIHRoaXMuX2tleXNNYXAgPSB7fTtcbiAgICBrZXlzLmZvckVhY2goKGtleSwgaWR4KSA9PiB7XG4gICAgICB0aGlzLl9rZXlzTWFwW2tleS5pZF0gPSBpZHg7XG4gICAgfSk7XG4gIH1cbiAgY3JlYXRlKCkge1xuICAgIGlmICh0aGlzLmlzQ3JlYXRlZCB8fCAhdGhpcy5kb2NzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgdGhpcy5pc0NyZWF0ZWQgPSB0cnVlO1xuXG4gICAgLy8gTGlzdCBpcyBBcnJheTxTdHJpbmc+XG4gICAgaWYgKGlzU3RyaW5nKHRoaXMuZG9jc1swXSkpIHtcbiAgICAgIHRoaXMuZG9jcy5mb3JFYWNoKChkb2MsIGRvY0luZGV4KSA9PiB7XG4gICAgICAgIHRoaXMuX2FkZFN0cmluZyhkb2MsIGRvY0luZGV4KTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBMaXN0IGlzIEFycmF5PE9iamVjdD5cbiAgICAgIHRoaXMuZG9jcy5mb3JFYWNoKChkb2MsIGRvY0luZGV4KSA9PiB7XG4gICAgICAgIHRoaXMuX2FkZE9iamVjdChkb2MsIGRvY0luZGV4KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMubm9ybS5jbGVhcigpO1xuICB9XG4gIC8vIEFkZHMgYSBkb2MgdG8gdGhlIGVuZCBvZiB0aGUgaW5kZXhcbiAgYWRkKGRvYykge1xuICAgIGNvbnN0IGlkeCA9IHRoaXMuc2l6ZSgpO1xuXG4gICAgaWYgKGlzU3RyaW5nKGRvYykpIHtcbiAgICAgIHRoaXMuX2FkZFN0cmluZyhkb2MsIGlkeCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2FkZE9iamVjdChkb2MsIGlkeCk7XG4gICAgfVxuICB9XG4gIC8vIFJlbW92ZXMgdGhlIGRvYyBhdCB0aGUgc3BlY2lmaWVkIGluZGV4IG9mIHRoZSBpbmRleFxuICByZW1vdmVBdChpZHgpIHtcbiAgICB0aGlzLnJlY29yZHMuc3BsaWNlKGlkeCwgMSk7XG5cbiAgICAvLyBDaGFuZ2UgcmVmIGluZGV4IG9mIGV2ZXJ5IHN1YnNxdWVudCBkb2NcbiAgICBmb3IgKGxldCBpID0gaWR4LCBsZW4gPSB0aGlzLnNpemUoKTsgaSA8IGxlbjsgaSArPSAxKSB7XG4gICAgICB0aGlzLnJlY29yZHNbaV0uaSAtPSAxO1xuICAgIH1cbiAgfVxuICBnZXRWYWx1ZUZvckl0ZW1BdEtleUlkKGl0ZW0sIGtleUlkKSB7XG4gICAgcmV0dXJuIGl0ZW1bdGhpcy5fa2V5c01hcFtrZXlJZF1dXG4gIH1cbiAgc2l6ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5yZWNvcmRzLmxlbmd0aFxuICB9XG4gIF9hZGRTdHJpbmcoZG9jLCBkb2NJbmRleCkge1xuICAgIGlmICghaXNEZWZpbmVkKGRvYykgfHwgaXNCbGFuayhkb2MpKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBsZXQgcmVjb3JkID0ge1xuICAgICAgdjogZG9jLFxuICAgICAgaTogZG9jSW5kZXgsXG4gICAgICBuOiB0aGlzLm5vcm0uZ2V0KGRvYylcbiAgICB9O1xuXG4gICAgdGhpcy5yZWNvcmRzLnB1c2gocmVjb3JkKTtcbiAgfVxuICBfYWRkT2JqZWN0KGRvYywgZG9jSW5kZXgpIHtcbiAgICBsZXQgcmVjb3JkID0geyBpOiBkb2NJbmRleCwgJDoge30gfTtcblxuICAgIC8vIEl0ZXJhdGUgb3ZlciBldmVyeSBrZXkgKGkuZSwgcGF0aCksIGFuZCBmZXRjaCB0aGUgdmFsdWUgYXQgdGhhdCBrZXlcbiAgICB0aGlzLmtleXMuZm9yRWFjaCgoa2V5LCBrZXlJbmRleCkgPT4ge1xuICAgICAgbGV0IHZhbHVlID0ga2V5LmdldEZuID8ga2V5LmdldEZuKGRvYykgOiB0aGlzLmdldEZuKGRvYywga2V5LnBhdGgpO1xuXG4gICAgICBpZiAoIWlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgICBsZXQgc3ViUmVjb3JkcyA9IFtdO1xuICAgICAgICBjb25zdCBzdGFjayA9IFt7IG5lc3RlZEFyckluZGV4OiAtMSwgdmFsdWUgfV07XG5cbiAgICAgICAgd2hpbGUgKHN0YWNrLmxlbmd0aCkge1xuICAgICAgICAgIGNvbnN0IHsgbmVzdGVkQXJySW5kZXgsIHZhbHVlIH0gPSBzdGFjay5wb3AoKTtcblxuICAgICAgICAgIGlmICghaXNEZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoaXNTdHJpbmcodmFsdWUpICYmICFpc0JsYW5rKHZhbHVlKSkge1xuICAgICAgICAgICAgbGV0IHN1YlJlY29yZCA9IHtcbiAgICAgICAgICAgICAgdjogdmFsdWUsXG4gICAgICAgICAgICAgIGk6IG5lc3RlZEFyckluZGV4LFxuICAgICAgICAgICAgICBuOiB0aGlzLm5vcm0uZ2V0KHZhbHVlKVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgc3ViUmVjb3Jkcy5wdXNoKHN1YlJlY29yZCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgdmFsdWUuZm9yRWFjaCgoaXRlbSwgaykgPT4ge1xuICAgICAgICAgICAgICBzdGFjay5wdXNoKHtcbiAgICAgICAgICAgICAgICBuZXN0ZWRBcnJJbmRleDogayxcbiAgICAgICAgICAgICAgICB2YWx1ZTogaXRlbVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSA7XG4gICAgICAgIH1cbiAgICAgICAgcmVjb3JkLiRba2V5SW5kZXhdID0gc3ViUmVjb3JkcztcbiAgICAgIH0gZWxzZSBpZiAoaXNTdHJpbmcodmFsdWUpICYmICFpc0JsYW5rKHZhbHVlKSkge1xuICAgICAgICBsZXQgc3ViUmVjb3JkID0ge1xuICAgICAgICAgIHY6IHZhbHVlLFxuICAgICAgICAgIG46IHRoaXMubm9ybS5nZXQodmFsdWUpXG4gICAgICAgIH07XG5cbiAgICAgICAgcmVjb3JkLiRba2V5SW5kZXhdID0gc3ViUmVjb3JkO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5yZWNvcmRzLnB1c2gocmVjb3JkKTtcbiAgfVxuICB0b0pTT04oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGtleXM6IHRoaXMua2V5cyxcbiAgICAgIHJlY29yZHM6IHRoaXMucmVjb3Jkc1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVJbmRleChcbiAga2V5cyxcbiAgZG9jcyxcbiAgeyBnZXRGbiA9IENvbmZpZy5nZXRGbiwgZmllbGROb3JtV2VpZ2h0ID0gQ29uZmlnLmZpZWxkTm9ybVdlaWdodCB9ID0ge31cbikge1xuICBjb25zdCBteUluZGV4ID0gbmV3IEZ1c2VJbmRleCh7IGdldEZuLCBmaWVsZE5vcm1XZWlnaHQgfSk7XG4gIG15SW5kZXguc2V0S2V5cyhrZXlzLm1hcChjcmVhdGVLZXkpKTtcbiAgbXlJbmRleC5zZXRTb3VyY2VzKGRvY3MpO1xuICBteUluZGV4LmNyZWF0ZSgpO1xuICByZXR1cm4gbXlJbmRleFxufVxuXG5mdW5jdGlvbiBwYXJzZUluZGV4KFxuICBkYXRhLFxuICB7IGdldEZuID0gQ29uZmlnLmdldEZuLCBmaWVsZE5vcm1XZWlnaHQgPSBDb25maWcuZmllbGROb3JtV2VpZ2h0IH0gPSB7fVxuKSB7XG4gIGNvbnN0IHsga2V5cywgcmVjb3JkcyB9ID0gZGF0YTtcbiAgY29uc3QgbXlJbmRleCA9IG5ldyBGdXNlSW5kZXgoeyBnZXRGbiwgZmllbGROb3JtV2VpZ2h0IH0pO1xuICBteUluZGV4LnNldEtleXMoa2V5cyk7XG4gIG15SW5kZXguc2V0SW5kZXhSZWNvcmRzKHJlY29yZHMpO1xuICByZXR1cm4gbXlJbmRleFxufVxuXG5mdW5jdGlvbiBjb21wdXRlU2NvcmUkMShcbiAgcGF0dGVybixcbiAge1xuICAgIGVycm9ycyA9IDAsXG4gICAgY3VycmVudExvY2F0aW9uID0gMCxcbiAgICBleHBlY3RlZExvY2F0aW9uID0gMCxcbiAgICBkaXN0YW5jZSA9IENvbmZpZy5kaXN0YW5jZSxcbiAgICBpZ25vcmVMb2NhdGlvbiA9IENvbmZpZy5pZ25vcmVMb2NhdGlvblxuICB9ID0ge31cbikge1xuICBjb25zdCBhY2N1cmFjeSA9IGVycm9ycyAvIHBhdHRlcm4ubGVuZ3RoO1xuXG4gIGlmIChpZ25vcmVMb2NhdGlvbikge1xuICAgIHJldHVybiBhY2N1cmFjeVxuICB9XG5cbiAgY29uc3QgcHJveGltaXR5ID0gTWF0aC5hYnMoZXhwZWN0ZWRMb2NhdGlvbiAtIGN1cnJlbnRMb2NhdGlvbik7XG5cbiAgaWYgKCFkaXN0YW5jZSkge1xuICAgIC8vIERvZGdlIGRpdmlkZSBieSB6ZXJvIGVycm9yLlxuICAgIHJldHVybiBwcm94aW1pdHkgPyAxLjAgOiBhY2N1cmFjeVxuICB9XG5cbiAgcmV0dXJuIGFjY3VyYWN5ICsgcHJveGltaXR5IC8gZGlzdGFuY2Vcbn1cblxuZnVuY3Rpb24gY29udmVydE1hc2tUb0luZGljZXMoXG4gIG1hdGNobWFzayA9IFtdLFxuICBtaW5NYXRjaENoYXJMZW5ndGggPSBDb25maWcubWluTWF0Y2hDaGFyTGVuZ3RoXG4pIHtcbiAgbGV0IGluZGljZXMgPSBbXTtcbiAgbGV0IHN0YXJ0ID0gLTE7XG4gIGxldCBlbmQgPSAtMTtcbiAgbGV0IGkgPSAwO1xuXG4gIGZvciAobGV0IGxlbiA9IG1hdGNobWFzay5sZW5ndGg7IGkgPCBsZW47IGkgKz0gMSkge1xuICAgIGxldCBtYXRjaCA9IG1hdGNobWFza1tpXTtcbiAgICBpZiAobWF0Y2ggJiYgc3RhcnQgPT09IC0xKSB7XG4gICAgICBzdGFydCA9IGk7XG4gICAgfSBlbHNlIGlmICghbWF0Y2ggJiYgc3RhcnQgIT09IC0xKSB7XG4gICAgICBlbmQgPSBpIC0gMTtcbiAgICAgIGlmIChlbmQgLSBzdGFydCArIDEgPj0gbWluTWF0Y2hDaGFyTGVuZ3RoKSB7XG4gICAgICAgIGluZGljZXMucHVzaChbc3RhcnQsIGVuZF0pO1xuICAgICAgfVxuICAgICAgc3RhcnQgPSAtMTtcbiAgICB9XG4gIH1cblxuICAvLyAoaS0xIC0gc3RhcnQpICsgMSA9PiBpIC0gc3RhcnRcbiAgaWYgKG1hdGNobWFza1tpIC0gMV0gJiYgaSAtIHN0YXJ0ID49IG1pbk1hdGNoQ2hhckxlbmd0aCkge1xuICAgIGluZGljZXMucHVzaChbc3RhcnQsIGkgLSAxXSk7XG4gIH1cblxuICByZXR1cm4gaW5kaWNlc1xufVxuXG4vLyBNYWNoaW5lIHdvcmQgc2l6ZVxuY29uc3QgTUFYX0JJVFMgPSAzMjtcblxuZnVuY3Rpb24gc2VhcmNoKFxuICB0ZXh0LFxuICBwYXR0ZXJuLFxuICBwYXR0ZXJuQWxwaGFiZXQsXG4gIHtcbiAgICBsb2NhdGlvbiA9IENvbmZpZy5sb2NhdGlvbixcbiAgICBkaXN0YW5jZSA9IENvbmZpZy5kaXN0YW5jZSxcbiAgICB0aHJlc2hvbGQgPSBDb25maWcudGhyZXNob2xkLFxuICAgIGZpbmRBbGxNYXRjaGVzID0gQ29uZmlnLmZpbmRBbGxNYXRjaGVzLFxuICAgIG1pbk1hdGNoQ2hhckxlbmd0aCA9IENvbmZpZy5taW5NYXRjaENoYXJMZW5ndGgsXG4gICAgaW5jbHVkZU1hdGNoZXMgPSBDb25maWcuaW5jbHVkZU1hdGNoZXMsXG4gICAgaWdub3JlTG9jYXRpb24gPSBDb25maWcuaWdub3JlTG9jYXRpb25cbiAgfSA9IHt9XG4pIHtcbiAgaWYgKHBhdHRlcm4ubGVuZ3RoID4gTUFYX0JJVFMpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoUEFUVEVSTl9MRU5HVEhfVE9PX0xBUkdFKE1BWF9CSVRTKSlcbiAgfVxuXG4gIGNvbnN0IHBhdHRlcm5MZW4gPSBwYXR0ZXJuLmxlbmd0aDtcbiAgLy8gU2V0IHN0YXJ0aW5nIGxvY2F0aW9uIGF0IGJlZ2lubmluZyB0ZXh0IGFuZCBpbml0aWFsaXplIHRoZSBhbHBoYWJldC5cbiAgY29uc3QgdGV4dExlbiA9IHRleHQubGVuZ3RoO1xuICAvLyBIYW5kbGUgdGhlIGNhc2Ugd2hlbiBsb2NhdGlvbiA+IHRleHQubGVuZ3RoXG4gIGNvbnN0IGV4cGVjdGVkTG9jYXRpb24gPSBNYXRoLm1heCgwLCBNYXRoLm1pbihsb2NhdGlvbiwgdGV4dExlbikpO1xuICAvLyBIaWdoZXN0IHNjb3JlIGJleW9uZCB3aGljaCB3ZSBnaXZlIHVwLlxuICBsZXQgY3VycmVudFRocmVzaG9sZCA9IHRocmVzaG9sZDtcbiAgLy8gSXMgdGhlcmUgYSBuZWFyYnkgZXhhY3QgbWF0Y2g/IChzcGVlZHVwKVxuICBsZXQgYmVzdExvY2F0aW9uID0gZXhwZWN0ZWRMb2NhdGlvbjtcblxuICAvLyBQZXJmb3JtYW5jZTogb25seSBjb21wdXRlciBtYXRjaGVzIHdoZW4gdGhlIG1pbk1hdGNoQ2hhckxlbmd0aCA+IDFcbiAgLy8gT1IgaWYgYGluY2x1ZGVNYXRjaGVzYCBpcyB0cnVlLlxuICBjb25zdCBjb21wdXRlTWF0Y2hlcyA9IG1pbk1hdGNoQ2hhckxlbmd0aCA+IDEgfHwgaW5jbHVkZU1hdGNoZXM7XG4gIC8vIEEgbWFzayBvZiB0aGUgbWF0Y2hlcywgdXNlZCBmb3IgYnVpbGRpbmcgdGhlIGluZGljZXNcbiAgY29uc3QgbWF0Y2hNYXNrID0gY29tcHV0ZU1hdGNoZXMgPyBBcnJheSh0ZXh0TGVuKSA6IFtdO1xuXG4gIGxldCBpbmRleDtcblxuICAvLyBHZXQgYWxsIGV4YWN0IG1hdGNoZXMsIGhlcmUgZm9yIHNwZWVkIHVwXG4gIHdoaWxlICgoaW5kZXggPSB0ZXh0LmluZGV4T2YocGF0dGVybiwgYmVzdExvY2F0aW9uKSkgPiAtMSkge1xuICAgIGxldCBzY29yZSA9IGNvbXB1dGVTY29yZSQxKHBhdHRlcm4sIHtcbiAgICAgIGN1cnJlbnRMb2NhdGlvbjogaW5kZXgsXG4gICAgICBleHBlY3RlZExvY2F0aW9uLFxuICAgICAgZGlzdGFuY2UsXG4gICAgICBpZ25vcmVMb2NhdGlvblxuICAgIH0pO1xuXG4gICAgY3VycmVudFRocmVzaG9sZCA9IE1hdGgubWluKHNjb3JlLCBjdXJyZW50VGhyZXNob2xkKTtcbiAgICBiZXN0TG9jYXRpb24gPSBpbmRleCArIHBhdHRlcm5MZW47XG5cbiAgICBpZiAoY29tcHV0ZU1hdGNoZXMpIHtcbiAgICAgIGxldCBpID0gMDtcbiAgICAgIHdoaWxlIChpIDwgcGF0dGVybkxlbikge1xuICAgICAgICBtYXRjaE1hc2tbaW5kZXggKyBpXSA9IDE7XG4gICAgICAgIGkgKz0gMTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBSZXNldCB0aGUgYmVzdCBsb2NhdGlvblxuICBiZXN0TG9jYXRpb24gPSAtMTtcblxuICBsZXQgbGFzdEJpdEFyciA9IFtdO1xuICBsZXQgZmluYWxTY29yZSA9IDE7XG4gIGxldCBiaW5NYXggPSBwYXR0ZXJuTGVuICsgdGV4dExlbjtcblxuICBjb25zdCBtYXNrID0gMSA8PCAocGF0dGVybkxlbiAtIDEpO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcGF0dGVybkxlbjsgaSArPSAxKSB7XG4gICAgLy8gU2NhbiBmb3IgdGhlIGJlc3QgbWF0Y2g7IGVhY2ggaXRlcmF0aW9uIGFsbG93cyBmb3Igb25lIG1vcmUgZXJyb3IuXG4gICAgLy8gUnVuIGEgYmluYXJ5IHNlYXJjaCB0byBkZXRlcm1pbmUgaG93IGZhciBmcm9tIHRoZSBtYXRjaCBsb2NhdGlvbiB3ZSBjYW4gc3RyYXlcbiAgICAvLyBhdCB0aGlzIGVycm9yIGxldmVsLlxuICAgIGxldCBiaW5NaW4gPSAwO1xuICAgIGxldCBiaW5NaWQgPSBiaW5NYXg7XG5cbiAgICB3aGlsZSAoYmluTWluIDwgYmluTWlkKSB7XG4gICAgICBjb25zdCBzY29yZSA9IGNvbXB1dGVTY29yZSQxKHBhdHRlcm4sIHtcbiAgICAgICAgZXJyb3JzOiBpLFxuICAgICAgICBjdXJyZW50TG9jYXRpb246IGV4cGVjdGVkTG9jYXRpb24gKyBiaW5NaWQsXG4gICAgICAgIGV4cGVjdGVkTG9jYXRpb24sXG4gICAgICAgIGRpc3RhbmNlLFxuICAgICAgICBpZ25vcmVMb2NhdGlvblxuICAgICAgfSk7XG5cbiAgICAgIGlmIChzY29yZSA8PSBjdXJyZW50VGhyZXNob2xkKSB7XG4gICAgICAgIGJpbk1pbiA9IGJpbk1pZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJpbk1heCA9IGJpbk1pZDtcbiAgICAgIH1cblxuICAgICAgYmluTWlkID0gTWF0aC5mbG9vcigoYmluTWF4IC0gYmluTWluKSAvIDIgKyBiaW5NaW4pO1xuICAgIH1cblxuICAgIC8vIFVzZSB0aGUgcmVzdWx0IGZyb20gdGhpcyBpdGVyYXRpb24gYXMgdGhlIG1heGltdW0gZm9yIHRoZSBuZXh0LlxuICAgIGJpbk1heCA9IGJpbk1pZDtcblxuICAgIGxldCBzdGFydCA9IE1hdGgubWF4KDEsIGV4cGVjdGVkTG9jYXRpb24gLSBiaW5NaWQgKyAxKTtcbiAgICBsZXQgZmluaXNoID0gZmluZEFsbE1hdGNoZXNcbiAgICAgID8gdGV4dExlblxuICAgICAgOiBNYXRoLm1pbihleHBlY3RlZExvY2F0aW9uICsgYmluTWlkLCB0ZXh0TGVuKSArIHBhdHRlcm5MZW47XG5cbiAgICAvLyBJbml0aWFsaXplIHRoZSBiaXQgYXJyYXlcbiAgICBsZXQgYml0QXJyID0gQXJyYXkoZmluaXNoICsgMik7XG5cbiAgICBiaXRBcnJbZmluaXNoICsgMV0gPSAoMSA8PCBpKSAtIDE7XG5cbiAgICBmb3IgKGxldCBqID0gZmluaXNoOyBqID49IHN0YXJ0OyBqIC09IDEpIHtcbiAgICAgIGxldCBjdXJyZW50TG9jYXRpb24gPSBqIC0gMTtcbiAgICAgIGxldCBjaGFyTWF0Y2ggPSBwYXR0ZXJuQWxwaGFiZXRbdGV4dC5jaGFyQXQoY3VycmVudExvY2F0aW9uKV07XG5cbiAgICAgIGlmIChjb21wdXRlTWF0Y2hlcykge1xuICAgICAgICAvLyBTcGVlZCB1cDogcXVpY2sgYm9vbCB0byBpbnQgY29udmVyc2lvbiAoaS5lLCBgY2hhck1hdGNoID8gMSA6IDBgKVxuICAgICAgICBtYXRjaE1hc2tbY3VycmVudExvY2F0aW9uXSA9ICshIWNoYXJNYXRjaDtcbiAgICAgIH1cblxuICAgICAgLy8gRmlyc3QgcGFzczogZXhhY3QgbWF0Y2hcbiAgICAgIGJpdEFycltqXSA9ICgoYml0QXJyW2ogKyAxXSA8PCAxKSB8IDEpICYgY2hhck1hdGNoO1xuXG4gICAgICAvLyBTdWJzZXF1ZW50IHBhc3NlczogZnV6enkgbWF0Y2hcbiAgICAgIGlmIChpKSB7XG4gICAgICAgIGJpdEFycltqXSB8PVxuICAgICAgICAgICgobGFzdEJpdEFycltqICsgMV0gfCBsYXN0Qml0QXJyW2pdKSA8PCAxKSB8IDEgfCBsYXN0Qml0QXJyW2ogKyAxXTtcbiAgICAgIH1cblxuICAgICAgaWYgKGJpdEFycltqXSAmIG1hc2spIHtcbiAgICAgICAgZmluYWxTY29yZSA9IGNvbXB1dGVTY29yZSQxKHBhdHRlcm4sIHtcbiAgICAgICAgICBlcnJvcnM6IGksXG4gICAgICAgICAgY3VycmVudExvY2F0aW9uLFxuICAgICAgICAgIGV4cGVjdGVkTG9jYXRpb24sXG4gICAgICAgICAgZGlzdGFuY2UsXG4gICAgICAgICAgaWdub3JlTG9jYXRpb25cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gVGhpcyBtYXRjaCB3aWxsIGFsbW9zdCBjZXJ0YWlubHkgYmUgYmV0dGVyIHRoYW4gYW55IGV4aXN0aW5nIG1hdGNoLlxuICAgICAgICAvLyBCdXQgY2hlY2sgYW55d2F5LlxuICAgICAgICBpZiAoZmluYWxTY29yZSA8PSBjdXJyZW50VGhyZXNob2xkKSB7XG4gICAgICAgICAgLy8gSW5kZWVkIGl0IGlzXG4gICAgICAgICAgY3VycmVudFRocmVzaG9sZCA9IGZpbmFsU2NvcmU7XG4gICAgICAgICAgYmVzdExvY2F0aW9uID0gY3VycmVudExvY2F0aW9uO1xuXG4gICAgICAgICAgLy8gQWxyZWFkeSBwYXNzZWQgYGxvY2AsIGRvd25oaWxsIGZyb20gaGVyZSBvbiBpbi5cbiAgICAgICAgICBpZiAoYmVzdExvY2F0aW9uIDw9IGV4cGVjdGVkTG9jYXRpb24pIHtcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gV2hlbiBwYXNzaW5nIGBiZXN0TG9jYXRpb25gLCBkb24ndCBleGNlZWQgb3VyIGN1cnJlbnQgZGlzdGFuY2UgZnJvbSBgZXhwZWN0ZWRMb2NhdGlvbmAuXG4gICAgICAgICAgc3RhcnQgPSBNYXRoLm1heCgxLCAyICogZXhwZWN0ZWRMb2NhdGlvbiAtIGJlc3RMb2NhdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBObyBob3BlIGZvciBhIChiZXR0ZXIpIG1hdGNoIGF0IGdyZWF0ZXIgZXJyb3IgbGV2ZWxzLlxuICAgIGNvbnN0IHNjb3JlID0gY29tcHV0ZVNjb3JlJDEocGF0dGVybiwge1xuICAgICAgZXJyb3JzOiBpICsgMSxcbiAgICAgIGN1cnJlbnRMb2NhdGlvbjogZXhwZWN0ZWRMb2NhdGlvbixcbiAgICAgIGV4cGVjdGVkTG9jYXRpb24sXG4gICAgICBkaXN0YW5jZSxcbiAgICAgIGlnbm9yZUxvY2F0aW9uXG4gICAgfSk7XG5cbiAgICBpZiAoc2NvcmUgPiBjdXJyZW50VGhyZXNob2xkKSB7XG4gICAgICBicmVha1xuICAgIH1cblxuICAgIGxhc3RCaXRBcnIgPSBiaXRBcnI7XG4gIH1cblxuICBjb25zdCByZXN1bHQgPSB7XG4gICAgaXNNYXRjaDogYmVzdExvY2F0aW9uID49IDAsXG4gICAgLy8gQ291bnQgZXhhY3QgbWF0Y2hlcyAodGhvc2Ugd2l0aCBhIHNjb3JlIG9mIDApIHRvIGJlIFwiYWxtb3N0XCIgZXhhY3RcbiAgICBzY29yZTogTWF0aC5tYXgoMC4wMDEsIGZpbmFsU2NvcmUpXG4gIH07XG5cbiAgaWYgKGNvbXB1dGVNYXRjaGVzKSB7XG4gICAgY29uc3QgaW5kaWNlcyA9IGNvbnZlcnRNYXNrVG9JbmRpY2VzKG1hdGNoTWFzaywgbWluTWF0Y2hDaGFyTGVuZ3RoKTtcbiAgICBpZiAoIWluZGljZXMubGVuZ3RoKSB7XG4gICAgICByZXN1bHQuaXNNYXRjaCA9IGZhbHNlO1xuICAgIH0gZWxzZSBpZiAoaW5jbHVkZU1hdGNoZXMpIHtcbiAgICAgIHJlc3VsdC5pbmRpY2VzID0gaW5kaWNlcztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVBhdHRlcm5BbHBoYWJldChwYXR0ZXJuKSB7XG4gIGxldCBtYXNrID0ge307XG5cbiAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHBhdHRlcm4ubGVuZ3RoOyBpIDwgbGVuOyBpICs9IDEpIHtcbiAgICBjb25zdCBjaGFyID0gcGF0dGVybi5jaGFyQXQoaSk7XG4gICAgbWFza1tjaGFyXSA9IChtYXNrW2NoYXJdIHx8IDApIHwgKDEgPDwgKGxlbiAtIGkgLSAxKSk7XG4gIH1cblxuICByZXR1cm4gbWFza1xufVxuXG5jb25zdCBzdHJpcERpYWNyaXRpY3MgPSBTdHJpbmcucHJvdG90eXBlLm5vcm1hbGl6ZVxuICAgID8gKChzdHIpID0+IHN0ci5ub3JtYWxpemUoJ05GRCcpLnJlcGxhY2UoL1tcXHUwMzAwLVxcdTAzNkZcXHUwNDgzLVxcdTA0ODlcXHUwNTkxLVxcdTA1QkRcXHUwNUJGXFx1MDVDMVxcdTA1QzJcXHUwNUM0XFx1MDVDNVxcdTA1QzdcXHUwNjEwLVxcdTA2MUFcXHUwNjRCLVxcdTA2NUZcXHUwNjcwXFx1MDZENi1cXHUwNkRDXFx1MDZERi1cXHUwNkU0XFx1MDZFN1xcdTA2RThcXHUwNkVBLVxcdTA2RURcXHUwNzExXFx1MDczMC1cXHUwNzRBXFx1MDdBNi1cXHUwN0IwXFx1MDdFQi1cXHUwN0YzXFx1MDdGRFxcdTA4MTYtXFx1MDgxOVxcdTA4MUItXFx1MDgyM1xcdTA4MjUtXFx1MDgyN1xcdTA4MjktXFx1MDgyRFxcdTA4NTktXFx1MDg1QlxcdTA4RDMtXFx1MDhFMVxcdTA4RTMtXFx1MDkwM1xcdTA5M0EtXFx1MDkzQ1xcdTA5M0UtXFx1MDk0RlxcdTA5NTEtXFx1MDk1N1xcdTA5NjJcXHUwOTYzXFx1MDk4MS1cXHUwOTgzXFx1MDlCQ1xcdTA5QkUtXFx1MDlDNFxcdTA5QzdcXHUwOUM4XFx1MDlDQi1cXHUwOUNEXFx1MDlEN1xcdTA5RTJcXHUwOUUzXFx1MDlGRVxcdTBBMDEtXFx1MEEwM1xcdTBBM0NcXHUwQTNFLVxcdTBBNDJcXHUwQTQ3XFx1MEE0OFxcdTBBNEItXFx1MEE0RFxcdTBBNTFcXHUwQTcwXFx1MEE3MVxcdTBBNzVcXHUwQTgxLVxcdTBBODNcXHUwQUJDXFx1MEFCRS1cXHUwQUM1XFx1MEFDNy1cXHUwQUM5XFx1MEFDQi1cXHUwQUNEXFx1MEFFMlxcdTBBRTNcXHUwQUZBLVxcdTBBRkZcXHUwQjAxLVxcdTBCMDNcXHUwQjNDXFx1MEIzRS1cXHUwQjQ0XFx1MEI0N1xcdTBCNDhcXHUwQjRCLVxcdTBCNERcXHUwQjU2XFx1MEI1N1xcdTBCNjJcXHUwQjYzXFx1MEI4MlxcdTBCQkUtXFx1MEJDMlxcdTBCQzYtXFx1MEJDOFxcdTBCQ0EtXFx1MEJDRFxcdTBCRDdcXHUwQzAwLVxcdTBDMDRcXHUwQzNFLVxcdTBDNDRcXHUwQzQ2LVxcdTBDNDhcXHUwQzRBLVxcdTBDNERcXHUwQzU1XFx1MEM1NlxcdTBDNjJcXHUwQzYzXFx1MEM4MS1cXHUwQzgzXFx1MENCQ1xcdTBDQkUtXFx1MENDNFxcdTBDQzYtXFx1MENDOFxcdTBDQ0EtXFx1MENDRFxcdTBDRDVcXHUwQ0Q2XFx1MENFMlxcdTBDRTNcXHUwRDAwLVxcdTBEMDNcXHUwRDNCXFx1MEQzQ1xcdTBEM0UtXFx1MEQ0NFxcdTBENDYtXFx1MEQ0OFxcdTBENEEtXFx1MEQ0RFxcdTBENTdcXHUwRDYyXFx1MEQ2M1xcdTBEODJcXHUwRDgzXFx1MERDQVxcdTBEQ0YtXFx1MERENFxcdTBERDZcXHUwREQ4LVxcdTBEREZcXHUwREYyXFx1MERGM1xcdTBFMzFcXHUwRTM0LVxcdTBFM0FcXHUwRTQ3LVxcdTBFNEVcXHUwRUIxXFx1MEVCNC1cXHUwRUI5XFx1MEVCQlxcdTBFQkNcXHUwRUM4LVxcdTBFQ0RcXHUwRjE4XFx1MEYxOVxcdTBGMzVcXHUwRjM3XFx1MEYzOVxcdTBGM0VcXHUwRjNGXFx1MEY3MS1cXHUwRjg0XFx1MEY4NlxcdTBGODdcXHUwRjhELVxcdTBGOTdcXHUwRjk5LVxcdTBGQkNcXHUwRkM2XFx1MTAyQi1cXHUxMDNFXFx1MTA1Ni1cXHUxMDU5XFx1MTA1RS1cXHUxMDYwXFx1MTA2Mi1cXHUxMDY0XFx1MTA2Ny1cXHUxMDZEXFx1MTA3MS1cXHUxMDc0XFx1MTA4Mi1cXHUxMDhEXFx1MTA4RlxcdTEwOUEtXFx1MTA5RFxcdTEzNUQtXFx1MTM1RlxcdTE3MTItXFx1MTcxNFxcdTE3MzItXFx1MTczNFxcdTE3NTJcXHUxNzUzXFx1MTc3MlxcdTE3NzNcXHUxN0I0LVxcdTE3RDNcXHUxN0REXFx1MTgwQi1cXHUxODBEXFx1MTg4NVxcdTE4ODZcXHUxOEE5XFx1MTkyMC1cXHUxOTJCXFx1MTkzMC1cXHUxOTNCXFx1MUExNy1cXHUxQTFCXFx1MUE1NS1cXHUxQTVFXFx1MUE2MC1cXHUxQTdDXFx1MUE3RlxcdTFBQjAtXFx1MUFCRVxcdTFCMDAtXFx1MUIwNFxcdTFCMzQtXFx1MUI0NFxcdTFCNkItXFx1MUI3M1xcdTFCODAtXFx1MUI4MlxcdTFCQTEtXFx1MUJBRFxcdTFCRTYtXFx1MUJGM1xcdTFDMjQtXFx1MUMzN1xcdTFDRDAtXFx1MUNEMlxcdTFDRDQtXFx1MUNFOFxcdTFDRURcXHUxQ0YyLVxcdTFDRjRcXHUxQ0Y3LVxcdTFDRjlcXHUxREMwLVxcdTFERjlcXHUxREZCLVxcdTFERkZcXHUyMEQwLVxcdTIwRjBcXHUyQ0VGLVxcdTJDRjFcXHUyRDdGXFx1MkRFMC1cXHUyREZGXFx1MzAyQS1cXHUzMDJGXFx1MzA5OVxcdTMwOUFcXHVBNjZGLVxcdUE2NzJcXHVBNjc0LVxcdUE2N0RcXHVBNjlFXFx1QTY5RlxcdUE2RjBcXHVBNkYxXFx1QTgwMlxcdUE4MDZcXHVBODBCXFx1QTgyMy1cXHVBODI3XFx1QTg4MFxcdUE4ODFcXHVBOEI0LVxcdUE4QzVcXHVBOEUwLVxcdUE4RjFcXHVBOEZGXFx1QTkyNi1cXHVBOTJEXFx1QTk0Ny1cXHVBOTUzXFx1QTk4MC1cXHVBOTgzXFx1QTlCMy1cXHVBOUMwXFx1QTlFNVxcdUFBMjktXFx1QUEzNlxcdUFBNDNcXHVBQTRDXFx1QUE0RFxcdUFBN0ItXFx1QUE3RFxcdUFBQjBcXHVBQUIyLVxcdUFBQjRcXHVBQUI3XFx1QUFCOFxcdUFBQkVcXHVBQUJGXFx1QUFDMVxcdUFBRUItXFx1QUFFRlxcdUFBRjVcXHVBQUY2XFx1QUJFMy1cXHVBQkVBXFx1QUJFQ1xcdUFCRURcXHVGQjFFXFx1RkUwMC1cXHVGRTBGXFx1RkUyMC1cXHVGRTJGXS9nLCAnJykpXG4gICAgOiAoKHN0cikgPT4gc3RyKTtcblxuY2xhc3MgQml0YXBTZWFyY2gge1xuICBjb25zdHJ1Y3RvcihcbiAgICBwYXR0ZXJuLFxuICAgIHtcbiAgICAgIGxvY2F0aW9uID0gQ29uZmlnLmxvY2F0aW9uLFxuICAgICAgdGhyZXNob2xkID0gQ29uZmlnLnRocmVzaG9sZCxcbiAgICAgIGRpc3RhbmNlID0gQ29uZmlnLmRpc3RhbmNlLFxuICAgICAgaW5jbHVkZU1hdGNoZXMgPSBDb25maWcuaW5jbHVkZU1hdGNoZXMsXG4gICAgICBmaW5kQWxsTWF0Y2hlcyA9IENvbmZpZy5maW5kQWxsTWF0Y2hlcyxcbiAgICAgIG1pbk1hdGNoQ2hhckxlbmd0aCA9IENvbmZpZy5taW5NYXRjaENoYXJMZW5ndGgsXG4gICAgICBpc0Nhc2VTZW5zaXRpdmUgPSBDb25maWcuaXNDYXNlU2Vuc2l0aXZlLFxuICAgICAgaWdub3JlRGlhY3JpdGljcyA9IENvbmZpZy5pZ25vcmVEaWFjcml0aWNzLFxuICAgICAgaWdub3JlTG9jYXRpb24gPSBDb25maWcuaWdub3JlTG9jYXRpb25cbiAgICB9ID0ge31cbiAgKSB7XG4gICAgdGhpcy5vcHRpb25zID0ge1xuICAgICAgbG9jYXRpb24sXG4gICAgICB0aHJlc2hvbGQsXG4gICAgICBkaXN0YW5jZSxcbiAgICAgIGluY2x1ZGVNYXRjaGVzLFxuICAgICAgZmluZEFsbE1hdGNoZXMsXG4gICAgICBtaW5NYXRjaENoYXJMZW5ndGgsXG4gICAgICBpc0Nhc2VTZW5zaXRpdmUsXG4gICAgICBpZ25vcmVEaWFjcml0aWNzLFxuICAgICAgaWdub3JlTG9jYXRpb25cbiAgICB9O1xuXG4gICAgcGF0dGVybiA9IGlzQ2FzZVNlbnNpdGl2ZSA/IHBhdHRlcm4gOiBwYXR0ZXJuLnRvTG93ZXJDYXNlKCk7XG4gICAgcGF0dGVybiA9IGlnbm9yZURpYWNyaXRpY3MgPyBzdHJpcERpYWNyaXRpY3MocGF0dGVybikgOiBwYXR0ZXJuO1xuICAgIHRoaXMucGF0dGVybiA9IHBhdHRlcm47XG5cbiAgICB0aGlzLmNodW5rcyA9IFtdO1xuXG4gICAgaWYgKCF0aGlzLnBhdHRlcm4ubGVuZ3RoKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBhZGRDaHVuayA9IChwYXR0ZXJuLCBzdGFydEluZGV4KSA9PiB7XG4gICAgICB0aGlzLmNodW5rcy5wdXNoKHtcbiAgICAgICAgcGF0dGVybixcbiAgICAgICAgYWxwaGFiZXQ6IGNyZWF0ZVBhdHRlcm5BbHBoYWJldChwYXR0ZXJuKSxcbiAgICAgICAgc3RhcnRJbmRleFxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIGNvbnN0IGxlbiA9IHRoaXMucGF0dGVybi5sZW5ndGg7XG5cbiAgICBpZiAobGVuID4gTUFYX0JJVFMpIHtcbiAgICAgIGxldCBpID0gMDtcbiAgICAgIGNvbnN0IHJlbWFpbmRlciA9IGxlbiAlIE1BWF9CSVRTO1xuICAgICAgY29uc3QgZW5kID0gbGVuIC0gcmVtYWluZGVyO1xuXG4gICAgICB3aGlsZSAoaSA8IGVuZCkge1xuICAgICAgICBhZGRDaHVuayh0aGlzLnBhdHRlcm4uc3Vic3RyKGksIE1BWF9CSVRTKSwgaSk7XG4gICAgICAgIGkgKz0gTUFYX0JJVFM7XG4gICAgICB9XG5cbiAgICAgIGlmIChyZW1haW5kZXIpIHtcbiAgICAgICAgY29uc3Qgc3RhcnRJbmRleCA9IGxlbiAtIE1BWF9CSVRTO1xuICAgICAgICBhZGRDaHVuayh0aGlzLnBhdHRlcm4uc3Vic3RyKHN0YXJ0SW5kZXgpLCBzdGFydEluZGV4KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgYWRkQ2h1bmsodGhpcy5wYXR0ZXJuLCAwKTtcbiAgICB9XG4gIH1cblxuICBzZWFyY2hJbih0ZXh0KSB7XG4gICAgY29uc3QgeyBpc0Nhc2VTZW5zaXRpdmUsIGlnbm9yZURpYWNyaXRpY3MsIGluY2x1ZGVNYXRjaGVzIH0gPSB0aGlzLm9wdGlvbnM7XG5cbiAgICB0ZXh0ID0gaXNDYXNlU2Vuc2l0aXZlID8gdGV4dCA6IHRleHQudG9Mb3dlckNhc2UoKTtcbiAgICB0ZXh0ID0gaWdub3JlRGlhY3JpdGljcyA/IHN0cmlwRGlhY3JpdGljcyh0ZXh0KSA6IHRleHQ7XG5cbiAgICAvLyBFeGFjdCBtYXRjaFxuICAgIGlmICh0aGlzLnBhdHRlcm4gPT09IHRleHQpIHtcbiAgICAgIGxldCByZXN1bHQgPSB7XG4gICAgICAgIGlzTWF0Y2g6IHRydWUsXG4gICAgICAgIHNjb3JlOiAwXG4gICAgICB9O1xuXG4gICAgICBpZiAoaW5jbHVkZU1hdGNoZXMpIHtcbiAgICAgICAgcmVzdWx0LmluZGljZXMgPSBbWzAsIHRleHQubGVuZ3RoIC0gMV1dO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0XG4gICAgfVxuXG4gICAgLy8gT3RoZXJ3aXNlLCB1c2UgQml0YXAgYWxnb3JpdGhtXG4gICAgY29uc3Qge1xuICAgICAgbG9jYXRpb24sXG4gICAgICBkaXN0YW5jZSxcbiAgICAgIHRocmVzaG9sZCxcbiAgICAgIGZpbmRBbGxNYXRjaGVzLFxuICAgICAgbWluTWF0Y2hDaGFyTGVuZ3RoLFxuICAgICAgaWdub3JlTG9jYXRpb25cbiAgICB9ID0gdGhpcy5vcHRpb25zO1xuXG4gICAgbGV0IGFsbEluZGljZXMgPSBbXTtcbiAgICBsZXQgdG90YWxTY29yZSA9IDA7XG4gICAgbGV0IGhhc01hdGNoZXMgPSBmYWxzZTtcblxuICAgIHRoaXMuY2h1bmtzLmZvckVhY2goKHsgcGF0dGVybiwgYWxwaGFiZXQsIHN0YXJ0SW5kZXggfSkgPT4ge1xuICAgICAgY29uc3QgeyBpc01hdGNoLCBzY29yZSwgaW5kaWNlcyB9ID0gc2VhcmNoKHRleHQsIHBhdHRlcm4sIGFscGhhYmV0LCB7XG4gICAgICAgIGxvY2F0aW9uOiBsb2NhdGlvbiArIHN0YXJ0SW5kZXgsXG4gICAgICAgIGRpc3RhbmNlLFxuICAgICAgICB0aHJlc2hvbGQsXG4gICAgICAgIGZpbmRBbGxNYXRjaGVzLFxuICAgICAgICBtaW5NYXRjaENoYXJMZW5ndGgsXG4gICAgICAgIGluY2x1ZGVNYXRjaGVzLFxuICAgICAgICBpZ25vcmVMb2NhdGlvblxuICAgICAgfSk7XG5cbiAgICAgIGlmIChpc01hdGNoKSB7XG4gICAgICAgIGhhc01hdGNoZXMgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICB0b3RhbFNjb3JlICs9IHNjb3JlO1xuXG4gICAgICBpZiAoaXNNYXRjaCAmJiBpbmRpY2VzKSB7XG4gICAgICAgIGFsbEluZGljZXMgPSBbLi4uYWxsSW5kaWNlcywgLi4uaW5kaWNlc107XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBsZXQgcmVzdWx0ID0ge1xuICAgICAgaXNNYXRjaDogaGFzTWF0Y2hlcyxcbiAgICAgIHNjb3JlOiBoYXNNYXRjaGVzID8gdG90YWxTY29yZSAvIHRoaXMuY2h1bmtzLmxlbmd0aCA6IDFcbiAgICB9O1xuXG4gICAgaWYgKGhhc01hdGNoZXMgJiYgaW5jbHVkZU1hdGNoZXMpIHtcbiAgICAgIHJlc3VsdC5pbmRpY2VzID0gYWxsSW5kaWNlcztcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cbn1cblxuY2xhc3MgQmFzZU1hdGNoIHtcbiAgY29uc3RydWN0b3IocGF0dGVybikge1xuICAgIHRoaXMucGF0dGVybiA9IHBhdHRlcm47XG4gIH1cbiAgc3RhdGljIGlzTXVsdGlNYXRjaChwYXR0ZXJuKSB7XG4gICAgcmV0dXJuIGdldE1hdGNoKHBhdHRlcm4sIHRoaXMubXVsdGlSZWdleClcbiAgfVxuICBzdGF0aWMgaXNTaW5nbGVNYXRjaChwYXR0ZXJuKSB7XG4gICAgcmV0dXJuIGdldE1hdGNoKHBhdHRlcm4sIHRoaXMuc2luZ2xlUmVnZXgpXG4gIH1cbiAgc2VhcmNoKC8qdGV4dCovKSB7fVxufVxuXG5mdW5jdGlvbiBnZXRNYXRjaChwYXR0ZXJuLCBleHApIHtcbiAgY29uc3QgbWF0Y2hlcyA9IHBhdHRlcm4ubWF0Y2goZXhwKTtcbiAgcmV0dXJuIG1hdGNoZXMgPyBtYXRjaGVzWzFdIDogbnVsbFxufVxuXG4vLyBUb2tlbjogJ2ZpbGVcblxuY2xhc3MgRXhhY3RNYXRjaCBleHRlbmRzIEJhc2VNYXRjaCB7XG4gIGNvbnN0cnVjdG9yKHBhdHRlcm4pIHtcbiAgICBzdXBlcihwYXR0ZXJuKTtcbiAgfVxuICBzdGF0aWMgZ2V0IHR5cGUoKSB7XG4gICAgcmV0dXJuICdleGFjdCdcbiAgfVxuICBzdGF0aWMgZ2V0IG11bHRpUmVnZXgoKSB7XG4gICAgcmV0dXJuIC9ePVwiKC4qKVwiJC9cbiAgfVxuICBzdGF0aWMgZ2V0IHNpbmdsZVJlZ2V4KCkge1xuICAgIHJldHVybiAvXj0oLiopJC9cbiAgfVxuICBzZWFyY2godGV4dCkge1xuICAgIGNvbnN0IGlzTWF0Y2ggPSB0ZXh0ID09PSB0aGlzLnBhdHRlcm47XG5cbiAgICByZXR1cm4ge1xuICAgICAgaXNNYXRjaCxcbiAgICAgIHNjb3JlOiBpc01hdGNoID8gMCA6IDEsXG4gICAgICBpbmRpY2VzOiBbMCwgdGhpcy5wYXR0ZXJuLmxlbmd0aCAtIDFdXG4gICAgfVxuICB9XG59XG5cbi8vIFRva2VuOiAhZmlyZVxuXG5jbGFzcyBJbnZlcnNlRXhhY3RNYXRjaCBleHRlbmRzIEJhc2VNYXRjaCB7XG4gIGNvbnN0cnVjdG9yKHBhdHRlcm4pIHtcbiAgICBzdXBlcihwYXR0ZXJuKTtcbiAgfVxuICBzdGF0aWMgZ2V0IHR5cGUoKSB7XG4gICAgcmV0dXJuICdpbnZlcnNlLWV4YWN0J1xuICB9XG4gIHN0YXRpYyBnZXQgbXVsdGlSZWdleCgpIHtcbiAgICByZXR1cm4gL14hXCIoLiopXCIkL1xuICB9XG4gIHN0YXRpYyBnZXQgc2luZ2xlUmVnZXgoKSB7XG4gICAgcmV0dXJuIC9eISguKikkL1xuICB9XG4gIHNlYXJjaCh0ZXh0KSB7XG4gICAgY29uc3QgaW5kZXggPSB0ZXh0LmluZGV4T2YodGhpcy5wYXR0ZXJuKTtcbiAgICBjb25zdCBpc01hdGNoID0gaW5kZXggPT09IC0xO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlzTWF0Y2gsXG4gICAgICBzY29yZTogaXNNYXRjaCA/IDAgOiAxLFxuICAgICAgaW5kaWNlczogWzAsIHRleHQubGVuZ3RoIC0gMV1cbiAgICB9XG4gIH1cbn1cblxuLy8gVG9rZW46IF5maWxlXG5cbmNsYXNzIFByZWZpeEV4YWN0TWF0Y2ggZXh0ZW5kcyBCYXNlTWF0Y2gge1xuICBjb25zdHJ1Y3RvcihwYXR0ZXJuKSB7XG4gICAgc3VwZXIocGF0dGVybik7XG4gIH1cbiAgc3RhdGljIGdldCB0eXBlKCkge1xuICAgIHJldHVybiAncHJlZml4LWV4YWN0J1xuICB9XG4gIHN0YXRpYyBnZXQgbXVsdGlSZWdleCgpIHtcbiAgICByZXR1cm4gL15cXF5cIiguKilcIiQvXG4gIH1cbiAgc3RhdGljIGdldCBzaW5nbGVSZWdleCgpIHtcbiAgICByZXR1cm4gL15cXF4oLiopJC9cbiAgfVxuICBzZWFyY2godGV4dCkge1xuICAgIGNvbnN0IGlzTWF0Y2ggPSB0ZXh0LnN0YXJ0c1dpdGgodGhpcy5wYXR0ZXJuKTtcblxuICAgIHJldHVybiB7XG4gICAgICBpc01hdGNoLFxuICAgICAgc2NvcmU6IGlzTWF0Y2ggPyAwIDogMSxcbiAgICAgIGluZGljZXM6IFswLCB0aGlzLnBhdHRlcm4ubGVuZ3RoIC0gMV1cbiAgICB9XG4gIH1cbn1cblxuLy8gVG9rZW46ICFeZmlyZVxuXG5jbGFzcyBJbnZlcnNlUHJlZml4RXhhY3RNYXRjaCBleHRlbmRzIEJhc2VNYXRjaCB7XG4gIGNvbnN0cnVjdG9yKHBhdHRlcm4pIHtcbiAgICBzdXBlcihwYXR0ZXJuKTtcbiAgfVxuICBzdGF0aWMgZ2V0IHR5cGUoKSB7XG4gICAgcmV0dXJuICdpbnZlcnNlLXByZWZpeC1leGFjdCdcbiAgfVxuICBzdGF0aWMgZ2V0IG11bHRpUmVnZXgoKSB7XG4gICAgcmV0dXJuIC9eIVxcXlwiKC4qKVwiJC9cbiAgfVxuICBzdGF0aWMgZ2V0IHNpbmdsZVJlZ2V4KCkge1xuICAgIHJldHVybiAvXiFcXF4oLiopJC9cbiAgfVxuICBzZWFyY2godGV4dCkge1xuICAgIGNvbnN0IGlzTWF0Y2ggPSAhdGV4dC5zdGFydHNXaXRoKHRoaXMucGF0dGVybik7XG5cbiAgICByZXR1cm4ge1xuICAgICAgaXNNYXRjaCxcbiAgICAgIHNjb3JlOiBpc01hdGNoID8gMCA6IDEsXG4gICAgICBpbmRpY2VzOiBbMCwgdGV4dC5sZW5ndGggLSAxXVxuICAgIH1cbiAgfVxufVxuXG4vLyBUb2tlbjogLmZpbGUkXG5cbmNsYXNzIFN1ZmZpeEV4YWN0TWF0Y2ggZXh0ZW5kcyBCYXNlTWF0Y2gge1xuICBjb25zdHJ1Y3RvcihwYXR0ZXJuKSB7XG4gICAgc3VwZXIocGF0dGVybik7XG4gIH1cbiAgc3RhdGljIGdldCB0eXBlKCkge1xuICAgIHJldHVybiAnc3VmZml4LWV4YWN0J1xuICB9XG4gIHN0YXRpYyBnZXQgbXVsdGlSZWdleCgpIHtcbiAgICByZXR1cm4gL15cIiguKilcIlxcJCQvXG4gIH1cbiAgc3RhdGljIGdldCBzaW5nbGVSZWdleCgpIHtcbiAgICByZXR1cm4gL14oLiopXFwkJC9cbiAgfVxuICBzZWFyY2godGV4dCkge1xuICAgIGNvbnN0IGlzTWF0Y2ggPSB0ZXh0LmVuZHNXaXRoKHRoaXMucGF0dGVybik7XG5cbiAgICByZXR1cm4ge1xuICAgICAgaXNNYXRjaCxcbiAgICAgIHNjb3JlOiBpc01hdGNoID8gMCA6IDEsXG4gICAgICBpbmRpY2VzOiBbdGV4dC5sZW5ndGggLSB0aGlzLnBhdHRlcm4ubGVuZ3RoLCB0ZXh0Lmxlbmd0aCAtIDFdXG4gICAgfVxuICB9XG59XG5cbi8vIFRva2VuOiAhLmZpbGUkXG5cbmNsYXNzIEludmVyc2VTdWZmaXhFeGFjdE1hdGNoIGV4dGVuZHMgQmFzZU1hdGNoIHtcbiAgY29uc3RydWN0b3IocGF0dGVybikge1xuICAgIHN1cGVyKHBhdHRlcm4pO1xuICB9XG4gIHN0YXRpYyBnZXQgdHlwZSgpIHtcbiAgICByZXR1cm4gJ2ludmVyc2Utc3VmZml4LWV4YWN0J1xuICB9XG4gIHN0YXRpYyBnZXQgbXVsdGlSZWdleCgpIHtcbiAgICByZXR1cm4gL14hXCIoLiopXCJcXCQkL1xuICB9XG4gIHN0YXRpYyBnZXQgc2luZ2xlUmVnZXgoKSB7XG4gICAgcmV0dXJuIC9eISguKilcXCQkL1xuICB9XG4gIHNlYXJjaCh0ZXh0KSB7XG4gICAgY29uc3QgaXNNYXRjaCA9ICF0ZXh0LmVuZHNXaXRoKHRoaXMucGF0dGVybik7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlzTWF0Y2gsXG4gICAgICBzY29yZTogaXNNYXRjaCA/IDAgOiAxLFxuICAgICAgaW5kaWNlczogWzAsIHRleHQubGVuZ3RoIC0gMV1cbiAgICB9XG4gIH1cbn1cblxuY2xhc3MgRnV6enlNYXRjaCBleHRlbmRzIEJhc2VNYXRjaCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHBhdHRlcm4sXG4gICAge1xuICAgICAgbG9jYXRpb24gPSBDb25maWcubG9jYXRpb24sXG4gICAgICB0aHJlc2hvbGQgPSBDb25maWcudGhyZXNob2xkLFxuICAgICAgZGlzdGFuY2UgPSBDb25maWcuZGlzdGFuY2UsXG4gICAgICBpbmNsdWRlTWF0Y2hlcyA9IENvbmZpZy5pbmNsdWRlTWF0Y2hlcyxcbiAgICAgIGZpbmRBbGxNYXRjaGVzID0gQ29uZmlnLmZpbmRBbGxNYXRjaGVzLFxuICAgICAgbWluTWF0Y2hDaGFyTGVuZ3RoID0gQ29uZmlnLm1pbk1hdGNoQ2hhckxlbmd0aCxcbiAgICAgIGlzQ2FzZVNlbnNpdGl2ZSA9IENvbmZpZy5pc0Nhc2VTZW5zaXRpdmUsXG4gICAgICBpZ25vcmVEaWFjcml0aWNzID0gQ29uZmlnLmlnbm9yZURpYWNyaXRpY3MsXG4gICAgICBpZ25vcmVMb2NhdGlvbiA9IENvbmZpZy5pZ25vcmVMb2NhdGlvblxuICAgIH0gPSB7fVxuICApIHtcbiAgICBzdXBlcihwYXR0ZXJuKTtcbiAgICB0aGlzLl9iaXRhcFNlYXJjaCA9IG5ldyBCaXRhcFNlYXJjaChwYXR0ZXJuLCB7XG4gICAgICBsb2NhdGlvbixcbiAgICAgIHRocmVzaG9sZCxcbiAgICAgIGRpc3RhbmNlLFxuICAgICAgaW5jbHVkZU1hdGNoZXMsXG4gICAgICBmaW5kQWxsTWF0Y2hlcyxcbiAgICAgIG1pbk1hdGNoQ2hhckxlbmd0aCxcbiAgICAgIGlzQ2FzZVNlbnNpdGl2ZSxcbiAgICAgIGlnbm9yZURpYWNyaXRpY3MsXG4gICAgICBpZ25vcmVMb2NhdGlvblxuICAgIH0pO1xuICB9XG4gIHN0YXRpYyBnZXQgdHlwZSgpIHtcbiAgICByZXR1cm4gJ2Z1enp5J1xuICB9XG4gIHN0YXRpYyBnZXQgbXVsdGlSZWdleCgpIHtcbiAgICByZXR1cm4gL15cIiguKilcIiQvXG4gIH1cbiAgc3RhdGljIGdldCBzaW5nbGVSZWdleCgpIHtcbiAgICByZXR1cm4gL14oLiopJC9cbiAgfVxuICBzZWFyY2godGV4dCkge1xuICAgIHJldHVybiB0aGlzLl9iaXRhcFNlYXJjaC5zZWFyY2hJbih0ZXh0KVxuICB9XG59XG5cbi8vIFRva2VuOiAnZmlsZVxuXG5jbGFzcyBJbmNsdWRlTWF0Y2ggZXh0ZW5kcyBCYXNlTWF0Y2gge1xuICBjb25zdHJ1Y3RvcihwYXR0ZXJuKSB7XG4gICAgc3VwZXIocGF0dGVybik7XG4gIH1cbiAgc3RhdGljIGdldCB0eXBlKCkge1xuICAgIHJldHVybiAnaW5jbHVkZSdcbiAgfVxuICBzdGF0aWMgZ2V0IG11bHRpUmVnZXgoKSB7XG4gICAgcmV0dXJuIC9eJ1wiKC4qKVwiJC9cbiAgfVxuICBzdGF0aWMgZ2V0IHNpbmdsZVJlZ2V4KCkge1xuICAgIHJldHVybiAvXicoLiopJC9cbiAgfVxuICBzZWFyY2godGV4dCkge1xuICAgIGxldCBsb2NhdGlvbiA9IDA7XG4gICAgbGV0IGluZGV4O1xuXG4gICAgY29uc3QgaW5kaWNlcyA9IFtdO1xuICAgIGNvbnN0IHBhdHRlcm5MZW4gPSB0aGlzLnBhdHRlcm4ubGVuZ3RoO1xuXG4gICAgLy8gR2V0IGFsbCBleGFjdCBtYXRjaGVzXG4gICAgd2hpbGUgKChpbmRleCA9IHRleHQuaW5kZXhPZih0aGlzLnBhdHRlcm4sIGxvY2F0aW9uKSkgPiAtMSkge1xuICAgICAgbG9jYXRpb24gPSBpbmRleCArIHBhdHRlcm5MZW47XG4gICAgICBpbmRpY2VzLnB1c2goW2luZGV4LCBsb2NhdGlvbiAtIDFdKTtcbiAgICB9XG5cbiAgICBjb25zdCBpc01hdGNoID0gISFpbmRpY2VzLmxlbmd0aDtcblxuICAgIHJldHVybiB7XG4gICAgICBpc01hdGNoLFxuICAgICAgc2NvcmU6IGlzTWF0Y2ggPyAwIDogMSxcbiAgICAgIGluZGljZXNcbiAgICB9XG4gIH1cbn1cblxuLy8g4p2XT3JkZXIgaXMgaW1wb3J0YW50LiBETyBOT1QgQ0hBTkdFLlxuY29uc3Qgc2VhcmNoZXJzID0gW1xuICBFeGFjdE1hdGNoLFxuICBJbmNsdWRlTWF0Y2gsXG4gIFByZWZpeEV4YWN0TWF0Y2gsXG4gIEludmVyc2VQcmVmaXhFeGFjdE1hdGNoLFxuICBJbnZlcnNlU3VmZml4RXhhY3RNYXRjaCxcbiAgU3VmZml4RXhhY3RNYXRjaCxcbiAgSW52ZXJzZUV4YWN0TWF0Y2gsXG4gIEZ1enp5TWF0Y2hcbl07XG5cbmNvbnN0IHNlYXJjaGVyc0xlbiA9IHNlYXJjaGVycy5sZW5ndGg7XG5cbi8vIFJlZ2V4IHRvIHNwbGl0IGJ5IHNwYWNlcywgYnV0IGtlZXAgYW55dGhpbmcgaW4gcXVvdGVzIHRvZ2V0aGVyXG5jb25zdCBTUEFDRV9SRSA9IC8gKyg/PSg/OlteXFxcIl0qXFxcIlteXFxcIl0qXFxcIikqW15cXFwiXSokKS87XG5jb25zdCBPUl9UT0tFTiA9ICd8JztcblxuLy8gUmV0dXJuIGEgMkQgYXJyYXkgcmVwcmVzZW50YXRpb24gb2YgdGhlIHF1ZXJ5LCBmb3Igc2ltcGxlciBwYXJzaW5nLlxuLy8gRXhhbXBsZTpcbi8vIFwiXmNvcmUgZ28kIHwgcmIkIHwgcHkkIHh5JFwiID0+IFtbXCJeY29yZVwiLCBcImdvJFwiXSwgW1wicmIkXCJdLCBbXCJweSRcIiwgXCJ4eSRcIl1dXG5mdW5jdGlvbiBwYXJzZVF1ZXJ5KHBhdHRlcm4sIG9wdGlvbnMgPSB7fSkge1xuICByZXR1cm4gcGF0dGVybi5zcGxpdChPUl9UT0tFTikubWFwKChpdGVtKSA9PiB7XG4gICAgbGV0IHF1ZXJ5ID0gaXRlbVxuICAgICAgLnRyaW0oKVxuICAgICAgLnNwbGl0KFNQQUNFX1JFKVxuICAgICAgLmZpbHRlcigoaXRlbSkgPT4gaXRlbSAmJiAhIWl0ZW0udHJpbSgpKTtcblxuICAgIGxldCByZXN1bHRzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHF1ZXJ5Lmxlbmd0aDsgaSA8IGxlbjsgaSArPSAxKSB7XG4gICAgICBjb25zdCBxdWVyeUl0ZW0gPSBxdWVyeVtpXTtcblxuICAgICAgLy8gMS4gSGFuZGxlIG11bHRpcGxlIHF1ZXJ5IG1hdGNoIChpLmUsIG9uY2UgdGhhdCBhcmUgcXVvdGVkLCBsaWtlIGBcImhlbGxvIHdvcmxkXCJgKVxuICAgICAgbGV0IGZvdW5kID0gZmFsc2U7XG4gICAgICBsZXQgaWR4ID0gLTE7XG4gICAgICB3aGlsZSAoIWZvdW5kICYmICsraWR4IDwgc2VhcmNoZXJzTGVuKSB7XG4gICAgICAgIGNvbnN0IHNlYXJjaGVyID0gc2VhcmNoZXJzW2lkeF07XG4gICAgICAgIGxldCB0b2tlbiA9IHNlYXJjaGVyLmlzTXVsdGlNYXRjaChxdWVyeUl0ZW0pO1xuICAgICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgICByZXN1bHRzLnB1c2gobmV3IHNlYXJjaGVyKHRva2VuLCBvcHRpb25zKSk7XG4gICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChmb3VuZCkge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICAvLyAyLiBIYW5kbGUgc2luZ2xlIHF1ZXJ5IG1hdGNoZXMgKGkuZSwgb25jZSB0aGF0IGFyZSAqbm90KiBxdW90ZWQpXG4gICAgICBpZHggPSAtMTtcbiAgICAgIHdoaWxlICgrK2lkeCA8IHNlYXJjaGVyc0xlbikge1xuICAgICAgICBjb25zdCBzZWFyY2hlciA9IHNlYXJjaGVyc1tpZHhdO1xuICAgICAgICBsZXQgdG9rZW4gPSBzZWFyY2hlci5pc1NpbmdsZU1hdGNoKHF1ZXJ5SXRlbSk7XG4gICAgICAgIGlmICh0b2tlbikge1xuICAgICAgICAgIHJlc3VsdHMucHVzaChuZXcgc2VhcmNoZXIodG9rZW4sIG9wdGlvbnMpKTtcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdHNcbiAgfSlcbn1cblxuLy8gVGhlc2UgZXh0ZW5kZWQgbWF0Y2hlcnMgY2FuIHJldHVybiBhbiBhcnJheSBvZiBtYXRjaGVzLCBhcyBvcHBvc2VkXG4vLyB0byBhIHNpbmdsIG1hdGNoXG5jb25zdCBNdWx0aU1hdGNoU2V0ID0gbmV3IFNldChbRnV6enlNYXRjaC50eXBlLCBJbmNsdWRlTWF0Y2gudHlwZV0pO1xuXG4vKipcbiAqIENvbW1hbmQtbGlrZSBzZWFyY2hpbmdcbiAqID09PT09PT09PT09PT09PT09PT09PT1cbiAqXG4gKiBHaXZlbiBtdWx0aXBsZSBzZWFyY2ggdGVybXMgZGVsaW1pdGVkIGJ5IHNwYWNlcy5lLmcuIGBeanNjcmlwdCAucHl0aG9uJCBydWJ5ICFqYXZhYCxcbiAqIHNlYXJjaCBpbiBhIGdpdmVuIHRleHQuXG4gKlxuICogU2VhcmNoIHN5bnRheDpcbiAqXG4gKiB8IFRva2VuICAgICAgIHwgTWF0Y2ggdHlwZSAgICAgICAgICAgICAgICAgfCBEZXNjcmlwdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8IC0tLS0tLS0tLS0tIHwgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gfCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSB8XG4gKiB8IGBqc2NyaXB0YCAgIHwgZnV6enktbWF0Y2ggICAgICAgICAgICAgICAgfCBJdGVtcyB0aGF0IGZ1enp5IG1hdGNoIGBqc2NyaXB0YCAgICAgICB8XG4gKiB8IGA9c2NoZW1lYCAgIHwgZXhhY3QtbWF0Y2ggICAgICAgICAgICAgICAgfCBJdGVtcyB0aGF0IGFyZSBgc2NoZW1lYCAgICAgICAgICAgICAgICB8XG4gKiB8IGAncHl0aG9uYCAgIHwgaW5jbHVkZS1tYXRjaCAgICAgICAgICAgICAgfCBJdGVtcyB0aGF0IGluY2x1ZGUgYHB5dGhvbmAgICAgICAgICAgICB8XG4gKiB8IGAhcnVieWAgICAgIHwgaW52ZXJzZS1leGFjdC1tYXRjaCAgICAgICAgfCBJdGVtcyB0aGF0IGRvIG5vdCBpbmNsdWRlIGBydWJ5YCAgICAgICB8XG4gKiB8IGBeamF2YWAgICAgIHwgcHJlZml4LWV4YWN0LW1hdGNoICAgICAgICAgfCBJdGVtcyB0aGF0IHN0YXJ0IHdpdGggYGphdmFgICAgICAgICAgICB8XG4gKiB8IGAhXmVhcmxhbmdgIHwgaW52ZXJzZS1wcmVmaXgtZXhhY3QtbWF0Y2ggfCBJdGVtcyB0aGF0IGRvIG5vdCBzdGFydCB3aXRoIGBlYXJsYW5nYCB8XG4gKiB8IGAuanMkYCAgICAgIHwgc3VmZml4LWV4YWN0LW1hdGNoICAgICAgICAgfCBJdGVtcyB0aGF0IGVuZCB3aXRoIGAuanNgICAgICAgICAgICAgICB8XG4gKiB8IGAhLmdvJGAgICAgIHwgaW52ZXJzZS1zdWZmaXgtZXhhY3QtbWF0Y2ggfCBJdGVtcyB0aGF0IGRvIG5vdCBlbmQgd2l0aCBgLmdvYCAgICAgICB8XG4gKlxuICogQSBzaW5nbGUgcGlwZSBjaGFyYWN0ZXIgYWN0cyBhcyBhbiBPUiBvcGVyYXRvci4gRm9yIGV4YW1wbGUsIHRoZSBmb2xsb3dpbmdcbiAqIHF1ZXJ5IG1hdGNoZXMgZW50cmllcyB0aGF0IHN0YXJ0IHdpdGggYGNvcmVgIGFuZCBlbmQgd2l0aCBlaXRoZXJgZ29gLCBgcmJgLFxuICogb3JgcHlgLlxuICpcbiAqIGBgYFxuICogXmNvcmUgZ28kIHwgcmIkIHwgcHkkXG4gKiBgYGBcbiAqL1xuY2xhc3MgRXh0ZW5kZWRTZWFyY2gge1xuICBjb25zdHJ1Y3RvcihcbiAgICBwYXR0ZXJuLFxuICAgIHtcbiAgICAgIGlzQ2FzZVNlbnNpdGl2ZSA9IENvbmZpZy5pc0Nhc2VTZW5zaXRpdmUsXG4gICAgICBpZ25vcmVEaWFjcml0aWNzID0gQ29uZmlnLmlnbm9yZURpYWNyaXRpY3MsXG4gICAgICBpbmNsdWRlTWF0Y2hlcyA9IENvbmZpZy5pbmNsdWRlTWF0Y2hlcyxcbiAgICAgIG1pbk1hdGNoQ2hhckxlbmd0aCA9IENvbmZpZy5taW5NYXRjaENoYXJMZW5ndGgsXG4gICAgICBpZ25vcmVMb2NhdGlvbiA9IENvbmZpZy5pZ25vcmVMb2NhdGlvbixcbiAgICAgIGZpbmRBbGxNYXRjaGVzID0gQ29uZmlnLmZpbmRBbGxNYXRjaGVzLFxuICAgICAgbG9jYXRpb24gPSBDb25maWcubG9jYXRpb24sXG4gICAgICB0aHJlc2hvbGQgPSBDb25maWcudGhyZXNob2xkLFxuICAgICAgZGlzdGFuY2UgPSBDb25maWcuZGlzdGFuY2VcbiAgICB9ID0ge31cbiAgKSB7XG4gICAgdGhpcy5xdWVyeSA9IG51bGw7XG4gICAgdGhpcy5vcHRpb25zID0ge1xuICAgICAgaXNDYXNlU2Vuc2l0aXZlLFxuICAgICAgaWdub3JlRGlhY3JpdGljcyxcbiAgICAgIGluY2x1ZGVNYXRjaGVzLFxuICAgICAgbWluTWF0Y2hDaGFyTGVuZ3RoLFxuICAgICAgZmluZEFsbE1hdGNoZXMsXG4gICAgICBpZ25vcmVMb2NhdGlvbixcbiAgICAgIGxvY2F0aW9uLFxuICAgICAgdGhyZXNob2xkLFxuICAgICAgZGlzdGFuY2VcbiAgICB9O1xuXG4gICAgcGF0dGVybiA9IGlzQ2FzZVNlbnNpdGl2ZSA/IHBhdHRlcm4gOiBwYXR0ZXJuLnRvTG93ZXJDYXNlKCk7XG4gICAgcGF0dGVybiA9IGlnbm9yZURpYWNyaXRpY3MgPyBzdHJpcERpYWNyaXRpY3MocGF0dGVybikgOiBwYXR0ZXJuO1xuICAgIHRoaXMucGF0dGVybiA9IHBhdHRlcm47XG4gICAgdGhpcy5xdWVyeSA9IHBhcnNlUXVlcnkodGhpcy5wYXR0ZXJuLCB0aGlzLm9wdGlvbnMpO1xuICB9XG5cbiAgc3RhdGljIGNvbmRpdGlvbihfLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG9wdGlvbnMudXNlRXh0ZW5kZWRTZWFyY2hcbiAgfVxuXG4gIHNlYXJjaEluKHRleHQpIHtcbiAgICBjb25zdCBxdWVyeSA9IHRoaXMucXVlcnk7XG5cbiAgICBpZiAoIXF1ZXJ5KSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpc01hdGNoOiBmYWxzZSxcbiAgICAgICAgc2NvcmU6IDFcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCB7IGluY2x1ZGVNYXRjaGVzLCBpc0Nhc2VTZW5zaXRpdmUsIGlnbm9yZURpYWNyaXRpY3MgfSA9IHRoaXMub3B0aW9ucztcblxuICAgIHRleHQgPSBpc0Nhc2VTZW5zaXRpdmUgPyB0ZXh0IDogdGV4dC50b0xvd2VyQ2FzZSgpO1xuICAgIHRleHQgPSBpZ25vcmVEaWFjcml0aWNzID8gc3RyaXBEaWFjcml0aWNzKHRleHQpIDogdGV4dDtcblxuICAgIGxldCBudW1NYXRjaGVzID0gMDtcbiAgICBsZXQgYWxsSW5kaWNlcyA9IFtdO1xuICAgIGxldCB0b3RhbFNjb3JlID0gMDtcblxuICAgIC8vIE9Sc1xuICAgIGZvciAobGV0IGkgPSAwLCBxTGVuID0gcXVlcnkubGVuZ3RoOyBpIDwgcUxlbjsgaSArPSAxKSB7XG4gICAgICBjb25zdCBzZWFyY2hlcnMgPSBxdWVyeVtpXTtcblxuICAgICAgLy8gUmVzZXQgaW5kaWNlc1xuICAgICAgYWxsSW5kaWNlcy5sZW5ndGggPSAwO1xuICAgICAgbnVtTWF0Y2hlcyA9IDA7XG5cbiAgICAgIC8vIEFORHNcbiAgICAgIGZvciAobGV0IGogPSAwLCBwTGVuID0gc2VhcmNoZXJzLmxlbmd0aDsgaiA8IHBMZW47IGogKz0gMSkge1xuICAgICAgICBjb25zdCBzZWFyY2hlciA9IHNlYXJjaGVyc1tqXTtcbiAgICAgICAgY29uc3QgeyBpc01hdGNoLCBpbmRpY2VzLCBzY29yZSB9ID0gc2VhcmNoZXIuc2VhcmNoKHRleHQpO1xuXG4gICAgICAgIGlmIChpc01hdGNoKSB7XG4gICAgICAgICAgbnVtTWF0Y2hlcyArPSAxO1xuICAgICAgICAgIHRvdGFsU2NvcmUgKz0gc2NvcmU7XG4gICAgICAgICAgaWYgKGluY2x1ZGVNYXRjaGVzKSB7XG4gICAgICAgICAgICBjb25zdCB0eXBlID0gc2VhcmNoZXIuY29uc3RydWN0b3IudHlwZTtcbiAgICAgICAgICAgIGlmIChNdWx0aU1hdGNoU2V0Lmhhcyh0eXBlKSkge1xuICAgICAgICAgICAgICBhbGxJbmRpY2VzID0gWy4uLmFsbEluZGljZXMsIC4uLmluZGljZXNdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYWxsSW5kaWNlcy5wdXNoKGluZGljZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0b3RhbFNjb3JlID0gMDtcbiAgICAgICAgICBudW1NYXRjaGVzID0gMDtcbiAgICAgICAgICBhbGxJbmRpY2VzLmxlbmd0aCA9IDA7XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBPUiBjb25kaXRpb24sIHNvIGlmIFRSVUUsIHJldHVyblxuICAgICAgaWYgKG51bU1hdGNoZXMpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IHtcbiAgICAgICAgICBpc01hdGNoOiB0cnVlLFxuICAgICAgICAgIHNjb3JlOiB0b3RhbFNjb3JlIC8gbnVtTWF0Y2hlc1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChpbmNsdWRlTWF0Y2hlcykge1xuICAgICAgICAgIHJlc3VsdC5pbmRpY2VzID0gYWxsSW5kaWNlcztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBOb3RoaW5nIHdhcyBtYXRjaGVkXG4gICAgcmV0dXJuIHtcbiAgICAgIGlzTWF0Y2g6IGZhbHNlLFxuICAgICAgc2NvcmU6IDFcbiAgICB9XG4gIH1cbn1cblxuY29uc3QgcmVnaXN0ZXJlZFNlYXJjaGVycyA9IFtdO1xuXG5mdW5jdGlvbiByZWdpc3RlciguLi5hcmdzKSB7XG4gIHJlZ2lzdGVyZWRTZWFyY2hlcnMucHVzaCguLi5hcmdzKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlU2VhcmNoZXIocGF0dGVybiwgb3B0aW9ucykge1xuICBmb3IgKGxldCBpID0gMCwgbGVuID0gcmVnaXN0ZXJlZFNlYXJjaGVycy5sZW5ndGg7IGkgPCBsZW47IGkgKz0gMSkge1xuICAgIGxldCBzZWFyY2hlckNsYXNzID0gcmVnaXN0ZXJlZFNlYXJjaGVyc1tpXTtcbiAgICBpZiAoc2VhcmNoZXJDbGFzcy5jb25kaXRpb24ocGF0dGVybiwgb3B0aW9ucykpIHtcbiAgICAgIHJldHVybiBuZXcgc2VhcmNoZXJDbGFzcyhwYXR0ZXJuLCBvcHRpb25zKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXcgQml0YXBTZWFyY2gocGF0dGVybiwgb3B0aW9ucylcbn1cblxuY29uc3QgTG9naWNhbE9wZXJhdG9yID0ge1xuICBBTkQ6ICckYW5kJyxcbiAgT1I6ICckb3InXG59O1xuXG5jb25zdCBLZXlUeXBlID0ge1xuICBQQVRIOiAnJHBhdGgnLFxuICBQQVRURVJOOiAnJHZhbCdcbn07XG5cbmNvbnN0IGlzRXhwcmVzc2lvbiA9IChxdWVyeSkgPT5cbiAgISEocXVlcnlbTG9naWNhbE9wZXJhdG9yLkFORF0gfHwgcXVlcnlbTG9naWNhbE9wZXJhdG9yLk9SXSk7XG5cbmNvbnN0IGlzUGF0aCA9IChxdWVyeSkgPT4gISFxdWVyeVtLZXlUeXBlLlBBVEhdO1xuXG5jb25zdCBpc0xlYWYgPSAocXVlcnkpID0+XG4gICFpc0FycmF5KHF1ZXJ5KSAmJiBpc09iamVjdChxdWVyeSkgJiYgIWlzRXhwcmVzc2lvbihxdWVyeSk7XG5cbmNvbnN0IGNvbnZlcnRUb0V4cGxpY2l0ID0gKHF1ZXJ5KSA9PiAoe1xuICBbTG9naWNhbE9wZXJhdG9yLkFORF06IE9iamVjdC5rZXlzKHF1ZXJ5KS5tYXAoKGtleSkgPT4gKHtcbiAgICBba2V5XTogcXVlcnlba2V5XVxuICB9KSlcbn0pO1xuXG4vLyBXaGVuIGBhdXRvYCBpcyBgdHJ1ZWAsIHRoZSBwYXJzZSBmdW5jdGlvbiB3aWxsIGluZmVyIGFuZCBpbml0aWFsaXplIGFuZCBhZGRcbi8vIHRoZSBhcHByb3ByaWF0ZSBgU2VhcmNoZXJgIGluc3RhbmNlXG5mdW5jdGlvbiBwYXJzZShxdWVyeSwgb3B0aW9ucywgeyBhdXRvID0gdHJ1ZSB9ID0ge30pIHtcbiAgY29uc3QgbmV4dCA9IChxdWVyeSkgPT4ge1xuICAgIGxldCBrZXlzID0gT2JqZWN0LmtleXMocXVlcnkpO1xuXG4gICAgY29uc3QgaXNRdWVyeVBhdGggPSBpc1BhdGgocXVlcnkpO1xuXG4gICAgaWYgKCFpc1F1ZXJ5UGF0aCAmJiBrZXlzLmxlbmd0aCA+IDEgJiYgIWlzRXhwcmVzc2lvbihxdWVyeSkpIHtcbiAgICAgIHJldHVybiBuZXh0KGNvbnZlcnRUb0V4cGxpY2l0KHF1ZXJ5KSlcbiAgICB9XG5cbiAgICBpZiAoaXNMZWFmKHF1ZXJ5KSkge1xuICAgICAgY29uc3Qga2V5ID0gaXNRdWVyeVBhdGggPyBxdWVyeVtLZXlUeXBlLlBBVEhdIDoga2V5c1swXTtcblxuICAgICAgY29uc3QgcGF0dGVybiA9IGlzUXVlcnlQYXRoID8gcXVlcnlbS2V5VHlwZS5QQVRURVJOXSA6IHF1ZXJ5W2tleV07XG5cbiAgICAgIGlmICghaXNTdHJpbmcocGF0dGVybikpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKExPR0lDQUxfU0VBUkNIX0lOVkFMSURfUVVFUllfRk9SX0tFWShrZXkpKVxuICAgICAgfVxuXG4gICAgICBjb25zdCBvYmogPSB7XG4gICAgICAgIGtleUlkOiBjcmVhdGVLZXlJZChrZXkpLFxuICAgICAgICBwYXR0ZXJuXG4gICAgICB9O1xuXG4gICAgICBpZiAoYXV0bykge1xuICAgICAgICBvYmouc2VhcmNoZXIgPSBjcmVhdGVTZWFyY2hlcihwYXR0ZXJuLCBvcHRpb25zKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG9ialxuICAgIH1cblxuICAgIGxldCBub2RlID0ge1xuICAgICAgY2hpbGRyZW46IFtdLFxuICAgICAgb3BlcmF0b3I6IGtleXNbMF1cbiAgICB9O1xuXG4gICAga2V5cy5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gcXVlcnlba2V5XTtcblxuICAgICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIHZhbHVlLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgICBub2RlLmNoaWxkcmVuLnB1c2gobmV4dChpdGVtKSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIG5vZGVcbiAgfTtcblxuICBpZiAoIWlzRXhwcmVzc2lvbihxdWVyeSkpIHtcbiAgICBxdWVyeSA9IGNvbnZlcnRUb0V4cGxpY2l0KHF1ZXJ5KTtcbiAgfVxuXG4gIHJldHVybiBuZXh0KHF1ZXJ5KVxufVxuXG4vLyBQcmFjdGljYWwgc2NvcmluZyBmdW5jdGlvblxuZnVuY3Rpb24gY29tcHV0ZVNjb3JlKFxuICByZXN1bHRzLFxuICB7IGlnbm9yZUZpZWxkTm9ybSA9IENvbmZpZy5pZ25vcmVGaWVsZE5vcm0gfVxuKSB7XG4gIHJlc3VsdHMuZm9yRWFjaCgocmVzdWx0KSA9PiB7XG4gICAgbGV0IHRvdGFsU2NvcmUgPSAxO1xuXG4gICAgcmVzdWx0Lm1hdGNoZXMuZm9yRWFjaCgoeyBrZXksIG5vcm0sIHNjb3JlIH0pID0+IHtcbiAgICAgIGNvbnN0IHdlaWdodCA9IGtleSA/IGtleS53ZWlnaHQgOiBudWxsO1xuXG4gICAgICB0b3RhbFNjb3JlICo9IE1hdGgucG93KFxuICAgICAgICBzY29yZSA9PT0gMCAmJiB3ZWlnaHQgPyBOdW1iZXIuRVBTSUxPTiA6IHNjb3JlLFxuICAgICAgICAod2VpZ2h0IHx8IDEpICogKGlnbm9yZUZpZWxkTm9ybSA/IDEgOiBub3JtKVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIHJlc3VsdC5zY29yZSA9IHRvdGFsU2NvcmU7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiB0cmFuc2Zvcm1NYXRjaGVzKHJlc3VsdCwgZGF0YSkge1xuICBjb25zdCBtYXRjaGVzID0gcmVzdWx0Lm1hdGNoZXM7XG4gIGRhdGEubWF0Y2hlcyA9IFtdO1xuXG4gIGlmICghaXNEZWZpbmVkKG1hdGNoZXMpKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICBtYXRjaGVzLmZvckVhY2goKG1hdGNoKSA9PiB7XG4gICAgaWYgKCFpc0RlZmluZWQobWF0Y2guaW5kaWNlcykgfHwgIW1hdGNoLmluZGljZXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCB7IGluZGljZXMsIHZhbHVlIH0gPSBtYXRjaDtcblxuICAgIGxldCBvYmogPSB7XG4gICAgICBpbmRpY2VzLFxuICAgICAgdmFsdWVcbiAgICB9O1xuXG4gICAgaWYgKG1hdGNoLmtleSkge1xuICAgICAgb2JqLmtleSA9IG1hdGNoLmtleS5zcmM7XG4gICAgfVxuXG4gICAgaWYgKG1hdGNoLmlkeCA+IC0xKSB7XG4gICAgICBvYmoucmVmSW5kZXggPSBtYXRjaC5pZHg7XG4gICAgfVxuXG4gICAgZGF0YS5tYXRjaGVzLnB1c2gob2JqKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHRyYW5zZm9ybVNjb3JlKHJlc3VsdCwgZGF0YSkge1xuICBkYXRhLnNjb3JlID0gcmVzdWx0LnNjb3JlO1xufVxuXG5mdW5jdGlvbiBmb3JtYXQoXG4gIHJlc3VsdHMsXG4gIGRvY3MsXG4gIHtcbiAgICBpbmNsdWRlTWF0Y2hlcyA9IENvbmZpZy5pbmNsdWRlTWF0Y2hlcyxcbiAgICBpbmNsdWRlU2NvcmUgPSBDb25maWcuaW5jbHVkZVNjb3JlXG4gIH0gPSB7fVxuKSB7XG4gIGNvbnN0IHRyYW5zZm9ybWVycyA9IFtdO1xuXG4gIGlmIChpbmNsdWRlTWF0Y2hlcykgdHJhbnNmb3JtZXJzLnB1c2godHJhbnNmb3JtTWF0Y2hlcyk7XG4gIGlmIChpbmNsdWRlU2NvcmUpIHRyYW5zZm9ybWVycy5wdXNoKHRyYW5zZm9ybVNjb3JlKTtcblxuICByZXR1cm4gcmVzdWx0cy5tYXAoKHJlc3VsdCkgPT4ge1xuICAgIGNvbnN0IHsgaWR4IH0gPSByZXN1bHQ7XG5cbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgaXRlbTogZG9jc1tpZHhdLFxuICAgICAgcmVmSW5kZXg6IGlkeFxuICAgIH07XG5cbiAgICBpZiAodHJhbnNmb3JtZXJzLmxlbmd0aCkge1xuICAgICAgdHJhbnNmb3JtZXJzLmZvckVhY2goKHRyYW5zZm9ybWVyKSA9PiB7XG4gICAgICAgIHRyYW5zZm9ybWVyKHJlc3VsdCwgZGF0YSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGF0YVxuICB9KVxufVxuXG5jbGFzcyBGdXNlIHtcbiAgY29uc3RydWN0b3IoZG9jcywgb3B0aW9ucyA9IHt9LCBpbmRleCkge1xuICAgIHRoaXMub3B0aW9ucyA9IHsgLi4uQ29uZmlnLCAuLi5vcHRpb25zIH07XG5cbiAgICBpZiAoXG4gICAgICB0aGlzLm9wdGlvbnMudXNlRXh0ZW5kZWRTZWFyY2ggJiZcbiAgICAgICF0cnVlXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoRVhURU5ERURfU0VBUkNIX1VOQVZBSUxBQkxFKVxuICAgIH1cblxuICAgIHRoaXMuX2tleVN0b3JlID0gbmV3IEtleVN0b3JlKHRoaXMub3B0aW9ucy5rZXlzKTtcblxuICAgIHRoaXMuc2V0Q29sbGVjdGlvbihkb2NzLCBpbmRleCk7XG4gIH1cblxuICBzZXRDb2xsZWN0aW9uKGRvY3MsIGluZGV4KSB7XG4gICAgdGhpcy5fZG9jcyA9IGRvY3M7XG5cbiAgICBpZiAoaW5kZXggJiYgIShpbmRleCBpbnN0YW5jZW9mIEZ1c2VJbmRleCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihJTkNPUlJFQ1RfSU5ERVhfVFlQRSlcbiAgICB9XG5cbiAgICB0aGlzLl9teUluZGV4ID1cbiAgICAgIGluZGV4IHx8XG4gICAgICBjcmVhdGVJbmRleCh0aGlzLm9wdGlvbnMua2V5cywgdGhpcy5fZG9jcywge1xuICAgICAgICBnZXRGbjogdGhpcy5vcHRpb25zLmdldEZuLFxuICAgICAgICBmaWVsZE5vcm1XZWlnaHQ6IHRoaXMub3B0aW9ucy5maWVsZE5vcm1XZWlnaHRcbiAgICAgIH0pO1xuICB9XG5cbiAgYWRkKGRvYykge1xuICAgIGlmICghaXNEZWZpbmVkKGRvYykpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHRoaXMuX2RvY3MucHVzaChkb2MpO1xuICAgIHRoaXMuX215SW5kZXguYWRkKGRvYyk7XG4gIH1cblxuICByZW1vdmUocHJlZGljYXRlID0gKC8qIGRvYywgaWR4ICovKSA9PiBmYWxzZSkge1xuICAgIGNvbnN0IHJlc3VsdHMgPSBbXTtcblxuICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSB0aGlzLl9kb2NzLmxlbmd0aDsgaSA8IGxlbjsgaSArPSAxKSB7XG4gICAgICBjb25zdCBkb2MgPSB0aGlzLl9kb2NzW2ldO1xuICAgICAgaWYgKHByZWRpY2F0ZShkb2MsIGkpKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlQXQoaSk7XG4gICAgICAgIGkgLT0gMTtcbiAgICAgICAgbGVuIC09IDE7XG5cbiAgICAgICAgcmVzdWx0cy5wdXNoKGRvYyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdHNcbiAgfVxuXG4gIHJlbW92ZUF0KGlkeCkge1xuICAgIHRoaXMuX2RvY3Muc3BsaWNlKGlkeCwgMSk7XG4gICAgdGhpcy5fbXlJbmRleC5yZW1vdmVBdChpZHgpO1xuICB9XG5cbiAgZ2V0SW5kZXgoKSB7XG4gICAgcmV0dXJuIHRoaXMuX215SW5kZXhcbiAgfVxuXG4gIHNlYXJjaChxdWVyeSwgeyBsaW1pdCA9IC0xIH0gPSB7fSkge1xuICAgIGNvbnN0IHtcbiAgICAgIGluY2x1ZGVNYXRjaGVzLFxuICAgICAgaW5jbHVkZVNjb3JlLFxuICAgICAgc2hvdWxkU29ydCxcbiAgICAgIHNvcnRGbixcbiAgICAgIGlnbm9yZUZpZWxkTm9ybVxuICAgIH0gPSB0aGlzLm9wdGlvbnM7XG5cbiAgICBsZXQgcmVzdWx0cyA9IGlzU3RyaW5nKHF1ZXJ5KVxuICAgICAgPyBpc1N0cmluZyh0aGlzLl9kb2NzWzBdKVxuICAgICAgICA/IHRoaXMuX3NlYXJjaFN0cmluZ0xpc3QocXVlcnkpXG4gICAgICAgIDogdGhpcy5fc2VhcmNoT2JqZWN0TGlzdChxdWVyeSlcbiAgICAgIDogdGhpcy5fc2VhcmNoTG9naWNhbChxdWVyeSk7XG5cbiAgICBjb21wdXRlU2NvcmUocmVzdWx0cywgeyBpZ25vcmVGaWVsZE5vcm0gfSk7XG5cbiAgICBpZiAoc2hvdWxkU29ydCkge1xuICAgICAgcmVzdWx0cy5zb3J0KHNvcnRGbik7XG4gICAgfVxuXG4gICAgaWYgKGlzTnVtYmVyKGxpbWl0KSAmJiBsaW1pdCA+IC0xKSB7XG4gICAgICByZXN1bHRzID0gcmVzdWx0cy5zbGljZSgwLCBsaW1pdCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZvcm1hdChyZXN1bHRzLCB0aGlzLl9kb2NzLCB7XG4gICAgICBpbmNsdWRlTWF0Y2hlcyxcbiAgICAgIGluY2x1ZGVTY29yZVxuICAgIH0pXG4gIH1cblxuICBfc2VhcmNoU3RyaW5nTGlzdChxdWVyeSkge1xuICAgIGNvbnN0IHNlYXJjaGVyID0gY3JlYXRlU2VhcmNoZXIocXVlcnksIHRoaXMub3B0aW9ucyk7XG4gICAgY29uc3QgeyByZWNvcmRzIH0gPSB0aGlzLl9teUluZGV4O1xuICAgIGNvbnN0IHJlc3VsdHMgPSBbXTtcblxuICAgIC8vIEl0ZXJhdGUgb3ZlciBldmVyeSBzdHJpbmcgaW4gdGhlIGluZGV4XG4gICAgcmVjb3Jkcy5mb3JFYWNoKCh7IHY6IHRleHQsIGk6IGlkeCwgbjogbm9ybSB9KSA9PiB7XG4gICAgICBpZiAoIWlzRGVmaW5lZCh0ZXh0KSkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgY29uc3QgeyBpc01hdGNoLCBzY29yZSwgaW5kaWNlcyB9ID0gc2VhcmNoZXIuc2VhcmNoSW4odGV4dCk7XG5cbiAgICAgIGlmIChpc01hdGNoKSB7XG4gICAgICAgIHJlc3VsdHMucHVzaCh7XG4gICAgICAgICAgaXRlbTogdGV4dCxcbiAgICAgICAgICBpZHgsXG4gICAgICAgICAgbWF0Y2hlczogW3sgc2NvcmUsIHZhbHVlOiB0ZXh0LCBub3JtLCBpbmRpY2VzIH1dXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHJlc3VsdHNcbiAgfVxuXG4gIF9zZWFyY2hMb2dpY2FsKHF1ZXJ5KSB7XG5cbiAgICBjb25zdCBleHByZXNzaW9uID0gcGFyc2UocXVlcnksIHRoaXMub3B0aW9ucyk7XG5cbiAgICBjb25zdCBldmFsdWF0ZSA9IChub2RlLCBpdGVtLCBpZHgpID0+IHtcbiAgICAgIGlmICghbm9kZS5jaGlsZHJlbikge1xuICAgICAgICBjb25zdCB7IGtleUlkLCBzZWFyY2hlciB9ID0gbm9kZTtcblxuICAgICAgICBjb25zdCBtYXRjaGVzID0gdGhpcy5fZmluZE1hdGNoZXMoe1xuICAgICAgICAgIGtleTogdGhpcy5fa2V5U3RvcmUuZ2V0KGtleUlkKSxcbiAgICAgICAgICB2YWx1ZTogdGhpcy5fbXlJbmRleC5nZXRWYWx1ZUZvckl0ZW1BdEtleUlkKGl0ZW0sIGtleUlkKSxcbiAgICAgICAgICBzZWFyY2hlclxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAobWF0Y2hlcyAmJiBtYXRjaGVzLmxlbmd0aCkge1xuICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGlkeCxcbiAgICAgICAgICAgICAgaXRlbSxcbiAgICAgICAgICAgICAgbWF0Y2hlc1xuICAgICAgICAgICAgfVxuICAgICAgICAgIF1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBbXVxuICAgICAgfVxuXG4gICAgICBjb25zdCByZXMgPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBub2RlLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGxlbjsgaSArPSAxKSB7XG4gICAgICAgIGNvbnN0IGNoaWxkID0gbm9kZS5jaGlsZHJlbltpXTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gZXZhbHVhdGUoY2hpbGQsIGl0ZW0sIGlkeCk7XG4gICAgICAgIGlmIChyZXN1bHQubGVuZ3RoKSB7XG4gICAgICAgICAgcmVzLnB1c2goLi4ucmVzdWx0KTtcbiAgICAgICAgfSBlbHNlIGlmIChub2RlLm9wZXJhdG9yID09PSBMb2dpY2FsT3BlcmF0b3IuQU5EKSB7XG4gICAgICAgICAgcmV0dXJuIFtdXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXNcbiAgICB9O1xuXG4gICAgY29uc3QgcmVjb3JkcyA9IHRoaXMuX215SW5kZXgucmVjb3JkcztcbiAgICBjb25zdCByZXN1bHRNYXAgPSB7fTtcbiAgICBjb25zdCByZXN1bHRzID0gW107XG5cbiAgICByZWNvcmRzLmZvckVhY2goKHsgJDogaXRlbSwgaTogaWR4IH0pID0+IHtcbiAgICAgIGlmIChpc0RlZmluZWQoaXRlbSkpIHtcbiAgICAgICAgbGV0IGV4cFJlc3VsdHMgPSBldmFsdWF0ZShleHByZXNzaW9uLCBpdGVtLCBpZHgpO1xuXG4gICAgICAgIGlmIChleHBSZXN1bHRzLmxlbmd0aCkge1xuICAgICAgICAgIC8vIERlZHVwZSB3aGVuIGFkZGluZ1xuICAgICAgICAgIGlmICghcmVzdWx0TWFwW2lkeF0pIHtcbiAgICAgICAgICAgIHJlc3VsdE1hcFtpZHhdID0geyBpZHgsIGl0ZW0sIG1hdGNoZXM6IFtdIH07XG4gICAgICAgICAgICByZXN1bHRzLnB1c2gocmVzdWx0TWFwW2lkeF0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBleHBSZXN1bHRzLmZvckVhY2goKHsgbWF0Y2hlcyB9KSA9PiB7XG4gICAgICAgICAgICByZXN1bHRNYXBbaWR4XS5tYXRjaGVzLnB1c2goLi4ubWF0Y2hlcyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiByZXN1bHRzXG4gIH1cblxuICBfc2VhcmNoT2JqZWN0TGlzdChxdWVyeSkge1xuICAgIGNvbnN0IHNlYXJjaGVyID0gY3JlYXRlU2VhcmNoZXIocXVlcnksIHRoaXMub3B0aW9ucyk7XG4gICAgY29uc3QgeyBrZXlzLCByZWNvcmRzIH0gPSB0aGlzLl9teUluZGV4O1xuICAgIGNvbnN0IHJlc3VsdHMgPSBbXTtcblxuICAgIC8vIExpc3QgaXMgQXJyYXk8T2JqZWN0PlxuICAgIHJlY29yZHMuZm9yRWFjaCgoeyAkOiBpdGVtLCBpOiBpZHggfSkgPT4ge1xuICAgICAgaWYgKCFpc0RlZmluZWQoaXRlbSkpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGxldCBtYXRjaGVzID0gW107XG5cbiAgICAgIC8vIEl0ZXJhdGUgb3ZlciBldmVyeSBrZXkgKGkuZSwgcGF0aCksIGFuZCBmZXRjaCB0aGUgdmFsdWUgYXQgdGhhdCBrZXlcbiAgICAgIGtleXMuZm9yRWFjaCgoa2V5LCBrZXlJbmRleCkgPT4ge1xuICAgICAgICBtYXRjaGVzLnB1c2goXG4gICAgICAgICAgLi4udGhpcy5fZmluZE1hdGNoZXMoe1xuICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgdmFsdWU6IGl0ZW1ba2V5SW5kZXhdLFxuICAgICAgICAgICAgc2VhcmNoZXJcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChtYXRjaGVzLmxlbmd0aCkge1xuICAgICAgICByZXN1bHRzLnB1c2goe1xuICAgICAgICAgIGlkeCxcbiAgICAgICAgICBpdGVtLFxuICAgICAgICAgIG1hdGNoZXNcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gcmVzdWx0c1xuICB9XG4gIF9maW5kTWF0Y2hlcyh7IGtleSwgdmFsdWUsIHNlYXJjaGVyIH0pIHtcbiAgICBpZiAoIWlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBbXVxuICAgIH1cblxuICAgIGxldCBtYXRjaGVzID0gW107XG5cbiAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgIHZhbHVlLmZvckVhY2goKHsgdjogdGV4dCwgaTogaWR4LCBuOiBub3JtIH0pID0+IHtcbiAgICAgICAgaWYgKCFpc0RlZmluZWQodGV4dCkpIHtcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgaXNNYXRjaCwgc2NvcmUsIGluZGljZXMgfSA9IHNlYXJjaGVyLnNlYXJjaEluKHRleHQpO1xuXG4gICAgICAgIGlmIChpc01hdGNoKSB7XG4gICAgICAgICAgbWF0Y2hlcy5wdXNoKHtcbiAgICAgICAgICAgIHNjb3JlLFxuICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgdmFsdWU6IHRleHQsXG4gICAgICAgICAgICBpZHgsXG4gICAgICAgICAgICBub3JtLFxuICAgICAgICAgICAgaW5kaWNlc1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgeyB2OiB0ZXh0LCBuOiBub3JtIH0gPSB2YWx1ZTtcblxuICAgICAgY29uc3QgeyBpc01hdGNoLCBzY29yZSwgaW5kaWNlcyB9ID0gc2VhcmNoZXIuc2VhcmNoSW4odGV4dCk7XG5cbiAgICAgIGlmIChpc01hdGNoKSB7XG4gICAgICAgIG1hdGNoZXMucHVzaCh7IHNjb3JlLCBrZXksIHZhbHVlOiB0ZXh0LCBub3JtLCBpbmRpY2VzIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBtYXRjaGVzXG4gIH1cbn1cblxuRnVzZS52ZXJzaW9uID0gJzcuMS4wJztcbkZ1c2UuY3JlYXRlSW5kZXggPSBjcmVhdGVJbmRleDtcbkZ1c2UucGFyc2VJbmRleCA9IHBhcnNlSW5kZXg7XG5GdXNlLmNvbmZpZyA9IENvbmZpZztcblxue1xuICBGdXNlLnBhcnNlUXVlcnkgPSBwYXJzZTtcbn1cblxue1xuICByZWdpc3RlcihFeHRlbmRlZFNlYXJjaCk7XG59XG5cbmV4cG9ydCB7IEZ1c2UgYXMgZGVmYXVsdCB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/fuse.js/dist/fuse.mjs\n\n}");

/***/ }),

/***/ "./src/dashboard/components/nativeFilters/utils.ts":
/*!*********************************************************!*\
  !*** ./src/dashboard/components/nativeFilters/utils.ts ***!
  \*********************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("{/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   findTabsWithChartsInScope: () => (/* binding */ findTabsWithChartsInScope),\n/* harmony export */   getExtraFormData: () => (/* binding */ getExtraFormData),\n/* harmony export */   getFilterValueForDisplay: () => (/* binding */ getFilterValueForDisplay),\n/* harmony export */   getFormData: () => (/* binding */ getFormData),\n/* harmony export */   mergeExtraFormData: () => (/* binding */ mergeExtraFormData),\n/* harmony export */   nativeFilterGate: () => (/* binding */ nativeFilterGate)\n/* harmony export */ });\n/* unused harmony exports isCrossFilter, parseFilterTarget, getFilterScope, aggregateFiltersForTarget, groupFiltersByTarget, buildFilterScopesFromFilters, getLayerSpecificExtraFormData */\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/translation/TranslatorSingleton.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/query/constants.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/chart/registries/ChartMetadataRegistrySingleton.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/chart/types/Base.ts\");\n/* harmony import */ var src_dashboard_util_extractUrlParams__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! src/dashboard/util/extractUrlParams */ \"./src/dashboard/util/extractUrlParams.ts\");\n/* harmony import */ var src_utils_types__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! src/utils/types */ \"./src/utils/types.ts\");\n/* harmony import */ var _util_componentTypes__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../util/componentTypes */ \"./src/dashboard/util/componentTypes.ts\");\n/* harmony import */ var _utils_getBootstrapData__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../utils/getBootstrapData */ \"./src/utils/getBootstrapData.ts\");\n/* provided dependency */ var __react_refresh_utils__ = __webpack_require__(/*! ./node_modules/@pmmmwh/react-refresh-webpack-plugin/lib/runtime/RefreshUtils.js */ \"./node_modules/@pmmmwh/react-refresh-webpack-plugin/lib/runtime/RefreshUtils.js\");\n/* provided dependency */ var __react_refresh_error_overlay__ = __webpack_require__(/*! ./node_modules/@pmmmwh/react-refresh-webpack-plugin/overlay/index.js */ \"./node_modules/@pmmmwh/react-refresh-webpack-plugin/overlay/index.js\");\n__webpack_require__.$Refresh$.runtime = __webpack_require__(/*! ./node_modules/react-refresh/runtime.js */ \"./node_modules/react-refresh/runtime.js\");\n\n/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */ function _extends() {\n    _extends = Object.assign || function(target) {\n        for(var i = 1; i < arguments.length; i++){\n            var source = arguments[i];\n            for(var key in source){\n                if (Object.prototype.hasOwnProperty.call(source, key)) {\n                    target[key] = source[key];\n                }\n            }\n        }\n        return target;\n    };\n    return _extends.apply(this, arguments);\n}\n\n\n\n\n\nconst getDefaultRowLimit = ()=>{\n    var _bootstrapData_common_conf, _bootstrapData_common;\n    const bootstrapData = (0,_utils_getBootstrapData__WEBPACK_IMPORTED_MODULE_7__[\"default\"])();\n    const nativeFilterDefaultRowLimit = bootstrapData == null ? void 0 : (_bootstrapData_common = bootstrapData.common) == null ? void 0 : (_bootstrapData_common_conf = _bootstrapData_common.conf) == null ? void 0 : _bootstrapData_common_conf.NATIVE_FILTER_DEFAULT_ROW_LIMIT;\n    return nativeFilterDefaultRowLimit || 1000;\n};\nconst getFormData = ({ datasetId, dependencies = {}, groupby, defaultDataMask, controlValues, filterType, sortMetric, adhoc_filters, time_range, granularity_sqla, type, dashboardId, id })=>{\n    var _defaultDataMask_filterState;\n    const otherProps = {};\n    if (datasetId) {\n        otherProps.datasource = `${datasetId}__table`;\n    }\n    if (groupby) {\n        otherProps.groupby = [\n            groupby\n        ];\n    }\n    if (sortMetric) {\n        otherProps.sortMetric = sortMetric;\n    }\n    return _extends({}, controlValues, otherProps, {\n        adhoc_filters: adhoc_filters != null ? adhoc_filters : [],\n        extra_filters: [],\n        extra_form_data: dependencies,\n        granularity_sqla,\n        metrics: [\n            'count'\n        ],\n        row_limit: getDefaultRowLimit(),\n        showSearch: true,\n        defaultValue: defaultDataMask == null ? void 0 : (_defaultDataMask_filterState = defaultDataMask.filterState) == null ? void 0 : _defaultDataMask_filterState.value,\n        time_range,\n        url_params: (0,src_dashboard_util_extractUrlParams__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('regular'),\n        inView: true,\n        viz_type: filterType,\n        type,\n        dashboardId,\n        native_filter_id: id\n    });\n};\nfunction mergeExtraFormData(originalExtra = {}, newExtra = {}) {\n    const mergedExtra = {};\n    _superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.EXTRA_FORM_DATA_APPEND_KEYS.forEach((key)=>{\n        const originalExtraData = originalExtra[key];\n        const newExtraData = newExtra[key];\n        const mergedValues = [\n            ...(0,src_utils_types__WEBPACK_IMPORTED_MODULE_5__.isIterable)(originalExtraData) ? originalExtraData : [],\n            ...(0,src_utils_types__WEBPACK_IMPORTED_MODULE_5__.isIterable)(newExtraData) ? newExtraData : []\n        ];\n        if (mergedValues.length) {\n            mergedExtra[key] = mergedValues;\n        }\n    });\n    _superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.EXTRA_FORM_DATA_OVERRIDE_KEYS.forEach((key)=>{\n        const originalValue = originalExtra[key];\n        if (originalValue !== undefined) {\n            mergedExtra[key] = originalValue;\n        }\n        const newValue = newExtra[key];\n        if (newValue !== undefined) {\n            mergedExtra[key] = newValue;\n        }\n    });\n    return mergedExtra;\n}\nfunction isCrossFilter(vizType) {\n    var _getChartMetadataRegistry_items_vizType_value_behaviors, _getChartMetadataRegistry_items_vizType;\n    // @ts-ignore need export from superset-ui `ItemWithValue`\n    return (_getChartMetadataRegistry_items_vizType = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_2__[\"default\"])().items[vizType]) == null ? void 0 : (_getChartMetadataRegistry_items_vizType_value_behaviors = _getChartMetadataRegistry_items_vizType.value.behaviors) == null ? void 0 : _getChartMetadataRegistry_items_vizType_value_behaviors.includes(_superset_ui_core__WEBPACK_IMPORTED_MODULE_3__.Behavior.InteractiveChart);\n}\nfunction getExtraFormData(dataMask, filterIdsAppliedOnChart) {\n    let extraFormData = {};\n    filterIdsAppliedOnChart.forEach((key)=>{\n        var _dataMask_key;\n        var _dataMask_key_extraFormData;\n        extraFormData = mergeExtraFormData(extraFormData, (_dataMask_key_extraFormData = (_dataMask_key = dataMask[key]) == null ? void 0 : _dataMask_key.extraFormData) != null ? _dataMask_key_extraFormData : {});\n    });\n    return extraFormData;\n}\nfunction nativeFilterGate(behaviors) {\n    return !behaviors.includes(_superset_ui_core__WEBPACK_IMPORTED_MODULE_3__.Behavior.NativeFilter) || behaviors.includes(_superset_ui_core__WEBPACK_IMPORTED_MODULE_3__.Behavior.InteractiveChart);\n}\nconst findTabsWithChartsInScope = (chartLayoutItems, chartsInScope)=>new Set(chartsInScope.map((chartId)=>{\n        var _chartLayoutItems_find_parents, _chartLayoutItems_find;\n        return (_chartLayoutItems_find = chartLayoutItems.find((item)=>{\n            var _item_meta;\n            return (item == null ? void 0 : (_item_meta = item.meta) == null ? void 0 : _item_meta.chartId) === chartId;\n        })) == null ? void 0 : (_chartLayoutItems_find_parents = _chartLayoutItems_find.parents) == null ? void 0 : _chartLayoutItems_find_parents.filter((parent)=>parent.startsWith(`${_util_componentTypes__WEBPACK_IMPORTED_MODULE_6__.TAB_TYPE}-`));\n    }).filter((id)=>id !== undefined).flat());\nconst getFilterValueForDisplay = (value)=>{\n    if (value === null || value === undefined) {\n        return '';\n    }\n    if (typeof value === 'string' || typeof value === 'number') {\n        return `${value}`;\n    }\n    if (Array.isArray(value)) {\n        return value.join(', ');\n    }\n    if (typeof value === 'object') {\n        return JSON.stringify(value);\n    }\n    return (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_0__.t)('Unknown value');\n};\n// Matches layer keys in format: 'chart-123-layer-456' where 123 is chartId and 456 is layerId\nconst LAYER_KEY_REGEX = /^chart-(\\d+)-layer-(\\d+)$/;\n// Matches chart keys in format: 'chart-123' where 123 is chartId\nconst CHART_KEY_REGEX = /^chart-(\\d+)$/;\nfunction parseFilterTarget(scopeKey) {\n    const layerMatch = scopeKey.match(LAYER_KEY_REGEX);\n    if (layerMatch) {\n        return {\n            type: 'LAYER',\n            chartId: layerMatch[1],\n            layerId: layerMatch[2]\n        };\n    }\n    const chartMatch = scopeKey.match(CHART_KEY_REGEX);\n    if (chartMatch) {\n        return {\n            type: 'CHART',\n            chartId: chartMatch[1]\n        };\n    }\n    return null;\n}\nfunction getFilterScope(filterId, filterScopes) {\n    const scopeKeys = filterScopes[filterId] || [];\n    const targets = [];\n    scopeKeys.forEach((scopeKey)=>{\n        const target = parseFilterTarget(scopeKey);\n        if (target) {\n            targets.push(target);\n        } else {\n            console.warn(`Invalid filter scope key format: ${scopeKey}`);\n        }\n    });\n    return {\n        filterId,\n        targets\n    };\n}\nfunction aggregateFiltersForTarget(dataMask, filterIds) {\n    let aggregatedFormData = {};\n    filterIds.forEach((filterId)=>{\n        const filterData = dataMask[filterId];\n        if (filterData == null ? void 0 : filterData.extraFormData) {\n            aggregatedFormData = mergeExtraFormData(aggregatedFormData, filterData.extraFormData);\n        }\n    });\n    return aggregatedFormData;\n}\nfunction createTargetKey(target) {\n    if (target.type === 'LAYER') {\n        return `${target.chartId}-${target.layerId}`;\n    }\n    return target.chartId;\n}\nfunction groupFiltersByTarget(dataMask, filterScopes) {\n    const chartFilters = new Map();\n    const layerFilters = new Map();\n    Object.keys(dataMask).forEach((filterId)=>{\n        const scope = getFilterScope(filterId, filterScopes);\n        scope.targets.forEach((target)=>{\n            var _dataMask_filterId;\n            const filterData = ((_dataMask_filterId = dataMask[filterId]) == null ? void 0 : _dataMask_filterId.extraFormData) || {};\n            const targetKey = createTargetKey(target);\n            if (target.type === 'CHART') {\n                const existing = chartFilters.get(targetKey) || {};\n                chartFilters.set(targetKey, mergeExtraFormData(existing, filterData));\n            } else if (target.type === 'LAYER') {\n                const existing = layerFilters.get(targetKey) || {};\n                layerFilters.set(targetKey, mergeExtraFormData(existing, filterData));\n            }\n        });\n    });\n    return {\n        chartFilters,\n        layerFilters\n    };\n}\nfunction buildFilterScopesFromFilters(filters) {\n    const filterScopes = {};\n    Object.values(filters).forEach((filter)=>{\n        if (filter.chartsInScope) {\n            filterScopes[filter.id] = filter.chartsInScope.map((chartId)=>`chart-${chartId}`);\n        }\n    });\n    return filterScopes;\n}\nfunction getLayerSpecificExtraFormData(dataMask, filterIds, chartId, layerId) {\n    let extraFormData = {};\n    filterIds.forEach((filterId)=>{\n        const filterData = dataMask[filterId];\n        if (filterData == null ? void 0 : filterData.extraFormData) {\n            extraFormData = mergeExtraFormData(extraFormData, filterData.extraFormData);\n        }\n    });\n    if (layerId) {\n        const layerKey = `${chartId}-${layerId}`;\n        const layerFilterData = dataMask[layerKey];\n        if (layerFilterData == null ? void 0 : layerFilterData.extraFormData) {\n            extraFormData = mergeExtraFormData(extraFormData, layerFilterData.extraFormData);\n        }\n    }\n    return extraFormData;\n}\n\n\nconst $ReactRefreshModuleId$ = __webpack_require__.$Refresh$.moduleId;\nconst $ReactRefreshCurrentExports$ = __react_refresh_utils__.getModuleExports(\n\t$ReactRefreshModuleId$\n);\n\nfunction $ReactRefreshModuleRuntime$(exports) {\n\tif (true) {\n\t\tlet errorOverlay;\n\t\tif (typeof __react_refresh_error_overlay__ !== 'undefined') {\n\t\t\terrorOverlay = __react_refresh_error_overlay__;\n\t\t}\n\t\tlet testMode;\n\t\tif (typeof __react_refresh_test__ !== 'undefined') {\n\t\t\ttestMode = __react_refresh_test__;\n\t\t}\n\t\treturn __react_refresh_utils__.executeRuntime(\n\t\t\texports,\n\t\t\t$ReactRefreshModuleId$,\n\t\t\tmodule.hot,\n\t\t\terrorOverlay,\n\t\t\ttestMode\n\t\t);\n\t}\n}\n\nif (typeof Promise !== 'undefined' && $ReactRefreshCurrentExports$ instanceof Promise) {\n\t$ReactRefreshCurrentExports$.then($ReactRefreshModuleRuntime$);\n} else {\n\t$ReactRefreshModuleRuntime$($ReactRefreshCurrentExports$);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGFzaGJvYXJkL2NvbXBvbmVudHMvbmF0aXZlRmlsdGVycy91dGlscy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFpQkE7Ozs7Ozs7Ozs7Ozs7O0FBQ0E7QUFnQkE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBRkE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQThDQTtBQXhCQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFFQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFEQTtBQUNBO0FBR0E7QUFFQTtBQUlBO0FBQ0E7QUFHQTtBQUFBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBSUE7QUFFQTtBQU9BO0FBQUE7QUFDQTtBQUFBO0FBREE7QUFJQTtBQUlBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBT0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQU1BO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFFQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3VwZXJzZXQvLi9zcmMvZGFzaGJvYXJkL2NvbXBvbmVudHMvbmF0aXZlRmlsdGVycy91dGlscy50cz8wMDEyIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4gKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuICogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4gKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4gKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuICogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuICogdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCB7XG4gIEFkaG9jRmlsdGVyLFxuICBCZWhhdmlvcixcbiAgRGF0YU1hc2tTdGF0ZVdpdGhJZCxcbiAgRVhUUkFfRk9STV9EQVRBX0FQUEVORF9LRVlTLFxuICBFWFRSQV9GT1JNX0RBVEFfT1ZFUlJJREVfS0VZUyxcbiAgRXh0cmFGb3JtRGF0YSxcbiAgRmlsdGVyLFxuICBnZXRDaGFydE1ldGFkYXRhUmVnaXN0cnksXG4gIFF1ZXJ5Rm9ybURhdGEsXG4gIHQsXG4gIEV4dHJhRm9ybURhdGFPdmVycmlkZSxcbiAgVGltZUdyYW51bGFyaXR5LFxuICBFeHRyYUZvcm1EYXRhQXBwZW5kLFxufSBmcm9tICdAc3VwZXJzZXQtdWkvY29yZSc7XG5pbXBvcnQgeyBMYXlvdXRJdGVtIH0gZnJvbSAnc3JjL2Rhc2hib2FyZC90eXBlcyc7XG5pbXBvcnQgZXh0cmFjdFVybFBhcmFtcyBmcm9tICdzcmMvZGFzaGJvYXJkL3V0aWwvZXh0cmFjdFVybFBhcmFtcyc7XG5pbXBvcnQgeyBpc0l0ZXJhYmxlLCBPbmx5S2V5V2l0aFR5cGUgfSBmcm9tICdzcmMvdXRpbHMvdHlwZXMnO1xuaW1wb3J0IHsgVEFCX1RZUEUgfSBmcm9tICcuLi8uLi91dGlsL2NvbXBvbmVudFR5cGVzJztcbmltcG9ydCBnZXRCb290c3RyYXBEYXRhIGZyb20gJy4uLy4uLy4uL3V0aWxzL2dldEJvb3RzdHJhcERhdGEnO1xuXG5jb25zdCBnZXREZWZhdWx0Um93TGltaXQgPSAoKTogbnVtYmVyID0+IHtcbiAgY29uc3QgYm9vdHN0cmFwRGF0YSA9IGdldEJvb3RzdHJhcERhdGEoKTtcbiAgY29uc3QgbmF0aXZlRmlsdGVyRGVmYXVsdFJvd0xpbWl0ID1cbiAgICBib290c3RyYXBEYXRhPy5jb21tb24/LmNvbmY/Lk5BVElWRV9GSUxURVJfREVGQVVMVF9ST1dfTElNSVQ7XG4gIHJldHVybiBuYXRpdmVGaWx0ZXJEZWZhdWx0Um93TGltaXQgfHwgMTAwMDtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRGb3JtRGF0YSA9ICh7XG4gIGRhdGFzZXRJZCxcbiAgZGVwZW5kZW5jaWVzID0ge30sXG4gIGdyb3VwYnksXG4gIGRlZmF1bHREYXRhTWFzayxcbiAgY29udHJvbFZhbHVlcyxcbiAgZmlsdGVyVHlwZSxcbiAgc29ydE1ldHJpYyxcbiAgYWRob2NfZmlsdGVycyxcbiAgdGltZV9yYW5nZSxcbiAgZ3JhbnVsYXJpdHlfc3FsYSxcbiAgdHlwZSxcbiAgZGFzaGJvYXJkSWQsXG4gIGlkLFxufTogUGFydGlhbDxGaWx0ZXI+ICYge1xuICBkYXNoYm9hcmRJZDogbnVtYmVyO1xuICBkYXRhc2V0SWQ/OiBudW1iZXI7XG4gIGRlcGVuZGVuY2llcz86IG9iamVjdDtcbiAgZ3JvdXBieT86IHN0cmluZztcbiAgYWRob2NfZmlsdGVycz86IEFkaG9jRmlsdGVyW107XG4gIHRpbWVfcmFuZ2U/OiBzdHJpbmc7XG59KTogUGFydGlhbDxRdWVyeUZvcm1EYXRhPiA9PiB7XG4gIGNvbnN0IG90aGVyUHJvcHM6IHtcbiAgICBkYXRhc291cmNlPzogc3RyaW5nO1xuICAgIGdyb3VwYnk/OiBzdHJpbmdbXTtcbiAgICBzb3J0TWV0cmljPzogc3RyaW5nO1xuICB9ID0ge307XG4gIGlmIChkYXRhc2V0SWQpIHtcbiAgICBvdGhlclByb3BzLmRhdGFzb3VyY2UgPSBgJHtkYXRhc2V0SWR9X190YWJsZWA7XG4gIH1cbiAgaWYgKGdyb3VwYnkpIHtcbiAgICBvdGhlclByb3BzLmdyb3VwYnkgPSBbZ3JvdXBieV07XG4gIH1cbiAgaWYgKHNvcnRNZXRyaWMpIHtcbiAgICBvdGhlclByb3BzLnNvcnRNZXRyaWMgPSBzb3J0TWV0cmljO1xuICB9XG4gIHJldHVybiB7XG4gICAgLi4uY29udHJvbFZhbHVlcyxcbiAgICAuLi5vdGhlclByb3BzLFxuICAgIGFkaG9jX2ZpbHRlcnM6IGFkaG9jX2ZpbHRlcnMgPz8gW10sXG4gICAgZXh0cmFfZmlsdGVyczogW10sXG4gICAgZXh0cmFfZm9ybV9kYXRhOiBkZXBlbmRlbmNpZXMsXG4gICAgZ3JhbnVsYXJpdHlfc3FsYSxcbiAgICBtZXRyaWNzOiBbJ2NvdW50J10sXG4gICAgcm93X2xpbWl0OiBnZXREZWZhdWx0Um93TGltaXQoKSxcbiAgICBzaG93U2VhcmNoOiB0cnVlLFxuICAgIGRlZmF1bHRWYWx1ZTogZGVmYXVsdERhdGFNYXNrPy5maWx0ZXJTdGF0ZT8udmFsdWUsXG4gICAgdGltZV9yYW5nZSxcbiAgICB1cmxfcGFyYW1zOiBleHRyYWN0VXJsUGFyYW1zKCdyZWd1bGFyJyksXG4gICAgaW5WaWV3OiB0cnVlLFxuICAgIHZpel90eXBlOiBmaWx0ZXJUeXBlLFxuICAgIHR5cGUsXG4gICAgZGFzaGJvYXJkSWQsXG4gICAgbmF0aXZlX2ZpbHRlcl9pZDogaWQsXG4gIH07XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gbWVyZ2VFeHRyYUZvcm1EYXRhKFxuICBvcmlnaW5hbEV4dHJhOiBFeHRyYUZvcm1EYXRhID0ge30sXG4gIG5ld0V4dHJhOiBFeHRyYUZvcm1EYXRhID0ge30sXG4pOiBFeHRyYUZvcm1EYXRhIHtcbiAgY29uc3QgbWVyZ2VkRXh0cmE6IEV4dHJhRm9ybURhdGEgPSB7fTtcbiAgRVhUUkFfRk9STV9EQVRBX0FQUEVORF9LRVlTLmZvckVhY2goKGtleTogc3RyaW5nKSA9PiB7XG4gICAgY29uc3Qgb3JpZ2luYWxFeHRyYURhdGEgPSBvcmlnaW5hbEV4dHJhW2tleSBhcyBrZXlvZiBFeHRyYUZvcm1EYXRhQXBwZW5kXTtcbiAgICBjb25zdCBuZXdFeHRyYURhdGEgPSBuZXdFeHRyYVtrZXkgYXMga2V5b2YgRXh0cmFGb3JtRGF0YUFwcGVuZF07XG4gICAgY29uc3QgbWVyZ2VkVmFsdWVzID0gW1xuICAgICAgLi4uKGlzSXRlcmFibGUob3JpZ2luYWxFeHRyYURhdGEpID8gb3JpZ2luYWxFeHRyYURhdGEgOiBbXSksXG4gICAgICAuLi4oaXNJdGVyYWJsZShuZXdFeHRyYURhdGEpID8gbmV3RXh0cmFEYXRhIDogW10pLFxuICAgIF07XG4gICAgaWYgKG1lcmdlZFZhbHVlcy5sZW5ndGgpIHtcbiAgICAgIG1lcmdlZEV4dHJhW2tleSBhcyBPbmx5S2V5V2l0aFR5cGU8RXh0cmFGb3JtRGF0YSwgYW55W10+XSA9IG1lcmdlZFZhbHVlcztcbiAgICB9XG4gIH0pO1xuICBFWFRSQV9GT1JNX0RBVEFfT1ZFUlJJREVfS0VZUy5mb3JFYWNoKChrZXk6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IG9yaWdpbmFsVmFsdWUgPSBvcmlnaW5hbEV4dHJhW2tleSBhcyBrZXlvZiBFeHRyYUZvcm1EYXRhT3ZlcnJpZGVdO1xuICAgIGlmIChvcmlnaW5hbFZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIG1lcmdlZEV4dHJhW2tleSBhcyBPbmx5S2V5V2l0aFR5cGU8RXh0cmFGb3JtRGF0YSwgdHlwZW9mIG9yaWdpbmFsVmFsdWU+XSA9XG4gICAgICAgIG9yaWdpbmFsVmFsdWUgYXMgVGltZUdyYW51bGFyaXR5O1xuICAgIH1cbiAgICBjb25zdCBuZXdWYWx1ZSA9IG5ld0V4dHJhW2tleSBhcyBrZXlvZiBFeHRyYUZvcm1EYXRhT3ZlcnJpZGVdO1xuICAgIGlmIChuZXdWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBtZXJnZWRFeHRyYVtrZXkgYXMgT25seUtleVdpdGhUeXBlPEV4dHJhRm9ybURhdGEsIHR5cGVvZiBuZXdWYWx1ZT5dID1cbiAgICAgICAgbmV3VmFsdWUgYXMgVGltZUdyYW51bGFyaXR5O1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBtZXJnZWRFeHRyYTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzQ3Jvc3NGaWx0ZXIodml6VHlwZTogc3RyaW5nKSB7XG4gIC8vIEB0cy1pZ25vcmUgbmVlZCBleHBvcnQgZnJvbSBzdXBlcnNldC11aSBgSXRlbVdpdGhWYWx1ZWBcbiAgcmV0dXJuIGdldENoYXJ0TWV0YWRhdGFSZWdpc3RyeSgpLml0ZW1zW3ZpelR5cGVdPy52YWx1ZS5iZWhhdmlvcnM/LmluY2x1ZGVzKFxuICAgIEJlaGF2aW9yLkludGVyYWN0aXZlQ2hhcnQsXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRFeHRyYUZvcm1EYXRhKFxuICBkYXRhTWFzazogRGF0YU1hc2tTdGF0ZVdpdGhJZCxcbiAgZmlsdGVySWRzQXBwbGllZE9uQ2hhcnQ6IHN0cmluZ1tdLFxuKTogRXh0cmFGb3JtRGF0YSB7XG4gIGxldCBleHRyYUZvcm1EYXRhOiBFeHRyYUZvcm1EYXRhID0ge307XG4gIGZpbHRlcklkc0FwcGxpZWRPbkNoYXJ0LmZvckVhY2goa2V5ID0+IHtcbiAgICBleHRyYUZvcm1EYXRhID0gbWVyZ2VFeHRyYUZvcm1EYXRhKFxuICAgICAgZXh0cmFGb3JtRGF0YSxcbiAgICAgIGRhdGFNYXNrW2tleV0/LmV4dHJhRm9ybURhdGEgPz8ge30sXG4gICAgKTtcbiAgfSk7XG4gIHJldHVybiBleHRyYUZvcm1EYXRhO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbmF0aXZlRmlsdGVyR2F0ZShiZWhhdmlvcnM6IEJlaGF2aW9yW10pOiBib29sZWFuIHtcbiAgcmV0dXJuIChcbiAgICAhYmVoYXZpb3JzLmluY2x1ZGVzKEJlaGF2aW9yLk5hdGl2ZUZpbHRlcikgfHxcbiAgICBiZWhhdmlvcnMuaW5jbHVkZXMoQmVoYXZpb3IuSW50ZXJhY3RpdmVDaGFydClcbiAgKTtcbn1cblxuZXhwb3J0IGNvbnN0IGZpbmRUYWJzV2l0aENoYXJ0c0luU2NvcGUgPSAoXG4gIGNoYXJ0TGF5b3V0SXRlbXM6IExheW91dEl0ZW1bXSxcbiAgY2hhcnRzSW5TY29wZTogbnVtYmVyW10sXG4pID0+XG4gIG5ldyBTZXQ8c3RyaW5nPihcbiAgICBjaGFydHNJblNjb3BlXG4gICAgICAubWFwKGNoYXJ0SWQgPT5cbiAgICAgICAgY2hhcnRMYXlvdXRJdGVtc1xuICAgICAgICAgIC5maW5kKGl0ZW0gPT4gaXRlbT8ubWV0YT8uY2hhcnRJZCA9PT0gY2hhcnRJZClcbiAgICAgICAgICA/LnBhcmVudHM/LmZpbHRlcihwYXJlbnQgPT4gcGFyZW50LnN0YXJ0c1dpdGgoYCR7VEFCX1RZUEV9LWApKSxcbiAgICAgIClcbiAgICAgIC5maWx0ZXIoaWQgPT4gaWQgIT09IHVuZGVmaW5lZClcbiAgICAgIC5mbGF0KCkgYXMgc3RyaW5nW10sXG4gICk7XG5cbmV4cG9ydCBjb25zdCBnZXRGaWx0ZXJWYWx1ZUZvckRpc3BsYXkgPSAoXG4gIHZhbHVlPzogc3RyaW5nW10gfCBudWxsIHwgc3RyaW5nIHwgbnVtYmVyIHwgb2JqZWN0LFxuKTogc3RyaW5nID0+IHtcbiAgaWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgIHJldHVybiBgJHt2YWx1ZX1gO1xuICB9XG4gIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgIHJldHVybiB2YWx1ZS5qb2luKCcsICcpO1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcbiAgfVxuICByZXR1cm4gdCgnVW5rbm93biB2YWx1ZScpO1xufTtcblxuZXhwb3J0IGludGVyZmFjZSBGaWx0ZXJUYXJnZXQge1xuICB0eXBlOiAnQ0hBUlQnIHwgJ0xBWUVSJztcbiAgY2hhcnRJZDogc3RyaW5nO1xuICBsYXllcklkPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpbHRlclNjb3BlIHtcbiAgZmlsdGVySWQ6IHN0cmluZztcbiAgdGFyZ2V0czogRmlsdGVyVGFyZ2V0W107XG59XG5cbi8vIE1hdGNoZXMgbGF5ZXIga2V5cyBpbiBmb3JtYXQ6ICdjaGFydC0xMjMtbGF5ZXItNDU2JyB3aGVyZSAxMjMgaXMgY2hhcnRJZCBhbmQgNDU2IGlzIGxheWVySWRcbmNvbnN0IExBWUVSX0tFWV9SRUdFWCA9IC9eY2hhcnQtKFxcZCspLWxheWVyLShcXGQrKSQvO1xuLy8gTWF0Y2hlcyBjaGFydCBrZXlzIGluIGZvcm1hdDogJ2NoYXJ0LTEyMycgd2hlcmUgMTIzIGlzIGNoYXJ0SWRcbmNvbnN0IENIQVJUX0tFWV9SRUdFWCA9IC9eY2hhcnQtKFxcZCspJC87XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUZpbHRlclRhcmdldChzY29wZUtleTogc3RyaW5nKTogRmlsdGVyVGFyZ2V0IHwgbnVsbCB7XG4gIGNvbnN0IGxheWVyTWF0Y2ggPSBzY29wZUtleS5tYXRjaChMQVlFUl9LRVlfUkVHRVgpO1xuICBpZiAobGF5ZXJNYXRjaCkge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAnTEFZRVInLFxuICAgICAgY2hhcnRJZDogbGF5ZXJNYXRjaFsxXSxcbiAgICAgIGxheWVySWQ6IGxheWVyTWF0Y2hbMl0sXG4gICAgfTtcbiAgfVxuXG4gIGNvbnN0IGNoYXJ0TWF0Y2ggPSBzY29wZUtleS5tYXRjaChDSEFSVF9LRVlfUkVHRVgpO1xuICBpZiAoY2hhcnRNYXRjaCkge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAnQ0hBUlQnLFxuICAgICAgY2hhcnRJZDogY2hhcnRNYXRjaFsxXSxcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWx0ZXJTY29wZShcbiAgZmlsdGVySWQ6IHN0cmluZyxcbiAgZmlsdGVyU2NvcGVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmdbXT4sXG4pOiBGaWx0ZXJTY29wZSB7XG4gIGNvbnN0IHNjb3BlS2V5cyA9IGZpbHRlclNjb3Blc1tmaWx0ZXJJZF0gfHwgW107XG4gIGNvbnN0IHRhcmdldHM6IEZpbHRlclRhcmdldFtdID0gW107XG5cbiAgc2NvcGVLZXlzLmZvckVhY2goc2NvcGVLZXkgPT4ge1xuICAgIGNvbnN0IHRhcmdldCA9IHBhcnNlRmlsdGVyVGFyZ2V0KHNjb3BlS2V5KTtcbiAgICBpZiAodGFyZ2V0KSB7XG4gICAgICB0YXJnZXRzLnB1c2godGFyZ2V0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS53YXJuKGBJbnZhbGlkIGZpbHRlciBzY29wZSBrZXkgZm9ybWF0OiAke3Njb3BlS2V5fWApO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICBmaWx0ZXJJZCxcbiAgICB0YXJnZXRzLFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYWdncmVnYXRlRmlsdGVyc0ZvclRhcmdldChcbiAgZGF0YU1hc2s6IERhdGFNYXNrU3RhdGVXaXRoSWQsXG4gIGZpbHRlcklkczogc3RyaW5nW10sXG4pOiBFeHRyYUZvcm1EYXRhIHtcbiAgbGV0IGFnZ3JlZ2F0ZWRGb3JtRGF0YTogRXh0cmFGb3JtRGF0YSA9IHt9O1xuXG4gIGZpbHRlcklkcy5mb3JFYWNoKGZpbHRlcklkID0+IHtcbiAgICBjb25zdCBmaWx0ZXJEYXRhID0gZGF0YU1hc2tbZmlsdGVySWRdO1xuICAgIGlmIChmaWx0ZXJEYXRhPy5leHRyYUZvcm1EYXRhKSB7XG4gICAgICBhZ2dyZWdhdGVkRm9ybURhdGEgPSBtZXJnZUV4dHJhRm9ybURhdGEoXG4gICAgICAgIGFnZ3JlZ2F0ZWRGb3JtRGF0YSxcbiAgICAgICAgZmlsdGVyRGF0YS5leHRyYUZvcm1EYXRhLFxuICAgICAgKTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBhZ2dyZWdhdGVkRm9ybURhdGE7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVRhcmdldEtleSh0YXJnZXQ6IEZpbHRlclRhcmdldCk6IHN0cmluZyB7XG4gIGlmICh0YXJnZXQudHlwZSA9PT0gJ0xBWUVSJykge1xuICAgIHJldHVybiBgJHt0YXJnZXQuY2hhcnRJZH0tJHt0YXJnZXQubGF5ZXJJZH1gO1xuICB9XG4gIHJldHVybiB0YXJnZXQuY2hhcnRJZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdyb3VwRmlsdGVyc0J5VGFyZ2V0KFxuICBkYXRhTWFzazogRGF0YU1hc2tTdGF0ZVdpdGhJZCxcbiAgZmlsdGVyU2NvcGVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmdbXT4sXG4pOiB7XG4gIGNoYXJ0RmlsdGVyczogTWFwPHN0cmluZywgRXh0cmFGb3JtRGF0YT47XG4gIGxheWVyRmlsdGVyczogTWFwPHN0cmluZywgRXh0cmFGb3JtRGF0YT47XG59IHtcbiAgY29uc3QgY2hhcnRGaWx0ZXJzID0gbmV3IE1hcDxzdHJpbmcsIEV4dHJhRm9ybURhdGE+KCk7XG4gIGNvbnN0IGxheWVyRmlsdGVycyA9IG5ldyBNYXA8c3RyaW5nLCBFeHRyYUZvcm1EYXRhPigpO1xuXG4gIE9iamVjdC5rZXlzKGRhdGFNYXNrKS5mb3JFYWNoKGZpbHRlcklkID0+IHtcbiAgICBjb25zdCBzY29wZSA9IGdldEZpbHRlclNjb3BlKGZpbHRlcklkLCBmaWx0ZXJTY29wZXMpO1xuXG4gICAgc2NvcGUudGFyZ2V0cy5mb3JFYWNoKHRhcmdldCA9PiB7XG4gICAgICBjb25zdCBmaWx0ZXJEYXRhID0gZGF0YU1hc2tbZmlsdGVySWRdPy5leHRyYUZvcm1EYXRhIHx8IHt9O1xuICAgICAgY29uc3QgdGFyZ2V0S2V5ID0gY3JlYXRlVGFyZ2V0S2V5KHRhcmdldCk7XG5cbiAgICAgIGlmICh0YXJnZXQudHlwZSA9PT0gJ0NIQVJUJykge1xuICAgICAgICBjb25zdCBleGlzdGluZyA9IGNoYXJ0RmlsdGVycy5nZXQodGFyZ2V0S2V5KSB8fCB7fTtcbiAgICAgICAgY2hhcnRGaWx0ZXJzLnNldCh0YXJnZXRLZXksIG1lcmdlRXh0cmFGb3JtRGF0YShleGlzdGluZywgZmlsdGVyRGF0YSkpO1xuICAgICAgfSBlbHNlIGlmICh0YXJnZXQudHlwZSA9PT0gJ0xBWUVSJykge1xuICAgICAgICBjb25zdCBleGlzdGluZyA9IGxheWVyRmlsdGVycy5nZXQodGFyZ2V0S2V5KSB8fCB7fTtcbiAgICAgICAgbGF5ZXJGaWx0ZXJzLnNldCh0YXJnZXRLZXksIG1lcmdlRXh0cmFGb3JtRGF0YShleGlzdGluZywgZmlsdGVyRGF0YSkpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICByZXR1cm4geyBjaGFydEZpbHRlcnMsIGxheWVyRmlsdGVycyB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRGaWx0ZXJTY29wZXNGcm9tRmlsdGVycyhcbiAgZmlsdGVyczogYW55LFxuKTogUmVjb3JkPHN0cmluZywgc3RyaW5nW10+IHtcbiAgY29uc3QgZmlsdGVyU2NvcGVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmdbXT4gPSB7fTtcblxuICBPYmplY3QudmFsdWVzKGZpbHRlcnMpLmZvckVhY2goKGZpbHRlcjogRmlsdGVyKSA9PiB7XG4gICAgaWYgKGZpbHRlci5jaGFydHNJblNjb3BlKSB7XG4gICAgICBmaWx0ZXJTY29wZXNbZmlsdGVyLmlkXSA9IGZpbHRlci5jaGFydHNJblNjb3BlLm1hcChcbiAgICAgICAgKGNoYXJ0SWQ6IG51bWJlcikgPT4gYGNoYXJ0LSR7Y2hhcnRJZH1gLFxuICAgICAgKTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBmaWx0ZXJTY29wZXM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRMYXllclNwZWNpZmljRXh0cmFGb3JtRGF0YShcbiAgZGF0YU1hc2s6IERhdGFNYXNrU3RhdGVXaXRoSWQsXG4gIGZpbHRlcklkczogc3RyaW5nW10sXG4gIGNoYXJ0SWQ6IG51bWJlcixcbiAgbGF5ZXJJZD86IHN0cmluZyxcbik6IEV4dHJhRm9ybURhdGEge1xuICBsZXQgZXh0cmFGb3JtRGF0YTogRXh0cmFGb3JtRGF0YSA9IHt9O1xuXG4gIGZpbHRlcklkcy5mb3JFYWNoKGZpbHRlcklkID0+IHtcbiAgICBjb25zdCBmaWx0ZXJEYXRhID0gZGF0YU1hc2tbZmlsdGVySWRdO1xuICAgIGlmIChmaWx0ZXJEYXRhPy5leHRyYUZvcm1EYXRhKSB7XG4gICAgICBleHRyYUZvcm1EYXRhID0gbWVyZ2VFeHRyYUZvcm1EYXRhKFxuICAgICAgICBleHRyYUZvcm1EYXRhLFxuICAgICAgICBmaWx0ZXJEYXRhLmV4dHJhRm9ybURhdGEsXG4gICAgICApO1xuICAgIH1cbiAgfSk7XG5cbiAgaWYgKGxheWVySWQpIHtcbiAgICBjb25zdCBsYXllcktleSA9IGAke2NoYXJ0SWR9LSR7bGF5ZXJJZH1gO1xuICAgIGNvbnN0IGxheWVyRmlsdGVyRGF0YSA9IGRhdGFNYXNrW2xheWVyS2V5XTtcbiAgICBpZiAobGF5ZXJGaWx0ZXJEYXRhPy5leHRyYUZvcm1EYXRhKSB7XG4gICAgICBleHRyYUZvcm1EYXRhID0gbWVyZ2VFeHRyYUZvcm1EYXRhKFxuICAgICAgICBleHRyYUZvcm1EYXRhLFxuICAgICAgICBsYXllckZpbHRlckRhdGEuZXh0cmFGb3JtRGF0YSxcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGV4dHJhRm9ybURhdGE7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/dashboard/components/nativeFilters/utils.ts\n\n}");

/***/ }),

/***/ "./src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx":
/*!***************************************************************************!*\
  !*** ./src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx ***!
  \***************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("{/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MAX_ADVISABLE_VIZ_GALLERY_WIDTH: () => (/* binding */ MAX_ADVISABLE_VIZ_GALLERY_WIDTH),\n/* harmony export */   \"default\": () => (/* binding */ VizTypeGallery)\n/* harmony export */ });\n/* unused harmony export VIZ_TYPE_CONTROL_TEST_ID */\n/* harmony import */ var _emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-dev-runtime */ \"./node_modules/@emotion/react/jsx-dev-runtime/dist/emotion-react-jsx-dev-runtime.browser.development.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var fuse_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fuse.js */ \"./node_modules/fuse.js/dist/fuse.mjs\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! classnames */ \"./node_modules/classnames/index.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/translation/TranslatorSingleton.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/chart/types/Base.ts\");\n/* harmony import */ var _apache_superset_core_ui__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @apache-superset/core/ui */ \"./packages/superset-core/src/ui/theme/index.tsx\");\n/* harmony import */ var _apache_superset_core_ui__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @apache-superset/core/ui */ \"./node_modules/@emotion/react/dist/emotion-react.browser.development.esm.js\");\n/* harmony import */ var _apache_superset_core_ui__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @apache-superset/core/ui */ \"./packages/superset-core/src/ui/theme/utils/themeUtils.ts\");\n/* harmony import */ var _superset_ui_core_components__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @superset-ui/core/components */ \"webpack/sharing/consume/default/antd/antd\");\n/* harmony import */ var _superset_ui_core_components__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_superset_ui_core_components__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var _superset_ui_core_components__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @superset-ui/core/components */ \"./packages/superset-ui-core/src/components/Collapse/Collapse.tsx\");\n/* harmony import */ var _superset_ui_core_components__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @superset-ui/core/components */ \"./packages/superset-ui-core/src/components/Tooltip/index.tsx\");\n/* harmony import */ var _superset_ui_core_components__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @superset-ui/core/components */ \"./packages/superset-ui-core/src/components/Label/index.tsx\");\n/* harmony import */ var _superset_ui_core_components_Icons__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @superset-ui/core/components/Icons */ \"./packages/superset-ui-core/src/components/Icons/index.tsx\");\n/* harmony import */ var src_dashboard_components_nativeFilters_utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! src/dashboard/components/nativeFilters/utils */ \"./src/dashboard/components/nativeFilters/utils.ts\");\n/* harmony import */ var src_components__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! src/components */ \"./src/components/index.ts\");\n/* harmony import */ var scroll_into_view_if_needed__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! scroll-into-view-if-needed */ \"./node_modules/scroll-into-view-if-needed/dist/index.js\");\n/* provided dependency */ var __react_refresh_utils__ = __webpack_require__(/*! ./node_modules/@pmmmwh/react-refresh-webpack-plugin/lib/runtime/RefreshUtils.js */ \"./node_modules/@pmmmwh/react-refresh-webpack-plugin/lib/runtime/RefreshUtils.js\");\n/* provided dependency */ var __react_refresh_error_overlay__ = __webpack_require__(/*! ./node_modules/@pmmmwh/react-refresh-webpack-plugin/overlay/index.js */ \"./node_modules/@pmmmwh/react-refresh-webpack-plugin/overlay/index.js\");\n__webpack_require__.$Refresh$.runtime = __webpack_require__(/*! ./node_modules/react-refresh/runtime.js */ \"./node_modules/react-refresh/runtime.js\");\n\n/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */ function _extends() {\n    _extends = Object.assign || function(target) {\n        for(var i = 1; i < arguments.length; i++){\n            var source = arguments[i];\n            for(var key in source){\n                if (Object.prototype.hasOwnProperty.call(source, key)) {\n                    target[key] = source[key];\n                }\n            }\n        }\n        return target;\n    };\n    return _extends.apply(this, arguments);\n}\nfunction _object_without_properties_loose(source, excluded) {\n    if (source == null) return {};\n    var target = {};\n    var sourceKeys = Object.keys(source);\n    var key, i;\n    for(i = 0; i < sourceKeys.length; i++){\n        key = sourceKeys[i];\n        if (excluded.indexOf(key) >= 0) continue;\n        target[key] = source[key];\n    }\n    return target;\n}\n\nvar _s = __webpack_require__.$Refresh$.signature(), _s1 = __webpack_require__.$Refresh$.signature(), _s2 = __webpack_require__.$Refresh$.signature();\n\n\n\n\n\n\n\n\n\n\nvar Sections = /*#__PURE__*/ function(Sections) {\n    Sections[\"AllCharts\"] = \"ALL_CHARTS\";\n    Sections[\"Featured\"] = \"FEATURED\";\n    Sections[\"Category\"] = \"CATEGORY\";\n    Sections[\"Tags\"] = \"TAGS\";\n    return Sections;\n}(Sections || {});\nconst THUMBNAIL_GRID_UNITS = 24;\nconst MAX_ADVISABLE_VIZ_GALLERY_WIDTH = 1090;\nconst OTHER_CATEGORY = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_4__.t)('Other');\nconst ALL_CHARTS = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_4__.t)('All charts');\nconst FEATURED = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_4__.t)('Featured');\nconst RECOMMENDED_TAGS = [\n    FEATURED,\n    (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_4__.t)('ECharts'),\n    (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_4__.t)('Advanced-Analytics')\n];\nconst VIZ_TYPE_CONTROL_TEST_ID = 'viz-type-control';\nconst VizPickerLayout = _apache_superset_core_ui__WEBPACK_IMPORTED_MODULE_6__.styled.div`\n  ${({ isSelectedVizMetadata })=>`\n    display: grid;\n    grid-template-rows: ${isSelectedVizMetadata ? `auto minmax(100px, 1fr) minmax(200px, 35%)` : 'auto minmax(100px, 1fr)'};\n    // em is used here because the sidebar should be sized to fit the longest standard tag\n    grid-template-columns: minmax(14em, auto) 5fr;\n    grid-template-areas:\n      'sidebar search'\n      'sidebar main'\n      'details details';\n    height: 70vh;\n    overflow: auto;\n  `}\n`;\n_c = VizPickerLayout;\nconst SectionTitle = _apache_superset_core_ui__WEBPACK_IMPORTED_MODULE_6__.styled.h3`\n  margin-top: 0;\n  margin-bottom: ${({ theme })=>theme.sizeUnit * 2}px;\n  font-size: ${({ theme })=>theme.fontSizeLG}px;\n  font-weight: ${({ theme })=>theme.fontWeightStrong};\n  line-height: ${({ theme })=>theme.sizeUnit * 6}px;\n`;\n_c1 = SectionTitle;\nconst LeftPane = _apache_superset_core_ui__WEBPACK_IMPORTED_MODULE_6__.styled.div`\n  grid-area: sidebar;\n  display: flex;\n  flex-direction: column;\n  border-right: 1px solid ${({ theme })=>theme.colorBorder};\n  overflow: auto;\n\n  .ant-collapse .ant-collapse-item {\n    .ant-collapse-header {\n      font-size: ${({ theme })=>theme.fontSizeSM}px;\n      color: ${({ theme })=>theme.colorText};\n      padding-left: ${({ theme })=>theme.sizeUnit * 2}px;\n      padding-bottom: ${({ theme })=>theme.sizeUnit}px;\n    }\n\n    .ant-collapse-content .ant-collapse-content-box {\n      display: flex;\n      flex-direction: column;\n      padding: 0 ${({ theme })=>theme.sizeUnit * 2}px;\n    }\n  }\n`;\n_c2 = LeftPane;\nconst RightPane = _apache_superset_core_ui__WEBPACK_IMPORTED_MODULE_6__.styled.div`\n  grid-area: main;\n  overflow-y: auto;\n`;\n_c3 = RightPane;\nconst SearchWrapper = _apache_superset_core_ui__WEBPACK_IMPORTED_MODULE_6__.styled.div`\n  ${({ theme })=>`\n    grid-area: search;\n    margin-top: ${theme.sizeUnit * 3}px;\n    margin-bottom: ${theme.sizeUnit}px;\n    margin-left: ${theme.sizeUnit * 3}px;\n    margin-right: ${theme.sizeUnit * 3}px;\n    .ant-input-affix-wrapper {\n      padding-left: ${theme.sizeUnit * 2}px;\n    }\n  `}\n`;\n_c4 = SearchWrapper;\n/** Styles to line up prefix/suffix icons in the search input */ const InputIconAlignment = _apache_superset_core_ui__WEBPACK_IMPORTED_MODULE_6__.styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: ${({ theme })=>theme.colorIcon};\n`;\nconst SelectorLabel = _apache_superset_core_ui__WEBPACK_IMPORTED_MODULE_6__.styled.button`\n  ${({ theme })=>`\n    all: unset; // remove default button styles\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    cursor: pointer;\n    margin: ${theme.sizeUnit}px 0;\n    padding: 0 ${theme.sizeUnit}px;\n    border-radius: ${theme.borderRadius}px;\n    line-height: 2em;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    position: relative;\n    color: ${theme.colorText};\n\n    &:focus {\n      outline: initial;\n    }\n\n    &.selected {\n      background-color: ${theme.colorPrimary};\n      color: ${theme.colorTextLightSolid};\n\n      svg {\n        color: ${theme.colorTextLightSolid};\n      }\n\n      &:hover {\n        .cancel {\n          visibility: visible;\n        }\n      }\n    }\n\n    & > span[role=\"img\"] {\n      margin-right: ${theme.sizeUnit * 2}px;\n    }\n\n    .cancel {\n      visibility: hidden;\n    }\n  `}\n`;\n_c5 = SelectorLabel;\nconst IconsPane = _apache_superset_core_ui__WEBPACK_IMPORTED_MODULE_6__.styled.div`\n  overflow: auto;\n  display: grid;\n  grid-template-columns: repeat(\n    auto-fill,\n    ${({ theme })=>theme.sizeUnit * THUMBNAIL_GRID_UNITS}px\n  );\n  grid-auto-rows: max-content;\n  justify-content: space-evenly;\n  grid-gap: ${({ theme })=>theme.sizeUnit * 2}px;\n  justify-items: center;\n  // for some reason this padding doesn't seem to apply at the bottom of the container. Why is a mystery.\n  padding: ${({ theme })=>theme.sizeUnit * 2}px;\n`;\n_c6 = IconsPane;\nconst DetailsPane = (theme)=>(0,_apache_superset_core_ui__WEBPACK_IMPORTED_MODULE_7__.css)`\n  grid-area: details;\n  border-top: 1px solid ${theme.colorBorder};\n`;\n_c7 = DetailsPane;\nconst DetailsPopulated = (theme)=>(0,_apache_superset_core_ui__WEBPACK_IMPORTED_MODULE_7__.css)`\n  padding: ${theme.sizeUnit * 4}px;\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-template-rows: auto auto 1fr;\n  grid-template-areas:\n    'viz-name examples-header'\n    'viz-tags examples'\n    'description examples';\n`;\n_c8 = DetailsPopulated;\n// overflow hidden on the details pane and overflow auto on the description\n// (plus grid layout) enables the description to scroll while the header stays in place.\nconst TagsWrapper = _apache_superset_core_ui__WEBPACK_IMPORTED_MODULE_6__.styled.div`\n  grid-area: viz-tags;\n  width: ${({ theme })=>theme.sizeUnit * 120}px;\n  padding-right: ${({ theme })=>theme.sizeUnit * 14}px;\n  padding-bottom: ${({ theme })=>theme.sizeUnit * 2}px;\n`;\n_c9 = TagsWrapper;\nconst Description = _apache_superset_core_ui__WEBPACK_IMPORTED_MODULE_6__.styled.p`\n  grid-area: description;\n  overflow: auto;\n  padding-right: ${({ theme })=>theme.sizeUnit * 14}px;\n  margin: 0;\n`;\n_c10 = Description;\nconst Examples = _apache_superset_core_ui__WEBPACK_IMPORTED_MODULE_6__.styled.div`\n  grid-area: examples;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: nowrap;\n  overflow: auto;\n  gap: ${({ theme })=>theme.sizeUnit * 4}px;\n\n  img {\n    height: 100%;\n    border-radius: ${({ theme })=>theme.borderRadius}px;\n    border: 1px solid ${({ theme })=>theme.colorBorder};\n    background-color: ${({ theme })=>theme.colorBgContainer};\n  }\n`;\n_c11 = Examples;\nconst thumbnailContainerCss = (theme)=>(0,_apache_superset_core_ui__WEBPACK_IMPORTED_MODULE_7__.css)`\n  cursor: pointer;\n  width: ${theme.sizeUnit * THUMBNAIL_GRID_UNITS}px;\n  position: relative;\n  outline: none; /* Remove focus outline to show only selected state */\n\n  img {\n    min-width: ${theme.sizeUnit * THUMBNAIL_GRID_UNITS}px;\n    min-height: ${theme.sizeUnit * THUMBNAIL_GRID_UNITS}px;\n    border: 1px solid ${theme.colorBorder};\n    border-radius: ${theme.borderRadius}px;\n    transition: border-color ${theme.motionDurationMid};\n    background-color: ${theme.colorBgContainer};\n  }\n\n  &.selected img {\n    border: 2px solid ${theme.colorPrimaryBorder};\n  }\n\n  &:hover:not(.selected) img {\n    border: 1px solid ${theme.colorBorder};\n  }\n\n  .viztype-label {\n    margin-top: ${theme.sizeUnit * 2}px;\n    text-align: center;\n  }\n`;\nconst HighlightLabel = _apache_superset_core_ui__WEBPACK_IMPORTED_MODULE_6__.styled.div`\n  ${({ theme })=>`\n    border: 1px solid ${theme.colorPrimaryText};\n    box-sizing: border-box;\n    border-radius: ${theme.borderRadius}px;\n    background: ${theme.colorBgContainer};\n    line-height: ${theme.sizeUnit * 2.5}px;\n    color: ${theme.colorPrimaryText};\n    font-size: ${theme.fontSizeSM}px;\n    font-weight: ${theme.fontWeightStrong};\n    text-align: center;\n    padding: ${theme.sizeUnit * 0.5}px ${theme.sizeUnit}px;\n    cursor: pointer;\n\n    div {\n      transform: scale(0.83,0.83);\n    }\n  `}\n`;\n_c12 = HighlightLabel;\nconst ThumbnailLabelWrapper = _apache_superset_core_ui__WEBPACK_IMPORTED_MODULE_6__.styled.div`\n  position: absolute;\n  right: ${({ theme })=>theme.sizeUnit}px;\n  top: ${({ theme })=>theme.sizeUnit * 19}px;\n`;\n_c13 = ThumbnailLabelWrapper;\nconst TitleLabelWrapper = _apache_superset_core_ui__WEBPACK_IMPORTED_MODULE_6__.styled.div`\n  display: inline-block !important;\n  margin-left: ${({ theme })=>theme.sizeUnit * 2}px;\n`;\n_c14 = TitleLabelWrapper;\nconst Thumbnail = ({ entry, selectedViz, setSelectedViz, onDoubleClick })=>{\n    _s();\n    const theme = (0,_apache_superset_core_ui__WEBPACK_IMPORTED_MODULE_6__.useTheme)();\n    const isDarkMode = (0,_apache_superset_core_ui__WEBPACK_IMPORTED_MODULE_8__.isThemeDark)(theme);\n    const { key, value: type } = entry;\n    const isSelected = selectedViz === entry.key;\n    const handleKeyDown = (event)=>{\n        if (event.key === 'Enter' || event.key === ' ') {\n            event.preventDefault();\n            setSelectedViz(key);\n        }\n    };\n    const handleFocus = ()=>{\n        // Auto-select chart when tabbed to\n        setSelectedViz(key);\n    };\n    return /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        role: \"button\",\n        // using css instead of a styled component to preserve\n        // the data-test attribute\n        css: thumbnailContainerCss(theme),\n        tabIndex: 0,\n        className: isSelected ? 'selected' : '',\n        onClick: ()=>setSelectedViz(key),\n        onDoubleClick: onDoubleClick,\n        onKeyDown: handleKeyDown,\n        onFocus: handleFocus,\n        \"data-test\": \"viztype-selector-container\",\n        children: [\n            /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                alt: type.name,\n                width: \"100%\",\n                className: `viztype-selector ${isSelected ? 'selected' : ''}`,\n                src: isDarkMode && type.thumbnailDark ? type.thumbnailDark : type.thumbnail\n            }, void 0, false, {\n                fileName: \"/app/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\",\n                lineNumber: 373,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"viztype-label\",\n                \"data-test\": `${VIZ_TYPE_CONTROL_TEST_ID}__viztype-label`,\n                children: type.name\n            }, void 0, false, {\n                fileName: \"/app/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\",\n                lineNumber: 381,\n                columnNumber: 7\n            }, undefined),\n            type.label && /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(ThumbnailLabelWrapper, {\n                children: /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(HighlightLabel, {\n                    children: /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        children: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_4__.t)(type.label)\n                    }, void 0, false, {\n                        fileName: \"/app/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\",\n                        lineNumber: 390,\n                        columnNumber: 13\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"/app/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\",\n                    lineNumber: 389,\n                    columnNumber: 11\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/app/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\",\n                lineNumber: 388,\n                columnNumber: 9\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/app/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\",\n        lineNumber: 360,\n        columnNumber: 5\n    }, undefined);\n};\n_s(Thumbnail, \"VrMvFCCB9Haniz3VCRPNUiCauHs=\", false, function() {\n    return [\n        _apache_superset_core_ui__WEBPACK_IMPORTED_MODULE_6__.useTheme\n    ];\n});\n_c15 = Thumbnail;\n/** A list of viz thumbnails, used within the viz picker modal */ const ThumbnailGallery = (_param)=>{\n    var { vizEntries } = _param, props = _object_without_properties_loose(_param, [\n        \"vizEntries\"\n    ]);\n    return /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(IconsPane, {\n        \"data-test\": `${VIZ_TYPE_CONTROL_TEST_ID}__viz-row`,\n        children: vizEntries.map((entry)=>/*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Thumbnail, _extends({}, props, {\n                entry: entry\n            }), entry.key, false, {\n                fileName: \"/app/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\",\n                lineNumber: 412,\n                columnNumber: 7\n            }, undefined))\n    }, void 0, false, {\n        fileName: \"/app/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\",\n        lineNumber: 410,\n        columnNumber: 3\n    }, undefined);\n};\n_c16 = ThumbnailGallery;\nconst Selector = ({ selector, sectionId, icon, isSelected, onClick, className })=>{\n    _s1();\n    const btnRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // see Element.scrollIntoViewIfNeeded()\n    // see: https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollIntoViewIfNeeded\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (isSelected) {\n            // We need to wait for the modal to open and then scroll, so we put it in the microtask queue\n            queueMicrotask(()=>(0,scroll_into_view_if_needed__WEBPACK_IMPORTED_MODULE_16__[\"default\"])(btnRef.current, {\n                    behavior: 'smooth',\n                    scrollMode: 'if-needed'\n                }));\n        }\n    }, []);\n    return /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(SelectorLabel, {\n        \"aria-label\": selector,\n        \"aria-selected\": isSelected,\n        ref: btnRef,\n        name: selector,\n        className: classnames__WEBPACK_IMPORTED_MODULE_3___default()(className, isSelected && 'selected'),\n        onClick: ()=>onClick(selector, sectionId),\n        tabIndex: 0,\n        role: \"tab\",\n        children: [\n            icon,\n            (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_4__.t)(selector)\n        ]\n    }, selector, true, {\n        fileName: \"/app/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\",\n        lineNumber: 442,\n        columnNumber: 5\n    }, undefined);\n};\n_s1(Selector, \"7b+1ojsRku/LzsN+YEh9h8mVVvY=\");\n_c17 = Selector;\nconst doesVizMatchSelector = (viz, selector)=>selector === viz.category || selector === OTHER_CATEGORY && viz.category == null || (viz.tags || []).indexOf(selector) > -1;\nfunction VizTypeGallery(props) {\n    var _selectedVizMetadata_exampleGallery;\n    _s2();\n    const theme = (0,_apache_superset_core_ui__WEBPACK_IMPORTED_MODULE_6__.useTheme)();\n    const isDarkMode = (0,_apache_superset_core_ui__WEBPACK_IMPORTED_MODULE_8__.isThemeDark)(theme);\n    const { selectedViz, onChange, onDoubleClick, className, denyList } = props;\n    const { mountedPluginMetadata } = (0,src_components__WEBPACK_IMPORTED_MODULE_15__.usePluginContext)();\n    const searchInputRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)();\n    const [searchInputValue, setSearchInputValue] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');\n    const [isSearchFocused, setIsSearchFocused] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const isActivelySearching = isSearchFocused && !!searchInputValue;\n    const selectedVizMetadata = selectedViz ? mountedPluginMetadata[selectedViz] : null;\n    const chartMetadata = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{\n        const result = Object.entries(mountedPluginMetadata).map(([key, value])=>({\n                key,\n                value\n            })).filter(({ key })=>!denyList.includes(key)).filter(({ value })=>(0,src_dashboard_components_nativeFilters_utils__WEBPACK_IMPORTED_MODULE_14__.nativeFilterGate)(value.behaviors || []) && !value.deprecated).sort((a, b)=>a.value.name.localeCompare(b.value.name));\n        return result;\n    }, [\n        mountedPluginMetadata,\n        denyList\n    ]);\n    const chartsByCategory = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{\n        const result = {};\n        chartMetadata.forEach((entry)=>{\n            const category = entry.value.category || OTHER_CATEGORY;\n            if (!result[category]) {\n                result[category] = [];\n            }\n            result[category].push(entry);\n        });\n        return result;\n    }, [\n        chartMetadata\n    ]);\n    const categories = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>Object.keys(chartsByCategory).sort((a, b)=>{\n            // make sure Other goes at the end\n            if (a === OTHER_CATEGORY) return 1;\n            if (b === OTHER_CATEGORY) return -1;\n            // sort alphabetically\n            return a.localeCompare(b);\n        }), [\n        chartsByCategory\n    ]);\n    const chartsByTags = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{\n        const result = {};\n        chartMetadata.forEach((entry)=>{\n            const tags = entry.value.tags || [];\n            tags.forEach((tag)=>{\n                if (!result[tag]) {\n                    result[tag] = [];\n                }\n                result[tag].push(entry);\n            });\n        });\n        return result;\n    }, [\n        chartMetadata\n    ]);\n    const tags = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>Object.keys(chartsByTags).sort((a, b)=>// sort alphabetically\n            a.localeCompare(b)).filter((tag)=>RECOMMENDED_TAGS.indexOf(tag) === -1), [\n        chartsByTags\n    ]);\n    const sortedMetadata = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>chartMetadata.sort((a, b)=>a.value.name.localeCompare(b.value.name)), [\n        chartMetadata\n    ]);\n    const [activeSelector, setActiveSelector] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(()=>(selectedVizMetadata == null ? void 0 : selectedVizMetadata.category) || FEATURED);\n    const [activeSection, setActiveSection] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(()=>(selectedVizMetadata == null ? void 0 : selectedVizMetadata.category) ? \"CATEGORY\" : \"FEATURED\");\n    // get a fuse instance for fuzzy search\n    const fuse = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>new fuse_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"](chartMetadata, {\n            ignoreLocation: true,\n            threshold: 0.3,\n            keys: [\n                {\n                    name: 'value.name',\n                    weight: 4\n                },\n                {\n                    name: 'value.tags',\n                    weight: 2\n                },\n                'value.description'\n            ]\n        }), [\n        chartMetadata\n    ]);\n    const searchResults = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{\n        if (searchInputValue.trim() === '') {\n            return [];\n        }\n        return fuse.search(searchInputValue).map((result)=>result.item).sort((a, b)=>{\n            var _a_value, _b_value;\n            const aLabel = (_a_value = a.value) == null ? void 0 : _a_value.label;\n            const bLabel = (_b_value = b.value) == null ? void 0 : _b_value.label;\n            const aOrder = aLabel && _superset_ui_core__WEBPACK_IMPORTED_MODULE_5__.chartLabelWeight[aLabel] ? _superset_ui_core__WEBPACK_IMPORTED_MODULE_5__.chartLabelWeight[aLabel].weight : 0;\n            const bOrder = bLabel && _superset_ui_core__WEBPACK_IMPORTED_MODULE_5__.chartLabelWeight[bLabel] ? _superset_ui_core__WEBPACK_IMPORTED_MODULE_5__.chartLabelWeight[bLabel].weight : 0;\n            return bOrder - aOrder;\n        });\n    }, [\n        searchInputValue,\n        fuse\n    ]);\n    const focusSearch = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        // \"start searching\" is actually a two-stage process.\n        // When you first click on the search bar, the input is focused and nothing else happens.\n        // Once you begin typing, the selected category is cleared and the displayed viz entries change.\n        setIsSearchFocused(true);\n    }, []);\n    // Auto-focus the search input when the modal opens\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (searchInputRef.current) {\n            searchInputRef.current.focus();\n        }\n    }, []);\n    const changeSearch = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((event)=>setSearchInputValue(event.target.value), []);\n    const stopSearching = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        // stopping a search takes you back to the category you were looking at before.\n        // Unlike focusSearch, this is a simple one-step process.\n        setIsSearchFocused(false);\n        setSearchInputValue('');\n        searchInputRef.current.blur();\n    }, []);\n    const clickSelector = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((selector, sectionId)=>{\n        if (isSearchFocused) {\n            stopSearching();\n        }\n        setActiveSelector(selector);\n        setActiveSection(sectionId);\n        // clear the selected viz if it is not present in the new category or tags\n        const isSelectedVizCompatible = selectedVizMetadata && doesVizMatchSelector(selectedVizMetadata, selector);\n        if (selector !== activeSelector && !isSelectedVizCompatible) {\n            onChange(null);\n        }\n    }, [\n        stopSearching,\n        isSearchFocused,\n        activeSelector,\n        selectedVizMetadata,\n        onChange\n    ]);\n    const sectionMap = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>({\n            [\"CATEGORY\"]: {\n                title: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_4__.t)('Category'),\n                icon: /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_superset_ui_core_components_Icons__WEBPACK_IMPORTED_MODULE_13__.Icons.Category, {\n                    iconSize: \"m\"\n                }, void 0, false, {\n                    fileName: \"/app/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\",\n                    lineNumber: 651,\n                    columnNumber: 15\n                }, this),\n                selectors: categories\n            },\n            [\"TAGS\"]: {\n                title: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_4__.t)('Tags'),\n                icon: /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_superset_ui_core_components_Icons__WEBPACK_IMPORTED_MODULE_13__.Icons.NumberOutlined, {\n                    iconSize: \"m\"\n                }, void 0, false, {\n                    fileName: \"/app/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\",\n                    lineNumber: 656,\n                    columnNumber: 15\n                }, this),\n                selectors: tags\n            }\n        }), [\n        categories,\n        tags\n    ]);\n    const getVizEntriesToDisplay = ()=>{\n        if (isActivelySearching) {\n            return searchResults;\n        }\n        if (activeSelector === ALL_CHARTS && activeSection === \"ALL_CHARTS\") {\n            return sortedMetadata;\n        }\n        if (activeSelector === FEATURED && activeSection === \"FEATURED\" && chartsByTags[FEATURED]) {\n            return chartsByTags[FEATURED];\n        }\n        if (activeSection === \"CATEGORY\" && chartsByCategory[activeSelector]) {\n            return chartsByCategory[activeSelector];\n        }\n        if (activeSection === \"TAGS\" && chartsByTags[activeSelector]) {\n            return chartsByTags[activeSelector];\n        }\n        return [];\n    };\n    var _selectedVizMetadata_labelExplanation;\n    return /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(VizPickerLayout, {\n        className: className,\n        isSelectedVizMetadata: Boolean(selectedVizMetadata),\n        children: [\n            /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(LeftPane, {\n                \"aria-label\": (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_4__.t)('Choose chart type'),\n                role: \"tablist\",\n                children: [\n                    /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Selector, {\n                        css: ({ sizeUnit })=>// adjust style for not being inside a collapse\n                            (0,_apache_superset_core_ui__WEBPACK_IMPORTED_MODULE_7__.css)`\n              margin: ${sizeUnit * 2}px;\n              margin-bottom: 0;\n            `,\n                        sectionId: \"ALL_CHARTS\",\n                        selector: ALL_CHARTS,\n                        icon: /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_superset_ui_core_components_Icons__WEBPACK_IMPORTED_MODULE_13__.Icons.Ballot, {\n                            iconSize: \"m\"\n                        }, void 0, false, {\n                            fileName: \"/app/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\",\n                            lineNumber: 705,\n                            columnNumber: 17\n                        }, void 0),\n                        isSelected: !isActivelySearching && ALL_CHARTS === activeSelector && \"ALL_CHARTS\" === activeSection,\n                        onClick: clickSelector\n                    }, void 0, false, {\n                        fileName: \"/app/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\",\n                        lineNumber: 695,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Selector, {\n                        css: ({ sizeUnit })=>// adjust style for not being inside a collapse\n                            (0,_apache_superset_core_ui__WEBPACK_IMPORTED_MODULE_7__.css)`\n              margin: ${sizeUnit * 2}px;\n              margin-bottom: 0;\n            `,\n                        sectionId: \"FEATURED\",\n                        selector: FEATURED,\n                        icon: /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_superset_ui_core_components_Icons__WEBPACK_IMPORTED_MODULE_13__.Icons.FireOutlined, {\n                            iconSize: \"m\"\n                        }, void 0, false, {\n                            fileName: \"/app/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\",\n                            lineNumber: 723,\n                            columnNumber: 17\n                        }, void 0),\n                        isSelected: !isActivelySearching && FEATURED === activeSelector && \"FEATURED\" === activeSection,\n                        onClick: clickSelector\n                    }, void 0, false, {\n                        fileName: \"/app/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\",\n                        lineNumber: 713,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_superset_ui_core_components__WEBPACK_IMPORTED_MODULE_10__.Collapse, {\n                        expandIconPosition: \"end\",\n                        ghost: true,\n                        defaultActiveKey: \"CATEGORY\",\n                        items: Object.keys(sectionMap).map((sectionId)=>{\n                            const section = sectionMap[sectionId];\n                            return {\n                                key: sectionId,\n                                label: /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"header\",\n                                    children: section.title\n                                }, void 0, false, {\n                                    fileName: \"/app/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\",\n                                    lineNumber: 740,\n                                    columnNumber: 22\n                                }, void 0),\n                                children: /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                    children: section.selectors.map((selector)=>/*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Selector, {\n                                            selector: selector,\n                                            sectionId: sectionId,\n                                            icon: section.icon,\n                                            isSelected: !isActivelySearching && selector === activeSelector && sectionId === activeSection,\n                                            onClick: clickSelector\n                                        }, selector, false, {\n                                            fileName: \"/app/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\",\n                                            lineNumber: 744,\n                                            columnNumber: 21\n                                        }, void 0))\n                                }, void 0, false)\n                            };\n                        })\n                    }, void 0, false, {\n                        fileName: \"/app/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\",\n                        lineNumber: 731,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/app/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\",\n                lineNumber: 694,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(SearchWrapper, {\n                children: /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_superset_ui_core_components__WEBPACK_IMPORTED_MODULE_9__.Input, {\n                    type: \"text\",\n                    ref: searchInputRef,\n                    value: searchInputValue,\n                    placeholder: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_4__.t)('Search all charts'),\n                    onChange: changeSearch,\n                    onFocus: focusSearch,\n                    \"data-test\": `${VIZ_TYPE_CONTROL_TEST_ID}__search-input`,\n                    prefix: /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(InputIconAlignment, {\n                        children: /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_superset_ui_core_components_Icons__WEBPACK_IMPORTED_MODULE_13__.Icons.SearchOutlined, {\n                            iconSize: \"m\"\n                        }, void 0, false, {\n                            fileName: \"/app/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\",\n                            lineNumber: 775,\n                            columnNumber: 15\n                        }, void 0)\n                    }, void 0, false, {\n                        fileName: \"/app/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\",\n                        lineNumber: 774,\n                        columnNumber: 13\n                    }, void 0),\n                    suffix: /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(InputIconAlignment, {\n                        children: searchInputValue && /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_superset_ui_core_components_Icons__WEBPACK_IMPORTED_MODULE_13__.Icons.CloseOutlined, {\n                            iconSize: \"m\",\n                            onClick: stopSearching\n                        }, void 0, false, {\n                            fileName: \"/app/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\",\n                            lineNumber: 781,\n                            columnNumber: 17\n                        }, void 0)\n                    }, void 0, false, {\n                        fileName: \"/app/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\",\n                        lineNumber: 779,\n                        columnNumber: 13\n                    }, void 0)\n                }, void 0, false, {\n                    fileName: \"/app/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\",\n                    lineNumber: 765,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"/app/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\",\n                lineNumber: 764,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(RightPane, {\n                children: /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(ThumbnailGallery, {\n                    vizEntries: getVizEntriesToDisplay(),\n                    selectedViz: selectedViz,\n                    setSelectedViz: onChange,\n                    onDoubleClick: onDoubleClick\n                }, void 0, false, {\n                    fileName: \"/app/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\",\n                    lineNumber: 789,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"/app/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\",\n                lineNumber: 788,\n                columnNumber: 7\n            }, this),\n            selectedVizMetadata ? /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                css: (theme)=>[\n                        DetailsPane(theme),\n                        DetailsPopulated(theme)\n                    ],\n                children: /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                    children: [\n                        /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(SectionTitle, {\n                            css: (0,_apache_superset_core_ui__WEBPACK_IMPORTED_MODULE_7__.css)`\n                grid-area: viz-name;\n                position: relative;\n              `,\n                            children: [\n                                selectedVizMetadata == null ? void 0 : selectedVizMetadata.name,\n                                (selectedVizMetadata == null ? void 0 : selectedVizMetadata.label) && /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_superset_ui_core_components__WEBPACK_IMPORTED_MODULE_11__.Tooltip, {\n                                    id: \"viz-badge-tooltip\",\n                                    placement: \"top\",\n                                    title: (_selectedVizMetadata_labelExplanation = selectedVizMetadata.labelExplanation) != null ? _selectedVizMetadata_labelExplanation : _superset_ui_core__WEBPACK_IMPORTED_MODULE_5__.chartLabelExplanations[selectedVizMetadata.label],\n                                    children: /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(TitleLabelWrapper, {\n                                        children: /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(HighlightLabel, {\n                                            children: /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                children: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_4__.t)(selectedVizMetadata.label)\n                                            }, void 0, false, {\n                                                fileName: \"/app/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\",\n                                                lineNumber: 823,\n                                                columnNumber: 23\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"/app/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\",\n                                            lineNumber: 822,\n                                            columnNumber: 21\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"/app/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\",\n                                        lineNumber: 821,\n                                        columnNumber: 19\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/app/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\",\n                                    lineNumber: 813,\n                                    columnNumber: 17\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/app/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\",\n                            lineNumber: 805,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(TagsWrapper, {\n                            children: selectedVizMetadata == null ? void 0 : selectedVizMetadata.tags.map((tag)=>/*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_superset_ui_core_components__WEBPACK_IMPORTED_MODULE_12__.Label, {\n                                    css: ({ sizeUnit })=>(0,_apache_superset_core_ui__WEBPACK_IMPORTED_MODULE_7__.css)`\n                    margin-bottom: ${sizeUnit * 2}px;\n                  `,\n                                    children: tag\n                                }, tag, false, {\n                                    fileName: \"/app/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\",\n                                    lineNumber: 831,\n                                    columnNumber: 17\n                                }, this))\n                        }, void 0, false, {\n                            fileName: \"/app/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\",\n                            lineNumber: 829,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Description, {\n                            children: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_4__.t)((selectedVizMetadata == null ? void 0 : selectedVizMetadata.description) || 'No description available.')\n                        }, void 0, false, {\n                            fileName: \"/app/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\",\n                            lineNumber: 841,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(SectionTitle, {\n                            css: (0,_apache_superset_core_ui__WEBPACK_IMPORTED_MODULE_7__.css)`\n                grid-area: examples-header;\n              `,\n                            children: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_4__.t)('Examples')\n                        }, void 0, false, {\n                            fileName: \"/app/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\",\n                            lineNumber: 846,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Examples, {\n                            children: ((selectedVizMetadata == null ? void 0 : (_selectedVizMetadata_exampleGallery = selectedVizMetadata.exampleGallery) == null ? void 0 : _selectedVizMetadata_exampleGallery.length) ? selectedVizMetadata.exampleGallery : [\n                                {\n                                    url: selectedVizMetadata == null ? void 0 : selectedVizMetadata.thumbnail,\n                                    caption: selectedVizMetadata == null ? void 0 : selectedVizMetadata.name\n                                }\n                            ]).map((example)=>/*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                    src: isDarkMode && example.urlDark ? example.urlDark : example.url,\n                                    alt: example.caption,\n                                    title: example.caption\n                                }, example.url, false, {\n                                    fileName: \"/app/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\",\n                                    lineNumber: 863,\n                                    columnNumber: 17\n                                }, this))\n                        }, void 0, false, {\n                            fileName: \"/app/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\",\n                            lineNumber: 853,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true)\n            }, void 0, false, {\n                fileName: \"/app/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\",\n                lineNumber: 798,\n                columnNumber: 9\n            }, this) : null\n        ]\n    }, void 0, true, {\n        fileName: \"/app/superset-frontend/src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\",\n        lineNumber: 690,\n        columnNumber: 5\n    }, this);\n}\n_s2(VizTypeGallery, \"EzfpTIJTAwTU8hpGI5BgqMOGoIE=\", false, function() {\n    return [\n        _apache_superset_core_ui__WEBPACK_IMPORTED_MODULE_6__.useTheme,\n        src_components__WEBPACK_IMPORTED_MODULE_15__.usePluginContext\n    ];\n});\n_c18 = VizTypeGallery;\nvar _c, _c1, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11, _c12, _c13, _c14, _c15, _c16, _c17, _c18;\n__webpack_require__.$Refresh$.register(_c, \"VizPickerLayout\");\n__webpack_require__.$Refresh$.register(_c1, \"SectionTitle\");\n__webpack_require__.$Refresh$.register(_c2, \"LeftPane\");\n__webpack_require__.$Refresh$.register(_c3, \"RightPane\");\n__webpack_require__.$Refresh$.register(_c4, \"SearchWrapper\");\n__webpack_require__.$Refresh$.register(_c5, \"SelectorLabel\");\n__webpack_require__.$Refresh$.register(_c6, \"IconsPane\");\n__webpack_require__.$Refresh$.register(_c7, \"DetailsPane\");\n__webpack_require__.$Refresh$.register(_c8, \"DetailsPopulated\");\n__webpack_require__.$Refresh$.register(_c9, \"TagsWrapper\");\n__webpack_require__.$Refresh$.register(_c10, \"Description\");\n__webpack_require__.$Refresh$.register(_c11, \"Examples\");\n__webpack_require__.$Refresh$.register(_c12, \"HighlightLabel\");\n__webpack_require__.$Refresh$.register(_c13, \"ThumbnailLabelWrapper\");\n__webpack_require__.$Refresh$.register(_c14, \"TitleLabelWrapper\");\n__webpack_require__.$Refresh$.register(_c15, \"Thumbnail\");\n__webpack_require__.$Refresh$.register(_c16, \"ThumbnailGallery\");\n__webpack_require__.$Refresh$.register(_c17, \"Selector\");\n__webpack_require__.$Refresh$.register(_c18, \"VizTypeGallery\");\n\n\nconst $ReactRefreshModuleId$ = __webpack_require__.$Refresh$.moduleId;\nconst $ReactRefreshCurrentExports$ = __react_refresh_utils__.getModuleExports(\n\t$ReactRefreshModuleId$\n);\n\nfunction $ReactRefreshModuleRuntime$(exports) {\n\tif (true) {\n\t\tlet errorOverlay;\n\t\tif (typeof __react_refresh_error_overlay__ !== 'undefined') {\n\t\t\terrorOverlay = __react_refresh_error_overlay__;\n\t\t}\n\t\tlet testMode;\n\t\tif (typeof __react_refresh_test__ !== 'undefined') {\n\t\t\ttestMode = __react_refresh_test__;\n\t\t}\n\t\treturn __react_refresh_utils__.executeRuntime(\n\t\t\texports,\n\t\t\t$ReactRefreshModuleId$,\n\t\t\tmodule.hot,\n\t\t\terrorOverlay,\n\t\t\ttestMode\n\t\t);\n\t}\n}\n\nif (typeof Promise !== 'undefined' && $ReactRefreshCurrentExports$ instanceof Promise) {\n\t$ReactRefreshCurrentExports$.then($ReactRefreshModuleRuntime$);\n} else {\n\t$ReactRefreshModuleRuntime$($ReactRefreshCurrentExports$);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZXhwbG9yZS9jb21wb25lbnRzL2NvbnRyb2xzL1ZpelR5cGVDb250cm9sL1ZpelR5cGVHYWxsZXJ5LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOzs7Ozs7Ozs7Ozs7Ozs7OztBQWlCQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBO0FBV0E7QUFDQTtBQUNBO0FBTUE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBZUE7Ozs7O0FBQUE7QUFBQTtBQU9BO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFFQTtBQUNBOztBQUVBOzs7Ozs7Ozs7QUFhQTtBQUNBO0FBakJBO0FBbUJBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVFBOzs7O0FBSUE7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQU1BOzs7QUFHQTtBQXJCQTtBQXVCQTs7O0FBR0E7QUFIQTtBQUtBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQVhBO0FBYUE7Ozs7QUFLQTtBQUNBO0FBRUE7QUFDQTs7Ozs7O0FBTUE7QUFDQTtBQUNBOzs7OztBQUtBOzs7Ozs7O0FBT0E7QUFDQTs7O0FBR0E7Ozs7Ozs7Ozs7O0FBV0E7Ozs7OztBQU1BO0FBQ0E7QUEzQ0E7QUE2Q0E7Ozs7O0FBS0E7Ozs7QUFJQTs7O0FBR0E7QUFDQTtBQWJBO0FBZUE7O0FBRUE7QUFDQTtBQUhBO0FBS0E7QUFDQTs7Ozs7Ozs7QUFRQTtBQVRBO0FBV0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTs7O0FBR0E7O0FBRUE7QUFMQTtBQU9BOzs7Ozs7QUFNQTs7OztBQUlBO0FBQ0E7QUFDQTs7QUFFQTtBQWRBO0FBZ0JBOztBQUVBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBOzs7O0FBSUE7Ozs7QUFJQTs7O0FBR0E7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOzs7Ozs7QUFNQTtBQUNBO0FBbEJBO0FBb0JBOztBQUVBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7O0FBRUE7QUFDQTtBQUhBO0FBWUE7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7O0FBRUE7QUFFQTtBQUNBO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFNQTtBQTVEQTs7QUFNQTs7O0FBTkE7QUFxRUE7QUFDQTtBQUNBOztBQUdBO0FBQUE7QUFDQTtBQUNBO0FBQUE7Ozs7Ozs7Ozs7O0FBTkE7QUFXQTs7QUFRQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFSQTs7Ozs7QUFXQTtBQXhDQTtBQUFBO0FBMENBO0FBS0E7QUFzWUE7O0FBcllBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFPQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUtBO0FBR0E7QUFBQTtBQUdBO0FBR0E7QUFBQTtBQUdBO0FBSUE7QUFJQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFBQTtBQUNBO0FBQ0E7QUFJQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUFBOzs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWtJQTtBQWhJQTtBQUVBO0FBQ0E7O0FBRUE7QUFBQTtBQUFBOztBQUNBO0FBQ0E7QUFFQTtBQUNBOztBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQUE7Ozs7OztBQUNBO0FBS0E7Ozs7OztBQUVBO0FBQ0E7QUFFQTtBQUNBOztBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQUE7Ozs7OztBQUNBO0FBS0E7Ozs7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7Ozs7OztBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBVEE7Ozs7OztBQWNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTs7Ozs7Ozs7Ozs7QUFHQTtBQUVBO0FBQ0E7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQUlBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFDQTtBQUNBOzs7QUFHQTs7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQU1BO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUxBOzs7Ozs7Ozs7O0FBU0E7QUFDQTs7Ozs7O0FBSUE7QUFDQTs7QUFFQTtBQUVBOzs7Ozs7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBS0E7QUFDQTtBQVBBOzs7Ozs7Ozs7Ozs7Ozs7O0FBYUE7Ozs7Ozs7QUFHQTtBQWhhQTs7QUFDQTtBQUdBOzs7QUFKQSIsInNvdXJjZXMiOlsid2VicGFjazovL3N1cGVyc2V0Ly4vc3JjL2V4cGxvcmUvY29tcG9uZW50cy9jb250cm9scy9WaXpUeXBlQ29udHJvbC9WaXpUeXBlR2FsbGVyeS50c3g/OGQ5MCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQge1xuICBDaGFuZ2VFdmVudEhhbmRsZXIsXG4gIEZDLFxuICBSZWFjdEVsZW1lbnQsXG4gIHVzZUNhbGxiYWNrLFxuICB1c2VFZmZlY3QsXG4gIHVzZU1lbW8sXG4gIHVzZVJlZixcbiAgdXNlU3RhdGUsXG59IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IEZ1c2UgZnJvbSAnZnVzZS5qcyc7XG5pbXBvcnQgY3ggZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQge1xuICB0LFxuICBDaGFydE1ldGFkYXRhLFxuICBjaGFydExhYmVsV2VpZ2h0LFxuICBjaGFydExhYmVsRXhwbGFuYXRpb25zLFxufSBmcm9tICdAc3VwZXJzZXQtdWkvY29yZSc7XG5pbXBvcnQge1xuICBzdHlsZWQsXG4gIGNzcyxcbiAgU3VwZXJzZXRUaGVtZSxcbiAgdXNlVGhlbWUsXG4gIGlzVGhlbWVEYXJrLFxufSBmcm9tICdAYXBhY2hlLXN1cGVyc2V0L2NvcmUvdWknO1xuaW1wb3J0IHsgSW5wdXQsIENvbGxhcHNlLCBUb29sdGlwLCBMYWJlbCB9IGZyb20gJ0BzdXBlcnNldC11aS9jb3JlL2NvbXBvbmVudHMnO1xuaW1wb3J0IHsgSWNvbnMgfSBmcm9tICdAc3VwZXJzZXQtdWkvY29yZS9jb21wb25lbnRzL0ljb25zJztcbmltcG9ydCB7IG5hdGl2ZUZpbHRlckdhdGUgfSBmcm9tICdzcmMvZGFzaGJvYXJkL2NvbXBvbmVudHMvbmF0aXZlRmlsdGVycy91dGlscyc7XG5pbXBvcnQgeyB1c2VQbHVnaW5Db250ZXh0IH0gZnJvbSAnc3JjL2NvbXBvbmVudHMnO1xuaW1wb3J0IHNjcm9sbEludG9WaWV3IGZyb20gJ3Njcm9sbC1pbnRvLXZpZXctaWYtbmVlZGVkJztcblxuaW50ZXJmYWNlIFZpelR5cGVHYWxsZXJ5UHJvcHMge1xuICBvbkNoYW5nZTogKHZpelR5cGU6IHN0cmluZyB8IG51bGwpID0+IHZvaWQ7XG4gIG9uRG91YmxlQ2xpY2s6ICgpID0+IHZvaWQ7XG4gIHNlbGVjdGVkVml6OiBzdHJpbmcgfCBudWxsO1xuICBjbGFzc05hbWU/OiBzdHJpbmc7XG4gIGRlbnlMaXN0OiBzdHJpbmdbXTtcbn1cblxudHlwZSBWaXpFbnRyeSA9IHtcbiAga2V5OiBzdHJpbmc7XG4gIHZhbHVlOiBDaGFydE1ldGFkYXRhO1xufTtcblxuZW51bSBTZWN0aW9ucyB7XG4gIEFsbENoYXJ0cyA9ICdBTExfQ0hBUlRTJyxcbiAgRmVhdHVyZWQgPSAnRkVBVFVSRUQnLFxuICBDYXRlZ29yeSA9ICdDQVRFR09SWScsXG4gIFRhZ3MgPSAnVEFHUycsXG59XG5cbmNvbnN0IFRIVU1CTkFJTF9HUklEX1VOSVRTID0gMjQ7XG5cbmV4cG9ydCBjb25zdCBNQVhfQURWSVNBQkxFX1ZJWl9HQUxMRVJZX1dJRFRIID0gMTA5MDtcblxuY29uc3QgT1RIRVJfQ0FURUdPUlkgPSB0KCdPdGhlcicpO1xuXG5jb25zdCBBTExfQ0hBUlRTID0gdCgnQWxsIGNoYXJ0cycpO1xuXG5jb25zdCBGRUFUVVJFRCA9IHQoJ0ZlYXR1cmVkJyk7XG5cbmNvbnN0IFJFQ09NTUVOREVEX1RBR1MgPSBbRkVBVFVSRUQsIHQoJ0VDaGFydHMnKSwgdCgnQWR2YW5jZWQtQW5hbHl0aWNzJyldO1xuXG5leHBvcnQgY29uc3QgVklaX1RZUEVfQ09OVFJPTF9URVNUX0lEID0gJ3Zpei10eXBlLWNvbnRyb2wnO1xuXG5jb25zdCBWaXpQaWNrZXJMYXlvdXQgPSBzdHlsZWQuZGl2PHsgaXNTZWxlY3RlZFZpek1ldGFkYXRhOiBib29sZWFuIH0+YFxuICAkeyh7IGlzU2VsZWN0ZWRWaXpNZXRhZGF0YSB9KSA9PiBgXG4gICAgZGlzcGxheTogZ3JpZDtcbiAgICBncmlkLXRlbXBsYXRlLXJvd3M6ICR7XG4gICAgICBpc1NlbGVjdGVkVml6TWV0YWRhdGFcbiAgICAgICAgPyBgYXV0byBtaW5tYXgoMTAwcHgsIDFmcikgbWlubWF4KDIwMHB4LCAzNSUpYFxuICAgICAgICA6ICdhdXRvIG1pbm1heCgxMDBweCwgMWZyKSdcbiAgICB9O1xuICAgIC8vIGVtIGlzIHVzZWQgaGVyZSBiZWNhdXNlIHRoZSBzaWRlYmFyIHNob3VsZCBiZSBzaXplZCB0byBmaXQgdGhlIGxvbmdlc3Qgc3RhbmRhcmQgdGFnXG4gICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiBtaW5tYXgoMTRlbSwgYXV0bykgNWZyO1xuICAgIGdyaWQtdGVtcGxhdGUtYXJlYXM6XG4gICAgICAnc2lkZWJhciBzZWFyY2gnXG4gICAgICAnc2lkZWJhciBtYWluJ1xuICAgICAgJ2RldGFpbHMgZGV0YWlscyc7XG4gICAgaGVpZ2h0OiA3MHZoO1xuICAgIG92ZXJmbG93OiBhdXRvO1xuICBgfVxuYDtcblxuY29uc3QgU2VjdGlvblRpdGxlID0gc3R5bGVkLmgzYFxuICBtYXJnaW4tdG9wOiAwO1xuICBtYXJnaW4tYm90dG9tOiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLnNpemVVbml0ICogMn1weDtcbiAgZm9udC1zaXplOiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmZvbnRTaXplTEd9cHg7XG4gIGZvbnQtd2VpZ2h0OiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmZvbnRXZWlnaHRTdHJvbmd9O1xuICBsaW5lLWhlaWdodDogJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS5zaXplVW5pdCAqIDZ9cHg7XG5gO1xuXG5jb25zdCBMZWZ0UGFuZSA9IHN0eWxlZC5kaXZgXG4gIGdyaWQtYXJlYTogc2lkZWJhcjtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS5jb2xvckJvcmRlcn07XG4gIG92ZXJmbG93OiBhdXRvO1xuXG4gIC5hbnQtY29sbGFwc2UgLmFudC1jb2xsYXBzZS1pdGVtIHtcbiAgICAuYW50LWNvbGxhcHNlLWhlYWRlciB7XG4gICAgICBmb250LXNpemU6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuZm9udFNpemVTTX1weDtcbiAgICAgIGNvbG9yOiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmNvbG9yVGV4dH07XG4gICAgICBwYWRkaW5nLWxlZnQ6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuc2l6ZVVuaXQgKiAyfXB4O1xuICAgICAgcGFkZGluZy1ib3R0b206ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuc2l6ZVVuaXR9cHg7XG4gICAgfVxuXG4gICAgLmFudC1jb2xsYXBzZS1jb250ZW50IC5hbnQtY29sbGFwc2UtY29udGVudC1ib3gge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICBwYWRkaW5nOiAwICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuc2l6ZVVuaXQgKiAyfXB4O1xuICAgIH1cbiAgfVxuYDtcblxuY29uc3QgUmlnaHRQYW5lID0gc3R5bGVkLmRpdmBcbiAgZ3JpZC1hcmVhOiBtYWluO1xuICBvdmVyZmxvdy15OiBhdXRvO1xuYDtcblxuY29uc3QgU2VhcmNoV3JhcHBlciA9IHN0eWxlZC5kaXZgXG4gICR7KHsgdGhlbWUgfSkgPT4gYFxuICAgIGdyaWQtYXJlYTogc2VhcmNoO1xuICAgIG1hcmdpbi10b3A6ICR7dGhlbWUuc2l6ZVVuaXQgKiAzfXB4O1xuICAgIG1hcmdpbi1ib3R0b206ICR7dGhlbWUuc2l6ZVVuaXR9cHg7XG4gICAgbWFyZ2luLWxlZnQ6ICR7dGhlbWUuc2l6ZVVuaXQgKiAzfXB4O1xuICAgIG1hcmdpbi1yaWdodDogJHt0aGVtZS5zaXplVW5pdCAqIDN9cHg7XG4gICAgLmFudC1pbnB1dC1hZmZpeC13cmFwcGVyIHtcbiAgICAgIHBhZGRpbmctbGVmdDogJHt0aGVtZS5zaXplVW5pdCAqIDJ9cHg7XG4gICAgfVxuICBgfVxuYDtcblxuLyoqIFN0eWxlcyB0byBsaW5lIHVwIHByZWZpeC9zdWZmaXggaWNvbnMgaW4gdGhlIHNlYXJjaCBpbnB1dCAqL1xuY29uc3QgSW5wdXRJY29uQWxpZ25tZW50ID0gc3R5bGVkLmRpdmBcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGNvbG9yOiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmNvbG9ySWNvbn07XG5gO1xuXG5jb25zdCBTZWxlY3RvckxhYmVsID0gc3R5bGVkLmJ1dHRvbmBcbiAgJHsoeyB0aGVtZSB9KSA9PiBgXG4gICAgYWxsOiB1bnNldDsgLy8gcmVtb3ZlIGRlZmF1bHQgYnV0dG9uIHN0eWxlc1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICBtYXJnaW46ICR7dGhlbWUuc2l6ZVVuaXR9cHggMDtcbiAgICBwYWRkaW5nOiAwICR7dGhlbWUuc2l6ZVVuaXR9cHg7XG4gICAgYm9yZGVyLXJhZGl1czogJHt0aGVtZS5ib3JkZXJSYWRpdXN9cHg7XG4gICAgbGluZS1oZWlnaHQ6IDJlbTtcbiAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICBjb2xvcjogJHt0aGVtZS5jb2xvclRleHR9O1xuXG4gICAgJjpmb2N1cyB7XG4gICAgICBvdXRsaW5lOiBpbml0aWFsO1xuICAgIH1cblxuICAgICYuc2VsZWN0ZWQge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt0aGVtZS5jb2xvclByaW1hcnl9O1xuICAgICAgY29sb3I6ICR7dGhlbWUuY29sb3JUZXh0TGlnaHRTb2xpZH07XG5cbiAgICAgIHN2ZyB7XG4gICAgICAgIGNvbG9yOiAke3RoZW1lLmNvbG9yVGV4dExpZ2h0U29saWR9O1xuICAgICAgfVxuXG4gICAgICAmOmhvdmVyIHtcbiAgICAgICAgLmNhbmNlbCB7XG4gICAgICAgICAgdmlzaWJpbGl0eTogdmlzaWJsZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgICYgPiBzcGFuW3JvbGU9XCJpbWdcIl0ge1xuICAgICAgbWFyZ2luLXJpZ2h0OiAke3RoZW1lLnNpemVVbml0ICogMn1weDtcbiAgICB9XG5cbiAgICAuY2FuY2VsIHtcbiAgICAgIHZpc2liaWxpdHk6IGhpZGRlbjtcbiAgICB9XG4gIGB9XG5gO1xuXG5jb25zdCBJY29uc1BhbmUgPSBzdHlsZWQuZGl2YFxuICBvdmVyZmxvdzogYXV0bztcbiAgZGlzcGxheTogZ3JpZDtcbiAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoXG4gICAgYXV0by1maWxsLFxuICAgICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuc2l6ZVVuaXQgKiBUSFVNQk5BSUxfR1JJRF9VTklUU31weFxuICApO1xuICBncmlkLWF1dG8tcm93czogbWF4LWNvbnRlbnQ7XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtZXZlbmx5O1xuICBncmlkLWdhcDogJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS5zaXplVW5pdCAqIDJ9cHg7XG4gIGp1c3RpZnktaXRlbXM6IGNlbnRlcjtcbiAgLy8gZm9yIHNvbWUgcmVhc29uIHRoaXMgcGFkZGluZyBkb2Vzbid0IHNlZW0gdG8gYXBwbHkgYXQgdGhlIGJvdHRvbSBvZiB0aGUgY29udGFpbmVyLiBXaHkgaXMgYSBteXN0ZXJ5LlxuICBwYWRkaW5nOiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLnNpemVVbml0ICogMn1weDtcbmA7XG5cbmNvbnN0IERldGFpbHNQYW5lID0gKHRoZW1lOiBTdXBlcnNldFRoZW1lKSA9PiBjc3NgXG4gIGdyaWQtYXJlYTogZGV0YWlscztcbiAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICR7dGhlbWUuY29sb3JCb3JkZXJ9O1xuYDtcblxuY29uc3QgRGV0YWlsc1BvcHVsYXRlZCA9ICh0aGVtZTogU3VwZXJzZXRUaGVtZSkgPT4gY3NzYFxuICBwYWRkaW5nOiAke3RoZW1lLnNpemVVbml0ICogNH1weDtcbiAgZGlzcGxheTogZ3JpZDtcbiAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyO1xuICBncmlkLXRlbXBsYXRlLXJvd3M6IGF1dG8gYXV0byAxZnI7XG4gIGdyaWQtdGVtcGxhdGUtYXJlYXM6XG4gICAgJ3Zpei1uYW1lIGV4YW1wbGVzLWhlYWRlcidcbiAgICAndml6LXRhZ3MgZXhhbXBsZXMnXG4gICAgJ2Rlc2NyaXB0aW9uIGV4YW1wbGVzJztcbmA7XG5cbi8vIG92ZXJmbG93IGhpZGRlbiBvbiB0aGUgZGV0YWlscyBwYW5lIGFuZCBvdmVyZmxvdyBhdXRvIG9uIHRoZSBkZXNjcmlwdGlvblxuLy8gKHBsdXMgZ3JpZCBsYXlvdXQpIGVuYWJsZXMgdGhlIGRlc2NyaXB0aW9uIHRvIHNjcm9sbCB3aGlsZSB0aGUgaGVhZGVyIHN0YXlzIGluIHBsYWNlLlxuY29uc3QgVGFnc1dyYXBwZXIgPSBzdHlsZWQuZGl2YFxuICBncmlkLWFyZWE6IHZpei10YWdzO1xuICB3aWR0aDogJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS5zaXplVW5pdCAqIDEyMH1weDtcbiAgcGFkZGluZy1yaWdodDogJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS5zaXplVW5pdCAqIDE0fXB4O1xuICBwYWRkaW5nLWJvdHRvbTogJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS5zaXplVW5pdCAqIDJ9cHg7XG5gO1xuXG5jb25zdCBEZXNjcmlwdGlvbiA9IHN0eWxlZC5wYFxuICBncmlkLWFyZWE6IGRlc2NyaXB0aW9uO1xuICBvdmVyZmxvdzogYXV0bztcbiAgcGFkZGluZy1yaWdodDogJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS5zaXplVW5pdCAqIDE0fXB4O1xuICBtYXJnaW46IDA7XG5gO1xuXG5jb25zdCBFeGFtcGxlcyA9IHN0eWxlZC5kaXZgXG4gIGdyaWQtYXJlYTogZXhhbXBsZXM7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gIGZsZXgtd3JhcDogbm93cmFwO1xuICBvdmVyZmxvdzogYXV0bztcbiAgZ2FwOiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLnNpemVVbml0ICogNH1weDtcblxuICBpbWcge1xuICAgIGhlaWdodDogMTAwJTtcbiAgICBib3JkZXItcmFkaXVzOiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmJvcmRlclJhZGl1c31weDtcbiAgICBib3JkZXI6IDFweCBzb2xpZCAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmNvbG9yQm9yZGVyfTtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmNvbG9yQmdDb250YWluZXJ9O1xuICB9XG5gO1xuXG5jb25zdCB0aHVtYm5haWxDb250YWluZXJDc3MgPSAodGhlbWU6IFN1cGVyc2V0VGhlbWUpID0+IGNzc2BcbiAgY3Vyc29yOiBwb2ludGVyO1xuICB3aWR0aDogJHt0aGVtZS5zaXplVW5pdCAqIFRIVU1CTkFJTF9HUklEX1VOSVRTfXB4O1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIG91dGxpbmU6IG5vbmU7IC8qIFJlbW92ZSBmb2N1cyBvdXRsaW5lIHRvIHNob3cgb25seSBzZWxlY3RlZCBzdGF0ZSAqL1xuXG4gIGltZyB7XG4gICAgbWluLXdpZHRoOiAke3RoZW1lLnNpemVVbml0ICogVEhVTUJOQUlMX0dSSURfVU5JVFN9cHg7XG4gICAgbWluLWhlaWdodDogJHt0aGVtZS5zaXplVW5pdCAqIFRIVU1CTkFJTF9HUklEX1VOSVRTfXB4O1xuICAgIGJvcmRlcjogMXB4IHNvbGlkICR7dGhlbWUuY29sb3JCb3JkZXJ9O1xuICAgIGJvcmRlci1yYWRpdXM6ICR7dGhlbWUuYm9yZGVyUmFkaXVzfXB4O1xuICAgIHRyYW5zaXRpb246IGJvcmRlci1jb2xvciAke3RoZW1lLm1vdGlvbkR1cmF0aW9uTWlkfTtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3RoZW1lLmNvbG9yQmdDb250YWluZXJ9O1xuICB9XG5cbiAgJi5zZWxlY3RlZCBpbWcge1xuICAgIGJvcmRlcjogMnB4IHNvbGlkICR7dGhlbWUuY29sb3JQcmltYXJ5Qm9yZGVyfTtcbiAgfVxuXG4gICY6aG92ZXI6bm90KC5zZWxlY3RlZCkgaW1nIHtcbiAgICBib3JkZXI6IDFweCBzb2xpZCAke3RoZW1lLmNvbG9yQm9yZGVyfTtcbiAgfVxuXG4gIC52aXp0eXBlLWxhYmVsIHtcbiAgICBtYXJnaW4tdG9wOiAke3RoZW1lLnNpemVVbml0ICogMn1weDtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIH1cbmA7XG5cbmNvbnN0IEhpZ2hsaWdodExhYmVsID0gc3R5bGVkLmRpdmBcbiAgJHsoeyB0aGVtZSB9KSA9PiBgXG4gICAgYm9yZGVyOiAxcHggc29saWQgJHt0aGVtZS5jb2xvclByaW1hcnlUZXh0fTtcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgIGJvcmRlci1yYWRpdXM6ICR7dGhlbWUuYm9yZGVyUmFkaXVzfXB4O1xuICAgIGJhY2tncm91bmQ6ICR7dGhlbWUuY29sb3JCZ0NvbnRhaW5lcn07XG4gICAgbGluZS1oZWlnaHQ6ICR7dGhlbWUuc2l6ZVVuaXQgKiAyLjV9cHg7XG4gICAgY29sb3I6ICR7dGhlbWUuY29sb3JQcmltYXJ5VGV4dH07XG4gICAgZm9udC1zaXplOiAke3RoZW1lLmZvbnRTaXplU019cHg7XG4gICAgZm9udC13ZWlnaHQ6ICR7dGhlbWUuZm9udFdlaWdodFN0cm9uZ307XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIHBhZGRpbmc6ICR7dGhlbWUuc2l6ZVVuaXQgKiAwLjV9cHggJHt0aGVtZS5zaXplVW5pdH1weDtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG5cbiAgICBkaXYge1xuICAgICAgdHJhbnNmb3JtOiBzY2FsZSgwLjgzLDAuODMpO1xuICAgIH1cbiAgYH1cbmA7XG5cbmNvbnN0IFRodW1ibmFpbExhYmVsV3JhcHBlciA9IHN0eWxlZC5kaXZgXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgcmlnaHQ6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuc2l6ZVVuaXR9cHg7XG4gIHRvcDogJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS5zaXplVW5pdCAqIDE5fXB4O1xuYDtcblxuY29uc3QgVGl0bGVMYWJlbFdyYXBwZXIgPSBzdHlsZWQuZGl2YFxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2sgIWltcG9ydGFudDtcbiAgbWFyZ2luLWxlZnQ6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuc2l6ZVVuaXQgKiAyfXB4O1xuYDtcblxuaW50ZXJmYWNlIFRodW1ibmFpbFByb3BzIHtcbiAgZW50cnk6IFZpekVudHJ5O1xuICBzZWxlY3RlZFZpejogc3RyaW5nIHwgbnVsbDtcbiAgc2V0U2VsZWN0ZWRWaXo6ICh2aXo6IHN0cmluZykgPT4gdm9pZDtcbiAgb25Eb3VibGVDbGljazogKCkgPT4gdm9pZDtcbn1cblxuY29uc3QgVGh1bWJuYWlsOiBGQzxUaHVtYm5haWxQcm9wcz4gPSAoe1xuICBlbnRyeSxcbiAgc2VsZWN0ZWRWaXosXG4gIHNldFNlbGVjdGVkVml6LFxuICBvbkRvdWJsZUNsaWNrLFxufSkgPT4ge1xuICBjb25zdCB0aGVtZSA9IHVzZVRoZW1lKCk7XG4gIGNvbnN0IGlzRGFya01vZGUgPSBpc1RoZW1lRGFyayh0aGVtZSk7XG4gIGNvbnN0IHsga2V5LCB2YWx1ZTogdHlwZSB9ID0gZW50cnk7XG4gIGNvbnN0IGlzU2VsZWN0ZWQgPSBzZWxlY3RlZFZpeiA9PT0gZW50cnkua2V5O1xuXG4gIGNvbnN0IGhhbmRsZUtleURvd24gPSAoZXZlbnQ6IFJlYWN0LktleWJvYXJkRXZlbnQpID0+IHtcbiAgICBpZiAoZXZlbnQua2V5ID09PSAnRW50ZXInIHx8IGV2ZW50LmtleSA9PT0gJyAnKSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgc2V0U2VsZWN0ZWRWaXooa2V5KTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlRm9jdXMgPSAoKSA9PiB7XG4gICAgLy8gQXV0by1zZWxlY3QgY2hhcnQgd2hlbiB0YWJiZWQgdG9cbiAgICBzZXRTZWxlY3RlZFZpeihrZXkpO1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPGRpdlxuICAgICAgcm9sZT1cImJ1dHRvblwiXG4gICAgICAvLyB1c2luZyBjc3MgaW5zdGVhZCBvZiBhIHN0eWxlZCBjb21wb25lbnQgdG8gcHJlc2VydmVcbiAgICAgIC8vIHRoZSBkYXRhLXRlc3QgYXR0cmlidXRlXG4gICAgICBjc3M9e3RodW1ibmFpbENvbnRhaW5lckNzcyh0aGVtZSl9XG4gICAgICB0YWJJbmRleD17MH1cbiAgICAgIGNsYXNzTmFtZT17aXNTZWxlY3RlZCA/ICdzZWxlY3RlZCcgOiAnJ31cbiAgICAgIG9uQ2xpY2s9eygpID0+IHNldFNlbGVjdGVkVml6KGtleSl9XG4gICAgICBvbkRvdWJsZUNsaWNrPXtvbkRvdWJsZUNsaWNrfVxuICAgICAgb25LZXlEb3duPXtoYW5kbGVLZXlEb3dufVxuICAgICAgb25Gb2N1cz17aGFuZGxlRm9jdXN9XG4gICAgICBkYXRhLXRlc3Q9XCJ2aXp0eXBlLXNlbGVjdG9yLWNvbnRhaW5lclwiXG4gICAgPlxuICAgICAgPGltZ1xuICAgICAgICBhbHQ9e3R5cGUubmFtZX1cbiAgICAgICAgd2lkdGg9XCIxMDAlXCJcbiAgICAgICAgY2xhc3NOYW1lPXtgdml6dHlwZS1zZWxlY3RvciAke2lzU2VsZWN0ZWQgPyAnc2VsZWN0ZWQnIDogJyd9YH1cbiAgICAgICAgc3JjPXtcbiAgICAgICAgICBpc0RhcmtNb2RlICYmIHR5cGUudGh1bWJuYWlsRGFyayA/IHR5cGUudGh1bWJuYWlsRGFyayA6IHR5cGUudGh1bWJuYWlsXG4gICAgICAgIH1cbiAgICAgIC8+XG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT1cInZpenR5cGUtbGFiZWxcIlxuICAgICAgICBkYXRhLXRlc3Q9e2Ake1ZJWl9UWVBFX0NPTlRST0xfVEVTVF9JRH1fX3ZpenR5cGUtbGFiZWxgfVxuICAgICAgPlxuICAgICAgICB7dHlwZS5uYW1lfVxuICAgICAgPC9kaXY+XG4gICAgICB7dHlwZS5sYWJlbCAmJiAoXG4gICAgICAgIDxUaHVtYm5haWxMYWJlbFdyYXBwZXI+XG4gICAgICAgICAgPEhpZ2hsaWdodExhYmVsPlxuICAgICAgICAgICAgPGRpdj57dCh0eXBlLmxhYmVsKX08L2Rpdj5cbiAgICAgICAgICA8L0hpZ2hsaWdodExhYmVsPlxuICAgICAgICA8L1RodW1ibmFpbExhYmVsV3JhcHBlcj5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5pbnRlcmZhY2UgVGh1bWJuYWlsR2FsbGVyeVByb3BzIHtcbiAgdml6RW50cmllczogVml6RW50cnlbXTtcbiAgc2VsZWN0ZWRWaXo6IHN0cmluZyB8IG51bGw7XG4gIHNldFNlbGVjdGVkVml6OiAodml6OiBzdHJpbmcpID0+IHZvaWQ7XG4gIG9uRG91YmxlQ2xpY2s6ICgpID0+IHZvaWQ7XG59XG5cbi8qKiBBIGxpc3Qgb2Ygdml6IHRodW1ibmFpbHMsIHVzZWQgd2l0aGluIHRoZSB2aXogcGlja2VyIG1vZGFsICovXG5jb25zdCBUaHVtYm5haWxHYWxsZXJ5OiBGQzxUaHVtYm5haWxHYWxsZXJ5UHJvcHM+ID0gKHtcbiAgdml6RW50cmllcyxcbiAgLi4ucHJvcHNcbn0pID0+IChcbiAgPEljb25zUGFuZSBkYXRhLXRlc3Q9e2Ake1ZJWl9UWVBFX0NPTlRST0xfVEVTVF9JRH1fX3Zpei1yb3dgfT5cbiAgICB7dml6RW50cmllcy5tYXAoZW50cnkgPT4gKFxuICAgICAgPFRodW1ibmFpbCBrZXk9e2VudHJ5LmtleX0gey4uLnByb3BzfSBlbnRyeT17ZW50cnl9IC8+XG4gICAgKSl9XG4gIDwvSWNvbnNQYW5lPlxuKTtcblxuY29uc3QgU2VsZWN0b3I6IEZDPHtcbiAgc2VsZWN0b3I6IHN0cmluZztcbiAgc2VjdGlvbklkOiBzdHJpbmc7XG4gIGljb246IFJlYWN0RWxlbWVudDtcbiAgaXNTZWxlY3RlZDogYm9vbGVhbjtcbiAgb25DbGljazogKHNlbGVjdG9yOiBzdHJpbmcsIHNlY3Rpb25JZDogc3RyaW5nKSA9PiB2b2lkO1xuICBjbGFzc05hbWU/OiBzdHJpbmc7XG59PiA9ICh7IHNlbGVjdG9yLCBzZWN0aW9uSWQsIGljb24sIGlzU2VsZWN0ZWQsIG9uQ2xpY2ssIGNsYXNzTmFtZSB9KSA9PiB7XG4gIGNvbnN0IGJ0blJlZiA9IHVzZVJlZjxIVE1MQnV0dG9uRWxlbWVudD4obnVsbCk7XG5cbiAgLy8gc2VlIEVsZW1lbnQuc2Nyb2xsSW50b1ZpZXdJZk5lZWRlZCgpXG4gIC8vIHNlZTogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0VsZW1lbnQvc2Nyb2xsSW50b1ZpZXdJZk5lZWRlZFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChpc1NlbGVjdGVkKSB7XG4gICAgICAvLyBXZSBuZWVkIHRvIHdhaXQgZm9yIHRoZSBtb2RhbCB0byBvcGVuIGFuZCB0aGVuIHNjcm9sbCwgc28gd2UgcHV0IGl0IGluIHRoZSBtaWNyb3Rhc2sgcXVldWVcbiAgICAgIHF1ZXVlTWljcm90YXNrKCgpID0+XG4gICAgICAgIHNjcm9sbEludG9WaWV3KGJ0blJlZi5jdXJyZW50IGFzIEhUTUxCdXR0b25FbGVtZW50LCB7XG4gICAgICAgICAgYmVoYXZpb3I6ICdzbW9vdGgnLFxuICAgICAgICAgIHNjcm9sbE1vZGU6ICdpZi1uZWVkZWQnLFxuICAgICAgICB9KSxcbiAgICAgICk7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgcmV0dXJuIChcbiAgICA8U2VsZWN0b3JMYWJlbFxuICAgICAgYXJpYS1sYWJlbD17c2VsZWN0b3J9XG4gICAgICBhcmlhLXNlbGVjdGVkPXtpc1NlbGVjdGVkfVxuICAgICAgcmVmPXtidG5SZWZ9XG4gICAgICBrZXk9e3NlbGVjdG9yfVxuICAgICAgbmFtZT17c2VsZWN0b3J9XG4gICAgICBjbGFzc05hbWU9e2N4KGNsYXNzTmFtZSwgaXNTZWxlY3RlZCAmJiAnc2VsZWN0ZWQnKX1cbiAgICAgIG9uQ2xpY2s9eygpID0+IG9uQ2xpY2soc2VsZWN0b3IsIHNlY3Rpb25JZCl9XG4gICAgICB0YWJJbmRleD17MH1cbiAgICAgIHJvbGU9XCJ0YWJcIlxuICAgID5cbiAgICAgIHtpY29ufVxuICAgICAge3Qoc2VsZWN0b3IpfVxuICAgIDwvU2VsZWN0b3JMYWJlbD5cbiAgKTtcbn07XG5cbmNvbnN0IGRvZXNWaXpNYXRjaFNlbGVjdG9yID0gKHZpejogQ2hhcnRNZXRhZGF0YSwgc2VsZWN0b3I6IHN0cmluZykgPT5cbiAgc2VsZWN0b3IgPT09IHZpei5jYXRlZ29yeSB8fFxuICAoc2VsZWN0b3IgPT09IE9USEVSX0NBVEVHT1JZICYmIHZpei5jYXRlZ29yeSA9PSBudWxsKSB8fFxuICAodml6LnRhZ3MgfHwgW10pLmluZGV4T2Yoc2VsZWN0b3IpID4gLTE7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFZpelR5cGVHYWxsZXJ5KHByb3BzOiBWaXpUeXBlR2FsbGVyeVByb3BzKSB7XG4gIGNvbnN0IHRoZW1lID0gdXNlVGhlbWUoKTtcbiAgY29uc3QgaXNEYXJrTW9kZSA9IGlzVGhlbWVEYXJrKHRoZW1lKTtcbiAgY29uc3QgeyBzZWxlY3RlZFZpeiwgb25DaGFuZ2UsIG9uRG91YmxlQ2xpY2ssIGNsYXNzTmFtZSwgZGVueUxpc3QgfSA9IHByb3BzO1xuICBjb25zdCB7IG1vdW50ZWRQbHVnaW5NZXRhZGF0YSB9ID0gdXNlUGx1Z2luQ29udGV4dCgpO1xuICBjb25zdCBzZWFyY2hJbnB1dFJlZiA9IHVzZVJlZjxIVE1MSW5wdXRFbGVtZW50PigpO1xuICBjb25zdCBbc2VhcmNoSW5wdXRWYWx1ZSwgc2V0U2VhcmNoSW5wdXRWYWx1ZV0gPSB1c2VTdGF0ZSgnJyk7XG4gIGNvbnN0IFtpc1NlYXJjaEZvY3VzZWQsIHNldElzU2VhcmNoRm9jdXNlZF0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgaXNBY3RpdmVseVNlYXJjaGluZyA9IGlzU2VhcmNoRm9jdXNlZCAmJiAhIXNlYXJjaElucHV0VmFsdWU7XG5cbiAgY29uc3Qgc2VsZWN0ZWRWaXpNZXRhZGF0YTogQ2hhcnRNZXRhZGF0YSB8IG51bGwgPSBzZWxlY3RlZFZpelxuICAgID8gbW91bnRlZFBsdWdpbk1ldGFkYXRhW3NlbGVjdGVkVml6XVxuICAgIDogbnVsbDtcblxuICBjb25zdCBjaGFydE1ldGFkYXRhOiBWaXpFbnRyeVtdID0gdXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgcmVzdWx0ID0gT2JqZWN0LmVudHJpZXMobW91bnRlZFBsdWdpbk1ldGFkYXRhKVxuICAgICAgLm1hcCgoW2tleSwgdmFsdWVdKSA9PiAoeyBrZXksIHZhbHVlIH0pKVxuICAgICAgLmZpbHRlcigoeyBrZXkgfSkgPT4gIWRlbnlMaXN0LmluY2x1ZGVzKGtleSkpXG4gICAgICAuZmlsdGVyKFxuICAgICAgICAoeyB2YWx1ZSB9KSA9PlxuICAgICAgICAgIG5hdGl2ZUZpbHRlckdhdGUodmFsdWUuYmVoYXZpb3JzIHx8IFtdKSAmJiAhdmFsdWUuZGVwcmVjYXRlZCxcbiAgICAgIClcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBhLnZhbHVlLm5hbWUubG9jYWxlQ29tcGFyZShiLnZhbHVlLm5hbWUpKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9LCBbbW91bnRlZFBsdWdpbk1ldGFkYXRhLCBkZW55TGlzdF0pO1xuXG4gIGNvbnN0IGNoYXJ0c0J5Q2F0ZWdvcnkgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCByZXN1bHQ6IFJlY29yZDxzdHJpbmcsIFZpekVudHJ5W10+ID0ge307XG4gICAgY2hhcnRNZXRhZGF0YS5mb3JFYWNoKGVudHJ5ID0+IHtcbiAgICAgIGNvbnN0IGNhdGVnb3J5ID0gZW50cnkudmFsdWUuY2F0ZWdvcnkgfHwgT1RIRVJfQ0FURUdPUlk7XG4gICAgICBpZiAoIXJlc3VsdFtjYXRlZ29yeV0pIHtcbiAgICAgICAgcmVzdWx0W2NhdGVnb3J5XSA9IFtdO1xuICAgICAgfVxuICAgICAgcmVzdWx0W2NhdGVnb3J5XS5wdXNoKGVudHJ5KTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9LCBbY2hhcnRNZXRhZGF0YV0pO1xuXG4gIGNvbnN0IGNhdGVnb3JpZXMgPSB1c2VNZW1vKFxuICAgICgpID0+XG4gICAgICBPYmplY3Qua2V5cyhjaGFydHNCeUNhdGVnb3J5KS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIC8vIG1ha2Ugc3VyZSBPdGhlciBnb2VzIGF0IHRoZSBlbmRcbiAgICAgICAgaWYgKGEgPT09IE9USEVSX0NBVEVHT1JZKSByZXR1cm4gMTtcbiAgICAgICAgaWYgKGIgPT09IE9USEVSX0NBVEVHT1JZKSByZXR1cm4gLTE7XG4gICAgICAgIC8vIHNvcnQgYWxwaGFiZXRpY2FsbHlcbiAgICAgICAgcmV0dXJuIGEubG9jYWxlQ29tcGFyZShiKTtcbiAgICAgIH0pLFxuICAgIFtjaGFydHNCeUNhdGVnb3J5XSxcbiAgKTtcblxuICBjb25zdCBjaGFydHNCeVRhZ3MgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCByZXN1bHQ6IFJlY29yZDxzdHJpbmcsIFZpekVudHJ5W10+ID0ge307XG4gICAgY2hhcnRNZXRhZGF0YS5mb3JFYWNoKGVudHJ5ID0+IHtcbiAgICAgIGNvbnN0IHRhZ3MgPSBlbnRyeS52YWx1ZS50YWdzIHx8IFtdO1xuICAgICAgdGFncy5mb3JFYWNoKHRhZyA9PiB7XG4gICAgICAgIGlmICghcmVzdWx0W3RhZ10pIHtcbiAgICAgICAgICByZXN1bHRbdGFnXSA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdFt0YWddLnB1c2goZW50cnkpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSwgW2NoYXJ0TWV0YWRhdGFdKTtcblxuICBjb25zdCB0YWdzID0gdXNlTWVtbyhcbiAgICAoKSA9PlxuICAgICAgT2JqZWN0LmtleXMoY2hhcnRzQnlUYWdzKVxuICAgICAgICAuc29ydCgoYSwgYikgPT5cbiAgICAgICAgICAvLyBzb3J0IGFscGhhYmV0aWNhbGx5XG4gICAgICAgICAgYS5sb2NhbGVDb21wYXJlKGIpLFxuICAgICAgICApXG4gICAgICAgIC5maWx0ZXIodGFnID0+IFJFQ09NTUVOREVEX1RBR1MuaW5kZXhPZih0YWcpID09PSAtMSksXG4gICAgW2NoYXJ0c0J5VGFnc10sXG4gICk7XG5cbiAgY29uc3Qgc29ydGVkTWV0YWRhdGEgPSB1c2VNZW1vKFxuICAgICgpID0+XG4gICAgICBjaGFydE1ldGFkYXRhLnNvcnQoKGEsIGIpID0+IGEudmFsdWUubmFtZS5sb2NhbGVDb21wYXJlKGIudmFsdWUubmFtZSkpLFxuICAgIFtjaGFydE1ldGFkYXRhXSxcbiAgKTtcblxuICBjb25zdCBbYWN0aXZlU2VsZWN0b3IsIHNldEFjdGl2ZVNlbGVjdG9yXSA9IHVzZVN0YXRlPHN0cmluZz4oXG4gICAgKCkgPT4gc2VsZWN0ZWRWaXpNZXRhZGF0YT8uY2F0ZWdvcnkgfHwgRkVBVFVSRUQsXG4gICk7XG5cbiAgY29uc3QgW2FjdGl2ZVNlY3Rpb24sIHNldEFjdGl2ZVNlY3Rpb25dID0gdXNlU3RhdGU8c3RyaW5nPigoKSA9PlxuICAgIHNlbGVjdGVkVml6TWV0YWRhdGE/LmNhdGVnb3J5ID8gU2VjdGlvbnMuQ2F0ZWdvcnkgOiBTZWN0aW9ucy5GZWF0dXJlZCxcbiAgKTtcblxuICAvLyBnZXQgYSBmdXNlIGluc3RhbmNlIGZvciBmdXp6eSBzZWFyY2hcbiAgY29uc3QgZnVzZSA9IHVzZU1lbW8oXG4gICAgKCkgPT5cbiAgICAgIG5ldyBGdXNlKGNoYXJ0TWV0YWRhdGEsIHtcbiAgICAgICAgaWdub3JlTG9jYXRpb246IHRydWUsXG4gICAgICAgIHRocmVzaG9sZDogMC4zLFxuICAgICAgICBrZXlzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ3ZhbHVlLm5hbWUnLFxuICAgICAgICAgICAgd2VpZ2h0OiA0LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ3ZhbHVlLnRhZ3MnLFxuICAgICAgICAgICAgd2VpZ2h0OiAyLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgJ3ZhbHVlLmRlc2NyaXB0aW9uJyxcbiAgICAgICAgXSxcbiAgICAgIH0pLFxuICAgIFtjaGFydE1ldGFkYXRhXSxcbiAgKTtcblxuICBjb25zdCBzZWFyY2hSZXN1bHRzID0gdXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKHNlYXJjaElucHV0VmFsdWUudHJpbSgpID09PSAnJykge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICByZXR1cm4gZnVzZVxuICAgICAgLnNlYXJjaChzZWFyY2hJbnB1dFZhbHVlKVxuICAgICAgLm1hcChyZXN1bHQgPT4gcmVzdWx0Lml0ZW0pXG4gICAgICAuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICBjb25zdCBhTGFiZWwgPSBhLnZhbHVlPy5sYWJlbDtcbiAgICAgICAgY29uc3QgYkxhYmVsID0gYi52YWx1ZT8ubGFiZWw7XG4gICAgICAgIGNvbnN0IGFPcmRlciA9XG4gICAgICAgICAgYUxhYmVsICYmIGNoYXJ0TGFiZWxXZWlnaHRbYUxhYmVsXVxuICAgICAgICAgICAgPyBjaGFydExhYmVsV2VpZ2h0W2FMYWJlbF0ud2VpZ2h0XG4gICAgICAgICAgICA6IDA7XG4gICAgICAgIGNvbnN0IGJPcmRlciA9XG4gICAgICAgICAgYkxhYmVsICYmIGNoYXJ0TGFiZWxXZWlnaHRbYkxhYmVsXVxuICAgICAgICAgICAgPyBjaGFydExhYmVsV2VpZ2h0W2JMYWJlbF0ud2VpZ2h0XG4gICAgICAgICAgICA6IDA7XG4gICAgICAgIHJldHVybiBiT3JkZXIgLSBhT3JkZXI7XG4gICAgICB9KTtcbiAgfSwgW3NlYXJjaElucHV0VmFsdWUsIGZ1c2VdKTtcblxuICBjb25zdCBmb2N1c1NlYXJjaCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICAvLyBcInN0YXJ0IHNlYXJjaGluZ1wiIGlzIGFjdHVhbGx5IGEgdHdvLXN0YWdlIHByb2Nlc3MuXG4gICAgLy8gV2hlbiB5b3UgZmlyc3QgY2xpY2sgb24gdGhlIHNlYXJjaCBiYXIsIHRoZSBpbnB1dCBpcyBmb2N1c2VkIGFuZCBub3RoaW5nIGVsc2UgaGFwcGVucy5cbiAgICAvLyBPbmNlIHlvdSBiZWdpbiB0eXBpbmcsIHRoZSBzZWxlY3RlZCBjYXRlZ29yeSBpcyBjbGVhcmVkIGFuZCB0aGUgZGlzcGxheWVkIHZpeiBlbnRyaWVzIGNoYW5nZS5cbiAgICBzZXRJc1NlYXJjaEZvY3VzZWQodHJ1ZSk7XG4gIH0sIFtdKTtcblxuICAvLyBBdXRvLWZvY3VzIHRoZSBzZWFyY2ggaW5wdXQgd2hlbiB0aGUgbW9kYWwgb3BlbnNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoc2VhcmNoSW5wdXRSZWYuY3VycmVudCkge1xuICAgICAgc2VhcmNoSW5wdXRSZWYuY3VycmVudC5mb2N1cygpO1xuICAgIH1cbiAgfSwgW10pO1xuXG4gIGNvbnN0IGNoYW5nZVNlYXJjaDogQ2hhbmdlRXZlbnRIYW5kbGVyPEhUTUxJbnB1dEVsZW1lbnQ+ID0gdXNlQ2FsbGJhY2soXG4gICAgZXZlbnQgPT4gc2V0U2VhcmNoSW5wdXRWYWx1ZShldmVudC50YXJnZXQudmFsdWUpLFxuICAgIFtdLFxuICApO1xuXG4gIGNvbnN0IHN0b3BTZWFyY2hpbmcgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgLy8gc3RvcHBpbmcgYSBzZWFyY2ggdGFrZXMgeW91IGJhY2sgdG8gdGhlIGNhdGVnb3J5IHlvdSB3ZXJlIGxvb2tpbmcgYXQgYmVmb3JlLlxuICAgIC8vIFVubGlrZSBmb2N1c1NlYXJjaCwgdGhpcyBpcyBhIHNpbXBsZSBvbmUtc3RlcCBwcm9jZXNzLlxuICAgIHNldElzU2VhcmNoRm9jdXNlZChmYWxzZSk7XG4gICAgc2V0U2VhcmNoSW5wdXRWYWx1ZSgnJyk7XG4gICAgc2VhcmNoSW5wdXRSZWYuY3VycmVudCEuYmx1cigpO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgY2xpY2tTZWxlY3RvciA9IHVzZUNhbGxiYWNrKFxuICAgIChzZWxlY3Rvcjogc3RyaW5nLCBzZWN0aW9uSWQ6IHN0cmluZykgPT4ge1xuICAgICAgaWYgKGlzU2VhcmNoRm9jdXNlZCkge1xuICAgICAgICBzdG9wU2VhcmNoaW5nKCk7XG4gICAgICB9XG4gICAgICBzZXRBY3RpdmVTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgICBzZXRBY3RpdmVTZWN0aW9uKHNlY3Rpb25JZCk7XG4gICAgICAvLyBjbGVhciB0aGUgc2VsZWN0ZWQgdml6IGlmIGl0IGlzIG5vdCBwcmVzZW50IGluIHRoZSBuZXcgY2F0ZWdvcnkgb3IgdGFnc1xuICAgICAgY29uc3QgaXNTZWxlY3RlZFZpekNvbXBhdGlibGUgPVxuICAgICAgICBzZWxlY3RlZFZpek1ldGFkYXRhICYmXG4gICAgICAgIGRvZXNWaXpNYXRjaFNlbGVjdG9yKHNlbGVjdGVkVml6TWV0YWRhdGEsIHNlbGVjdG9yKTtcbiAgICAgIGlmIChzZWxlY3RvciAhPT0gYWN0aXZlU2VsZWN0b3IgJiYgIWlzU2VsZWN0ZWRWaXpDb21wYXRpYmxlKSB7XG4gICAgICAgIG9uQ2hhbmdlKG51bGwpO1xuICAgICAgfVxuICAgIH0sXG4gICAgW1xuICAgICAgc3RvcFNlYXJjaGluZyxcbiAgICAgIGlzU2VhcmNoRm9jdXNlZCxcbiAgICAgIGFjdGl2ZVNlbGVjdG9yLFxuICAgICAgc2VsZWN0ZWRWaXpNZXRhZGF0YSxcbiAgICAgIG9uQ2hhbmdlLFxuICAgIF0sXG4gICk7XG5cbiAgY29uc3Qgc2VjdGlvbk1hcCA9IHVzZU1lbW8oXG4gICAgKCkgPT4gKHtcbiAgICAgIFtTZWN0aW9ucy5DYXRlZ29yeV06IHtcbiAgICAgICAgdGl0bGU6IHQoJ0NhdGVnb3J5JyksXG4gICAgICAgIGljb246IDxJY29ucy5DYXRlZ29yeSBpY29uU2l6ZT1cIm1cIiAvPixcbiAgICAgICAgc2VsZWN0b3JzOiBjYXRlZ29yaWVzLFxuICAgICAgfSxcbiAgICAgIFtTZWN0aW9ucy5UYWdzXToge1xuICAgICAgICB0aXRsZTogdCgnVGFncycpLFxuICAgICAgICBpY29uOiA8SWNvbnMuTnVtYmVyT3V0bGluZWQgaWNvblNpemU9XCJtXCIgLz4sXG4gICAgICAgIHNlbGVjdG9yczogdGFncyxcbiAgICAgIH0sXG4gICAgfSksXG4gICAgW2NhdGVnb3JpZXMsIHRhZ3NdLFxuICApO1xuXG4gIGNvbnN0IGdldFZpekVudHJpZXNUb0Rpc3BsYXkgPSAoKSA9PiB7XG4gICAgaWYgKGlzQWN0aXZlbHlTZWFyY2hpbmcpIHtcbiAgICAgIHJldHVybiBzZWFyY2hSZXN1bHRzO1xuICAgIH1cbiAgICBpZiAoYWN0aXZlU2VsZWN0b3IgPT09IEFMTF9DSEFSVFMgJiYgYWN0aXZlU2VjdGlvbiA9PT0gU2VjdGlvbnMuQWxsQ2hhcnRzKSB7XG4gICAgICByZXR1cm4gc29ydGVkTWV0YWRhdGE7XG4gICAgfVxuICAgIGlmIChcbiAgICAgIGFjdGl2ZVNlbGVjdG9yID09PSBGRUFUVVJFRCAmJlxuICAgICAgYWN0aXZlU2VjdGlvbiA9PT0gU2VjdGlvbnMuRmVhdHVyZWQgJiZcbiAgICAgIGNoYXJ0c0J5VGFnc1tGRUFUVVJFRF1cbiAgICApIHtcbiAgICAgIHJldHVybiBjaGFydHNCeVRhZ3NbRkVBVFVSRURdO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICBhY3RpdmVTZWN0aW9uID09PSBTZWN0aW9ucy5DYXRlZ29yeSAmJlxuICAgICAgY2hhcnRzQnlDYXRlZ29yeVthY3RpdmVTZWxlY3Rvcl1cbiAgICApIHtcbiAgICAgIHJldHVybiBjaGFydHNCeUNhdGVnb3J5W2FjdGl2ZVNlbGVjdG9yXTtcbiAgICB9XG4gICAgaWYgKGFjdGl2ZVNlY3Rpb24gPT09IFNlY3Rpb25zLlRhZ3MgJiYgY2hhcnRzQnlUYWdzW2FjdGl2ZVNlbGVjdG9yXSkge1xuICAgICAgcmV0dXJuIGNoYXJ0c0J5VGFnc1thY3RpdmVTZWxlY3Rvcl07XG4gICAgfVxuICAgIHJldHVybiBbXTtcbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxWaXpQaWNrZXJMYXlvdXRcbiAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lfVxuICAgICAgaXNTZWxlY3RlZFZpek1ldGFkYXRhPXtCb29sZWFuKHNlbGVjdGVkVml6TWV0YWRhdGEpfVxuICAgID5cbiAgICAgIDxMZWZ0UGFuZSBhcmlhLWxhYmVsPXt0KCdDaG9vc2UgY2hhcnQgdHlwZScpfSByb2xlPVwidGFibGlzdFwiPlxuICAgICAgICA8U2VsZWN0b3JcbiAgICAgICAgICBjc3M9eyh7IHNpemVVbml0IH0pID0+XG4gICAgICAgICAgICAvLyBhZGp1c3Qgc3R5bGUgZm9yIG5vdCBiZWluZyBpbnNpZGUgYSBjb2xsYXBzZVxuICAgICAgICAgICAgY3NzYFxuICAgICAgICAgICAgICBtYXJnaW46ICR7c2l6ZVVuaXQgKiAyfXB4O1xuICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAwO1xuICAgICAgICAgICAgYFxuICAgICAgICAgIH1cbiAgICAgICAgICBzZWN0aW9uSWQ9e1NlY3Rpb25zLkFsbENoYXJ0c31cbiAgICAgICAgICBzZWxlY3Rvcj17QUxMX0NIQVJUU31cbiAgICAgICAgICBpY29uPXs8SWNvbnMuQmFsbG90IGljb25TaXplPVwibVwiIC8+fVxuICAgICAgICAgIGlzU2VsZWN0ZWQ9e1xuICAgICAgICAgICAgIWlzQWN0aXZlbHlTZWFyY2hpbmcgJiZcbiAgICAgICAgICAgIEFMTF9DSEFSVFMgPT09IGFjdGl2ZVNlbGVjdG9yICYmXG4gICAgICAgICAgICBTZWN0aW9ucy5BbGxDaGFydHMgPT09IGFjdGl2ZVNlY3Rpb25cbiAgICAgICAgICB9XG4gICAgICAgICAgb25DbGljaz17Y2xpY2tTZWxlY3Rvcn1cbiAgICAgICAgLz5cbiAgICAgICAgPFNlbGVjdG9yXG4gICAgICAgICAgY3NzPXsoeyBzaXplVW5pdCB9KSA9PlxuICAgICAgICAgICAgLy8gYWRqdXN0IHN0eWxlIGZvciBub3QgYmVpbmcgaW5zaWRlIGEgY29sbGFwc2VcbiAgICAgICAgICAgIGNzc2BcbiAgICAgICAgICAgICAgbWFyZ2luOiAke3NpemVVbml0ICogMn1weDtcbiAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMDtcbiAgICAgICAgICAgIGBcbiAgICAgICAgICB9XG4gICAgICAgICAgc2VjdGlvbklkPXtTZWN0aW9ucy5GZWF0dXJlZH1cbiAgICAgICAgICBzZWxlY3Rvcj17RkVBVFVSRUR9XG4gICAgICAgICAgaWNvbj17PEljb25zLkZpcmVPdXRsaW5lZCBpY29uU2l6ZT1cIm1cIiAvPn1cbiAgICAgICAgICBpc1NlbGVjdGVkPXtcbiAgICAgICAgICAgICFpc0FjdGl2ZWx5U2VhcmNoaW5nICYmXG4gICAgICAgICAgICBGRUFUVVJFRCA9PT0gYWN0aXZlU2VsZWN0b3IgJiZcbiAgICAgICAgICAgIFNlY3Rpb25zLkZlYXR1cmVkID09PSBhY3RpdmVTZWN0aW9uXG4gICAgICAgICAgfVxuICAgICAgICAgIG9uQ2xpY2s9e2NsaWNrU2VsZWN0b3J9XG4gICAgICAgIC8+XG4gICAgICAgIDxDb2xsYXBzZVxuICAgICAgICAgIGV4cGFuZEljb25Qb3NpdGlvbj1cImVuZFwiXG4gICAgICAgICAgZ2hvc3RcbiAgICAgICAgICBkZWZhdWx0QWN0aXZlS2V5PXtTZWN0aW9ucy5DYXRlZ29yeX1cbiAgICAgICAgICBpdGVtcz17T2JqZWN0LmtleXMoc2VjdGlvbk1hcCkubWFwKHNlY3Rpb25JZCA9PiB7XG4gICAgICAgICAgICBjb25zdCBzZWN0aW9uID0gc2VjdGlvbk1hcFtzZWN0aW9uSWQgYXMga2V5b2YgdHlwZW9mIHNlY3Rpb25NYXBdO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBrZXk6IHNlY3Rpb25JZCxcbiAgICAgICAgICAgICAgbGFiZWw6IDxzcGFuIGNsYXNzTmFtZT1cImhlYWRlclwiPntzZWN0aW9uLnRpdGxlfTwvc3Bhbj4sXG4gICAgICAgICAgICAgIGNoaWxkcmVuOiAoXG4gICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgIHtzZWN0aW9uLnNlbGVjdG9ycy5tYXAoKHNlbGVjdG9yOiBzdHJpbmcpID0+IChcbiAgICAgICAgICAgICAgICAgICAgPFNlbGVjdG9yXG4gICAgICAgICAgICAgICAgICAgICAga2V5PXtzZWxlY3Rvcn1cbiAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Rvcj17c2VsZWN0b3J9XG4gICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbklkPXtzZWN0aW9uSWR9XG4gICAgICAgICAgICAgICAgICAgICAgaWNvbj17c2VjdGlvbi5pY29ufVxuICAgICAgICAgICAgICAgICAgICAgIGlzU2VsZWN0ZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgIWlzQWN0aXZlbHlTZWFyY2hpbmcgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yID09PSBhY3RpdmVTZWxlY3RvciAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbklkID09PSBhY3RpdmVTZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2NsaWNrU2VsZWN0b3J9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSl9XG4gICAgICAgIC8+XG4gICAgICA8L0xlZnRQYW5lPlxuXG4gICAgICA8U2VhcmNoV3JhcHBlcj5cbiAgICAgICAgPElucHV0XG4gICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgIHJlZj17c2VhcmNoSW5wdXRSZWYgYXMgYW55IC8qIGNhc3QgcmVxdWlyZWQgYmVjYXVzZSBlbW90aW9uICovfVxuICAgICAgICAgIHZhbHVlPXtzZWFyY2hJbnB1dFZhbHVlfVxuICAgICAgICAgIHBsYWNlaG9sZGVyPXt0KCdTZWFyY2ggYWxsIGNoYXJ0cycpfVxuICAgICAgICAgIG9uQ2hhbmdlPXtjaGFuZ2VTZWFyY2h9XG4gICAgICAgICAgb25Gb2N1cz17Zm9jdXNTZWFyY2h9XG4gICAgICAgICAgZGF0YS10ZXN0PXtgJHtWSVpfVFlQRV9DT05UUk9MX1RFU1RfSUR9X19zZWFyY2gtaW5wdXRgfVxuICAgICAgICAgIHByZWZpeD17XG4gICAgICAgICAgICA8SW5wdXRJY29uQWxpZ25tZW50PlxuICAgICAgICAgICAgICA8SWNvbnMuU2VhcmNoT3V0bGluZWQgaWNvblNpemU9XCJtXCIgLz5cbiAgICAgICAgICAgIDwvSW5wdXRJY29uQWxpZ25tZW50PlxuICAgICAgICAgIH1cbiAgICAgICAgICBzdWZmaXg9e1xuICAgICAgICAgICAgPElucHV0SWNvbkFsaWdubWVudD5cbiAgICAgICAgICAgICAge3NlYXJjaElucHV0VmFsdWUgJiYgKFxuICAgICAgICAgICAgICAgIDxJY29ucy5DbG9zZU91dGxpbmVkIGljb25TaXplPVwibVwiIG9uQ2xpY2s9e3N0b3BTZWFyY2hpbmd9IC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L0lucHV0SWNvbkFsaWdubWVudD5cbiAgICAgICAgICB9XG4gICAgICAgIC8+XG4gICAgICA8L1NlYXJjaFdyYXBwZXI+XG5cbiAgICAgIDxSaWdodFBhbmU+XG4gICAgICAgIDxUaHVtYm5haWxHYWxsZXJ5XG4gICAgICAgICAgdml6RW50cmllcz17Z2V0Vml6RW50cmllc1RvRGlzcGxheSgpfVxuICAgICAgICAgIHNlbGVjdGVkVml6PXtzZWxlY3RlZFZpen1cbiAgICAgICAgICBzZXRTZWxlY3RlZFZpej17b25DaGFuZ2V9XG4gICAgICAgICAgb25Eb3VibGVDbGljaz17b25Eb3VibGVDbGlja31cbiAgICAgICAgLz5cbiAgICAgIDwvUmlnaHRQYW5lPlxuXG4gICAgICB7c2VsZWN0ZWRWaXpNZXRhZGF0YSA/IChcbiAgICAgICAgPGRpdlxuICAgICAgICAgIGNzcz17KHRoZW1lOiBTdXBlcnNldFRoZW1lKSA9PiBbXG4gICAgICAgICAgICBEZXRhaWxzUGFuZSh0aGVtZSksXG4gICAgICAgICAgICBEZXRhaWxzUG9wdWxhdGVkKHRoZW1lKSxcbiAgICAgICAgICBdfVxuICAgICAgICA+XG4gICAgICAgICAgPD5cbiAgICAgICAgICAgIDxTZWN0aW9uVGl0bGVcbiAgICAgICAgICAgICAgY3NzPXtjc3NgXG4gICAgICAgICAgICAgICAgZ3JpZC1hcmVhOiB2aXotbmFtZTtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHtzZWxlY3RlZFZpek1ldGFkYXRhPy5uYW1lfVxuICAgICAgICAgICAgICB7c2VsZWN0ZWRWaXpNZXRhZGF0YT8ubGFiZWwgJiYgKFxuICAgICAgICAgICAgICAgIDxUb29sdGlwXG4gICAgICAgICAgICAgICAgICBpZD1cInZpei1iYWRnZS10b29sdGlwXCJcbiAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cInRvcFwiXG4gICAgICAgICAgICAgICAgICB0aXRsZT17XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkVml6TWV0YWRhdGEubGFiZWxFeHBsYW5hdGlvbiA/P1xuICAgICAgICAgICAgICAgICAgICBjaGFydExhYmVsRXhwbGFuYXRpb25zW3NlbGVjdGVkVml6TWV0YWRhdGEubGFiZWxdXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPFRpdGxlTGFiZWxXcmFwcGVyPlxuICAgICAgICAgICAgICAgICAgICA8SGlnaGxpZ2h0TGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdj57dChzZWxlY3RlZFZpek1ldGFkYXRhLmxhYmVsKX08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9IaWdobGlnaHRMYWJlbD5cbiAgICAgICAgICAgICAgICAgIDwvVGl0bGVMYWJlbFdyYXBwZXI+XG4gICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9TZWN0aW9uVGl0bGU+XG4gICAgICAgICAgICA8VGFnc1dyYXBwZXI+XG4gICAgICAgICAgICAgIHtzZWxlY3RlZFZpek1ldGFkYXRhPy50YWdzLm1hcCh0YWcgPT4gKFxuICAgICAgICAgICAgICAgIDxMYWJlbFxuICAgICAgICAgICAgICAgICAga2V5PXt0YWd9XG4gICAgICAgICAgICAgICAgICBjc3M9eyh7IHNpemVVbml0IH0pID0+IGNzc2BcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogJHtzaXplVW5pdCAqIDJ9cHg7XG4gICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIHt0YWd9XG4gICAgICAgICAgICAgICAgPC9MYWJlbD5cbiAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICA8L1RhZ3NXcmFwcGVyPlxuICAgICAgICAgICAgPERlc2NyaXB0aW9uPlxuICAgICAgICAgICAgICB7dChcbiAgICAgICAgICAgICAgICBzZWxlY3RlZFZpek1ldGFkYXRhPy5kZXNjcmlwdGlvbiB8fCAnTm8gZGVzY3JpcHRpb24gYXZhaWxhYmxlLicsXG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L0Rlc2NyaXB0aW9uPlxuICAgICAgICAgICAgPFNlY3Rpb25UaXRsZVxuICAgICAgICAgICAgICBjc3M9e2Nzc2BcbiAgICAgICAgICAgICAgICBncmlkLWFyZWE6IGV4YW1wbGVzLWhlYWRlcjtcbiAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAge3QoJ0V4YW1wbGVzJyl9XG4gICAgICAgICAgICA8L1NlY3Rpb25UaXRsZT5cbiAgICAgICAgICAgIDxFeGFtcGxlcz5cbiAgICAgICAgICAgICAgeyhzZWxlY3RlZFZpek1ldGFkYXRhPy5leGFtcGxlR2FsbGVyeT8ubGVuZ3RoXG4gICAgICAgICAgICAgICAgPyBzZWxlY3RlZFZpek1ldGFkYXRhLmV4YW1wbGVHYWxsZXJ5XG4gICAgICAgICAgICAgICAgOiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICB1cmw6IHNlbGVjdGVkVml6TWV0YWRhdGE/LnRodW1ibmFpbCxcbiAgICAgICAgICAgICAgICAgICAgICBjYXB0aW9uOiBzZWxlY3RlZFZpek1ldGFkYXRhPy5uYW1lLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICApLm1hcChleGFtcGxlID0+IChcbiAgICAgICAgICAgICAgICA8aW1nXG4gICAgICAgICAgICAgICAgICBrZXk9e2V4YW1wbGUudXJsfVxuICAgICAgICAgICAgICAgICAgc3JjPXtcbiAgICAgICAgICAgICAgICAgICAgaXNEYXJrTW9kZSAmJiBleGFtcGxlLnVybERhcmtcbiAgICAgICAgICAgICAgICAgICAgICA/IGV4YW1wbGUudXJsRGFya1xuICAgICAgICAgICAgICAgICAgICAgIDogZXhhbXBsZS51cmxcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGFsdD17ZXhhbXBsZS5jYXB0aW9ufVxuICAgICAgICAgICAgICAgICAgdGl0bGU9e2V4YW1wbGUuY2FwdGlvbn1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgIDwvRXhhbXBsZXM+XG4gICAgICAgICAgPC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKSA6IG51bGx9XG4gICAgPC9WaXpQaWNrZXJMYXlvdXQ+XG4gICk7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\n\n}");

/***/ }),

/***/ "./src/features/datasets/DatasetSelectLabel/index.tsx":
/*!************************************************************!*\
  !*** ./src/features/datasets/DatasetSelectLabel/index.tsx ***!
  \************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("{/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DatasetSelectLabel: () => (/* binding */ DatasetSelectLabel)\n/* harmony export */ });\n/* harmony import */ var _emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-dev-runtime */ \"./node_modules/@emotion/react/jsx-dev-runtime/dist/emotion-react-jsx-dev-runtime.browser.development.esm.js\");\n/* harmony import */ var _superset_ui_core_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @superset-ui/core/components */ \"./packages/superset-ui-core/src/components/Tooltip/index.tsx\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/translation/TranslatorSingleton.ts\");\n/* harmony import */ var _apache_superset_core_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @apache-superset/core/ui */ \"./packages/superset-core/src/ui/theme/index.tsx\");\n/* provided dependency */ var __react_refresh_utils__ = __webpack_require__(/*! ./node_modules/@pmmmwh/react-refresh-webpack-plugin/lib/runtime/RefreshUtils.js */ \"./node_modules/@pmmmwh/react-refresh-webpack-plugin/lib/runtime/RefreshUtils.js\");\n/* provided dependency */ var __react_refresh_error_overlay__ = __webpack_require__(/*! ./node_modules/@pmmmwh/react-refresh-webpack-plugin/overlay/index.js */ \"./node_modules/@pmmmwh/react-refresh-webpack-plugin/overlay/index.js\");\n__webpack_require__.$Refresh$.runtime = __webpack_require__(/*! ./node_modules/react-refresh/runtime.js */ \"./node_modules/react-refresh/runtime.js\");\n\n/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */ \n\n\n\nconst TooltipContent = _apache_superset_core_ui__WEBPACK_IMPORTED_MODULE_3__.styled.div`\n  ${({ theme })=>`\n    .tooltip-header {\n      font-size: ${theme.fontSize}px;\n      font-weight: ${theme.fontWeightStrong};\n    }\n\n    .tooltip-description {\n      margin-top: ${theme.sizeUnit * 2}px;\n      display: -webkit-box;\n      -webkit-line-clamp: 20;\n      -webkit-box-orient: vertical;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n  `}\n`;\nconst StyledLabelContainer = _apache_superset_core_ui__WEBPACK_IMPORTED_MODULE_3__.styled.div`\n  ${({ theme })=>`\n    left: ${theme.sizeUnit * 3}px;\n    right: ${theme.sizeUnit * 3}px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    display: block;\n  `}\n`;\n_c = StyledLabelContainer;\nconst StyledLabel = _apache_superset_core_ui__WEBPACK_IMPORTED_MODULE_3__.styled.span`\n  ${({ theme })=>`\n    left: ${theme.sizeUnit * 3}px;\n    right: ${theme.sizeUnit * 3}px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    display: block;\n  `}\n`;\n_c1 = StyledLabel;\nconst StyledDetailWrapper = _apache_superset_core_ui__WEBPACK_IMPORTED_MODULE_3__.styled.div`\n  display: grid;\n  grid-template-columns: auto auto;\n  justify-content: start;\n  width: 100%;\n`;\n_c2 = StyledDetailWrapper;\nconst StyledLabelDetail = _apache_superset_core_ui__WEBPACK_IMPORTED_MODULE_3__.styled.span`\n  ${({ theme: { fontSizeSM, colorTextSecondary } })=>`\n    overflow: hidden;\n    text-overflow: ellipsis;\n    font-size: ${fontSizeSM}px;\n    color: ${colorTextSecondary};\n    line-height: 1.6;\n  `}\n`;\n_c3 = StyledLabelDetail;\nconst isValidValue = (value)=>![\n        'null',\n        'none'\n    ].includes(value.toLowerCase()) && value.trim() !== '';\nconst DatasetSelectLabel = (item)=>/*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_superset_ui_core_components__WEBPACK_IMPORTED_MODULE_1__.Tooltip, {\n        mouseEnterDelay: 0.2,\n        placement: \"right\",\n        title: /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(TooltipContent, {\n            children: [\n                /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"tooltip-header\",\n                    children: item.table_name && isValidValue(item.table_name) ? item.table_name : (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_2__.t)('Not defined')\n                }, void 0, false, {\n                    fileName: \"/app/superset-frontend/src/features/datasets/DatasetSelectLabel/index.tsx\",\n                    lineNumber: 99,\n                    columnNumber: 9\n                }, void 0),\n                /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"tooltip-description\",\n                    children: [\n                        /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            children: [\n                                (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_2__.t)('Database'),\n                                \": \",\n                                item.database.database_name\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/app/superset-frontend/src/features/datasets/DatasetSelectLabel/index.tsx\",\n                            lineNumber: 105,\n                            columnNumber: 11\n                        }, void 0),\n                        /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            children: [\n                                (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_2__.t)('Schema'),\n                                \":\",\n                                ' ',\n                                item.schema && isValidValue(item.schema) ? item.schema : (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_2__.t)('Not defined')\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/app/superset-frontend/src/features/datasets/DatasetSelectLabel/index.tsx\",\n                            lineNumber: 108,\n                            columnNumber: 11\n                        }, void 0)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/app/superset-frontend/src/features/datasets/DatasetSelectLabel/index.tsx\",\n                    lineNumber: 104,\n                    columnNumber: 9\n                }, void 0)\n            ]\n        }, void 0, true, {\n            fileName: \"/app/superset-frontend/src/features/datasets/DatasetSelectLabel/index.tsx\",\n            lineNumber: 98,\n            columnNumber: 7\n        }, void 0),\n        children: /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(StyledLabelContainer, {\n            children: [\n                /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(StyledLabel, {\n                    children: item.table_name && isValidValue(item.table_name) ? item.table_name : item.database.database_name\n                }, void 0, false, {\n                    fileName: \"/app/superset-frontend/src/features/datasets/DatasetSelectLabel/index.tsx\",\n                    lineNumber: 119,\n                    columnNumber: 7\n                }, undefined),\n                /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(StyledDetailWrapper, {\n                    children: [\n                        /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(StyledLabelDetail, {\n                            children: item.database.database_name\n                        }, void 0, false, {\n                            fileName: \"/app/superset-frontend/src/features/datasets/DatasetSelectLabel/index.tsx\",\n                            lineNumber: 125,\n                            columnNumber: 9\n                        }, undefined),\n                        item.schema && isValidValue(item.schema) && /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(StyledLabelDetail, {\n                            children: [\n                                \"Â - \",\n                                item.schema\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/app/superset-frontend/src/features/datasets/DatasetSelectLabel/index.tsx\",\n                            lineNumber: 127,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/app/superset-frontend/src/features/datasets/DatasetSelectLabel/index.tsx\",\n                    lineNumber: 124,\n                    columnNumber: 7\n                }, undefined)\n            ]\n        }, void 0, true, {\n            fileName: \"/app/superset-frontend/src/features/datasets/DatasetSelectLabel/index.tsx\",\n            lineNumber: 118,\n            columnNumber: 5\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"/app/superset-frontend/src/features/datasets/DatasetSelectLabel/index.tsx\",\n        lineNumber: 94,\n        columnNumber: 3\n    }, undefined);\n_c4 = DatasetSelectLabel;\nvar _c, _c1, _c2, _c3, _c4;\n__webpack_require__.$Refresh$.register(_c, \"StyledLabelContainer\");\n__webpack_require__.$Refresh$.register(_c1, \"StyledLabel\");\n__webpack_require__.$Refresh$.register(_c2, \"StyledDetailWrapper\");\n__webpack_require__.$Refresh$.register(_c3, \"StyledLabelDetail\");\n__webpack_require__.$Refresh$.register(_c4, \"DatasetSelectLabel\");\n\n\nconst $ReactRefreshModuleId$ = __webpack_require__.$Refresh$.moduleId;\nconst $ReactRefreshCurrentExports$ = __react_refresh_utils__.getModuleExports(\n\t$ReactRefreshModuleId$\n);\n\nfunction $ReactRefreshModuleRuntime$(exports) {\n\tif (true) {\n\t\tlet errorOverlay;\n\t\tif (typeof __react_refresh_error_overlay__ !== 'undefined') {\n\t\t\terrorOverlay = __react_refresh_error_overlay__;\n\t\t}\n\t\tlet testMode;\n\t\tif (typeof __react_refresh_test__ !== 'undefined') {\n\t\t\ttestMode = __react_refresh_test__;\n\t\t}\n\t\treturn __react_refresh_utils__.executeRuntime(\n\t\t\texports,\n\t\t\t$ReactRefreshModuleId$,\n\t\t\tmodule.hot,\n\t\t\terrorOverlay,\n\t\t\ttestMode\n\t\t);\n\t}\n}\n\nif (typeof Promise !== 'undefined' && $ReactRefreshCurrentExports$ instanceof Promise) {\n\t$ReactRefreshCurrentExports$.then($ReactRefreshModuleRuntime$);\n} else {\n\t$ReactRefreshModuleRuntime$($ReactRefreshCurrentExports$);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZmVhdHVyZXMvZGF0YXNldHMvRGF0YXNldFNlbGVjdExhYmVsL2luZGV4LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBOzs7Ozs7Ozs7Ozs7Ozs7OztBQWlCQTtBQUNBO0FBQ0E7QUFDQTtBQWNBO0FBQ0E7O0FBRUE7QUFDQTs7OztBQUlBOzs7Ozs7O0FBT0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQVJBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBUkE7QUFVQTs7Ozs7QUFLQTtBQUxBO0FBT0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBO0FBUkE7QUFVQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQUE7QUFDQTs7Ozs7O0FBSUE7QUFBQTs7QUFDQTs7QUFDQTtBQUFBO0FBQUE7Ozs7Ozs7QUFFQTs7QUFDQTtBQUFBO0FBQUE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVFBOztBQUNBO0FBQ0E7Ozs7OztBQUlBOztBQUNBO0FBQUE7Ozs7OztBQUNBOztBQUNBO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBS0E7QUF2Q0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdXBlcnNldC8uL3NyYy9mZWF0dXJlcy9kYXRhc2V0cy9EYXRhc2V0U2VsZWN0TGFiZWwvaW5kZXgudHN4PzYzNzEiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4gKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4gKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4gKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4gKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcbiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4gKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4gKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4gKiB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IHsgVG9vbHRpcCB9IGZyb20gJ0BzdXBlcnNldC11aS9jb3JlL2NvbXBvbmVudHMnO1xuaW1wb3J0IHsgdCB9IGZyb20gJ0BzdXBlcnNldC11aS9jb3JlJztcbmltcG9ydCB7IHN0eWxlZCB9IGZyb20gJ0BhcGFjaGUtc3VwZXJzZXQvY29yZS91aSc7XG5cbnR5cGUgRGF0YWJhc2UgPSB7XG4gIGRhdGFiYXNlX25hbWU6IHN0cmluZztcbn07XG5cbmV4cG9ydCB0eXBlIERhdGFzZXQgPSB7XG4gIGlkOiBudW1iZXI7XG4gIHRhYmxlX25hbWU6IHN0cmluZztcbiAgZGF0YXNvdXJjZV90eXBlPzogc3RyaW5nO1xuICBzY2hlbWE6IHN0cmluZztcbiAgZGF0YWJhc2U6IERhdGFiYXNlO1xufTtcblxuY29uc3QgVG9vbHRpcENvbnRlbnQgPSBzdHlsZWQuZGl2YFxuICAkeyh7IHRoZW1lIH0pID0+IGBcbiAgICAudG9vbHRpcC1oZWFkZXIge1xuICAgICAgZm9udC1zaXplOiAke3RoZW1lLmZvbnRTaXplfXB4O1xuICAgICAgZm9udC13ZWlnaHQ6ICR7dGhlbWUuZm9udFdlaWdodFN0cm9uZ307XG4gICAgfVxuXG4gICAgLnRvb2x0aXAtZGVzY3JpcHRpb24ge1xuICAgICAgbWFyZ2luLXRvcDogJHt0aGVtZS5zaXplVW5pdCAqIDJ9cHg7XG4gICAgICBkaXNwbGF5OiAtd2Via2l0LWJveDtcbiAgICAgIC13ZWJraXQtbGluZS1jbGFtcDogMjA7XG4gICAgICAtd2Via2l0LWJveC1vcmllbnQ6IHZlcnRpY2FsO1xuICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgIH1cbiAgYH1cbmA7XG5cbmNvbnN0IFN0eWxlZExhYmVsQ29udGFpbmVyID0gc3R5bGVkLmRpdmBcbiAgJHsoeyB0aGVtZSB9KSA9PiBgXG4gICAgbGVmdDogJHt0aGVtZS5zaXplVW5pdCAqIDN9cHg7XG4gICAgcmlnaHQ6ICR7dGhlbWUuc2l6ZVVuaXQgKiAzfXB4O1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgZGlzcGxheTogYmxvY2s7XG4gIGB9XG5gO1xuXG5jb25zdCBTdHlsZWRMYWJlbCA9IHN0eWxlZC5zcGFuYFxuICAkeyh7IHRoZW1lIH0pID0+IGBcbiAgICBsZWZ0OiAke3RoZW1lLnNpemVVbml0ICogM31weDtcbiAgICByaWdodDogJHt0aGVtZS5zaXplVW5pdCAqIDN9cHg7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICBkaXNwbGF5OiBibG9jaztcbiAgYH1cbmA7XG5cbmNvbnN0IFN0eWxlZERldGFpbFdyYXBwZXIgPSBzdHlsZWQuZGl2YFxuICBkaXNwbGF5OiBncmlkO1xuICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IGF1dG8gYXV0bztcbiAganVzdGlmeS1jb250ZW50OiBzdGFydDtcbiAgd2lkdGg6IDEwMCU7XG5gO1xuXG5jb25zdCBTdHlsZWRMYWJlbERldGFpbCA9IHN0eWxlZC5zcGFuYFxuICAkeyh7IHRoZW1lOiB7IGZvbnRTaXplU00sIGNvbG9yVGV4dFNlY29uZGFyeSB9IH0pID0+IGBcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgIGZvbnQtc2l6ZTogJHtmb250U2l6ZVNNfXB4O1xuICAgIGNvbG9yOiAke2NvbG9yVGV4dFNlY29uZGFyeX07XG4gICAgbGluZS1oZWlnaHQ6IDEuNjtcbiAgYH1cbmA7XG5cbmNvbnN0IGlzVmFsaWRWYWx1ZSA9ICh2YWx1ZTogc3RyaW5nKTogYm9vbGVhbiA9PlxuICAhWydudWxsJywgJ25vbmUnXS5pbmNsdWRlcyh2YWx1ZS50b0xvd2VyQ2FzZSgpKSAmJiB2YWx1ZS50cmltKCkgIT09ICcnO1xuXG5leHBvcnQgY29uc3QgRGF0YXNldFNlbGVjdExhYmVsID0gKGl0ZW06IERhdGFzZXQpID0+IChcbiAgPFRvb2x0aXBcbiAgICBtb3VzZUVudGVyRGVsYXk9ezAuMn1cbiAgICBwbGFjZW1lbnQ9XCJyaWdodFwiXG4gICAgdGl0bGU9e1xuICAgICAgPFRvb2x0aXBDb250ZW50PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRvb2x0aXAtaGVhZGVyXCI+XG4gICAgICAgICAge2l0ZW0udGFibGVfbmFtZSAmJiBpc1ZhbGlkVmFsdWUoaXRlbS50YWJsZV9uYW1lKVxuICAgICAgICAgICAgPyBpdGVtLnRhYmxlX25hbWVcbiAgICAgICAgICAgIDogdCgnTm90IGRlZmluZWQnKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidG9vbHRpcC1kZXNjcmlwdGlvblwiPlxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICB7dCgnRGF0YWJhc2UnKX06IHtpdGVtLmRhdGFiYXNlLmRhdGFiYXNlX25hbWV9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIHt0KCdTY2hlbWEnKX06eycgJ31cbiAgICAgICAgICAgIHtpdGVtLnNjaGVtYSAmJiBpc1ZhbGlkVmFsdWUoaXRlbS5zY2hlbWEpXG4gICAgICAgICAgICAgID8gaXRlbS5zY2hlbWFcbiAgICAgICAgICAgICAgOiB0KCdOb3QgZGVmaW5lZCcpfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvVG9vbHRpcENvbnRlbnQ+XG4gICAgfVxuICA+XG4gICAgPFN0eWxlZExhYmVsQ29udGFpbmVyPlxuICAgICAgPFN0eWxlZExhYmVsPlxuICAgICAgICB7aXRlbS50YWJsZV9uYW1lICYmIGlzVmFsaWRWYWx1ZShpdGVtLnRhYmxlX25hbWUpXG4gICAgICAgICAgPyBpdGVtLnRhYmxlX25hbWVcbiAgICAgICAgICA6IGl0ZW0uZGF0YWJhc2UuZGF0YWJhc2VfbmFtZX1cbiAgICAgIDwvU3R5bGVkTGFiZWw+XG4gICAgICA8U3R5bGVkRGV0YWlsV3JhcHBlcj5cbiAgICAgICAgPFN0eWxlZExhYmVsRGV0YWlsPntpdGVtLmRhdGFiYXNlLmRhdGFiYXNlX25hbWV9PC9TdHlsZWRMYWJlbERldGFpbD5cbiAgICAgICAge2l0ZW0uc2NoZW1hICYmIGlzVmFsaWRWYWx1ZShpdGVtLnNjaGVtYSkgJiYgKFxuICAgICAgICAgIDxTdHlsZWRMYWJlbERldGFpbD4mbmJzcDstIHtpdGVtLnNjaGVtYX08L1N0eWxlZExhYmVsRGV0YWlsPlxuICAgICAgICApfVxuICAgICAgPC9TdHlsZWREZXRhaWxXcmFwcGVyPlxuICAgIDwvU3R5bGVkTGFiZWxDb250YWluZXI+XG4gIDwvVG9vbHRpcD5cbik7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/features/datasets/DatasetSelectLabel/index.tsx\n\n}");

/***/ }),

/***/ "./src/pages/ChartCreation/index.tsx":
/*!*******************************************!*\
  !*** ./src/pages/ChartCreation/index.tsx ***!
  \*******************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChartCreation: () => (/* binding */ ChartCreation),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react/jsx-dev-runtime */ \"./node_modules/@emotion/react/jsx-dev-runtime/dist/emotion-react-jsx-dev-runtime.browser.development.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var rison__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rison */ \"./node_modules/rison/js/rison.js\");\n/* harmony import */ var rison__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(rison__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/translation/TranslatorSingleton.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/connection/SupersetClient.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/utils/isDefined.ts\");\n/* harmony import */ var _apache_superset_core_ui__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @apache-superset/core/ui */ \"./packages/superset-core/src/ui/theme/index.tsx\");\n/* harmony import */ var _emotion_react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @emotion/react */ \"./node_modules/@emotion/react/dist/emotion-element-489459f2.browser.development.esm.js\");\n/* harmony import */ var src_utils_urlUtils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! src/utils/urlUtils */ \"./src/utils/urlUtils.ts\");\n/* harmony import */ var src_constants__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! src/constants */ \"./src/constants.ts\");\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! react-router-dom */ \"./node_modules/react-router-dom/esm/react-router-dom.js\");\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! react-router-dom */ \"./node_modules/react-router/esm/react-router.js\");\n/* harmony import */ var _superset_ui_core_components__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @superset-ui/core/components */ \"webpack/sharing/consume/default/antd/antd\");\n/* harmony import */ var _superset_ui_core_components__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(_superset_ui_core_components__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var _superset_ui_core_components__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @superset-ui/core/components */ \"./packages/superset-ui-core/src/components/Select/AsyncSelect.tsx\");\n/* harmony import */ var _superset_ui_core_components__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @superset-ui/core/components */ \"./packages/superset-ui-core/src/components/Button/index.tsx\");\n/* harmony import */ var src_components_MessageToasts_withToasts__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! src/components/MessageToasts/withToasts */ \"./src/components/MessageToasts/withToasts.tsx\");\n/* harmony import */ var src_explore_components_controls_VizTypeControl_VizTypeGallery__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! src/explore/components/controls/VizTypeControl/VizTypeGallery */ \"./src/explore/components/controls/VizTypeControl/VizTypeGallery.tsx\");\n/* harmony import */ var src_utils_findPermission__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! src/utils/findPermission */ \"./src/utils/findPermission.ts\");\n/* harmony import */ var src_utils_getBootstrapData__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! src/utils/getBootstrapData */ \"./src/utils/getBootstrapData.ts\");\n/* harmony import */ var src_features_datasets_DatasetSelectLabel__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! src/features/datasets/DatasetSelectLabel */ \"./src/features/datasets/DatasetSelectLabel/index.tsx\");\n/* harmony import */ var _superset_ui_core_components_Icons__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @superset-ui/core/components/Icons */ \"./packages/superset-ui-core/src/components/Icons/index.tsx\");\n/* provided dependency */ var __react_refresh_utils__ = __webpack_require__(/*! ./node_modules/@pmmmwh/react-refresh-webpack-plugin/lib/runtime/RefreshUtils.js */ \"./node_modules/@pmmmwh/react-refresh-webpack-plugin/lib/runtime/RefreshUtils.js\");\n/* provided dependency */ var __react_refresh_error_overlay__ = __webpack_require__(/*! ./node_modules/@pmmmwh/react-refresh-webpack-plugin/overlay/index.js */ \"./node_modules/@pmmmwh/react-refresh-webpack-plugin/overlay/index.js\");\n__webpack_require__.$Refresh$.runtime = __webpack_require__(/*! ./node_modules/react-refresh/runtime.js */ \"./node_modules/react-refresh/runtime.js\");\n\n/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */ \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst ESTIMATED_NAV_HEIGHT = 56;\nconst ELEMENTS_EXCEPT_VIZ_GALLERY = ESTIMATED_NAV_HEIGHT + 250;\nconst bootstrapData = (0,src_utils_getBootstrapData__WEBPACK_IMPORTED_MODULE_18__[\"default\"])();\nconst denyList = (bootstrapData.common.conf.VIZ_TYPE_DENYLIST || []).concat(Object.values(src_constants__WEBPACK_IMPORTED_MODULE_9__.FilterPlugins));\nconst StyledContainer = _apache_superset_core_ui__WEBPACK_IMPORTED_MODULE_6__.styled.div`\n  ${({ theme })=>`\n    flex: 1 1 auto;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    width: 100%;\n    max-width: ${src_explore_components_controls_VizTypeControl_VizTypeGallery__WEBPACK_IMPORTED_MODULE_16__.MAX_ADVISABLE_VIZ_GALLERY_WIDTH}px;\n    max-height: calc(100vh - ${ESTIMATED_NAV_HEIGHT}px);\n    border-radius: ${theme.borderRadius}px;\n    background-color: ${theme.colorBgContainer};\n    margin-left: auto;\n    margin-right: auto;\n    padding-left: ${theme.padding}px;\n    padding-right: ${theme.padding}px;\n    padding-bottom: ${theme.padding}px;\n\n    h3 {\n      padding-bottom: ${theme.paddingSM}px;\n    }\n\n    & .dataset {\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n      margin-bottom: ${theme.marginMD}px;\n\n      & > div {\n        min-width: 200px;\n        width: 300px;\n      }\n\n      & > span {\n        color: ${theme.colorText};\n        margin-left: ${theme.margin}px;\n      }\n    }\n\n    & .viz-gallery {\n      border: 1px solid ${theme.colorBorder};\n      border-radius: ${theme.borderRadius}px;\n      margin: ${theme.marginXXS}px 0px;\n      max-height: calc(100vh - ${ELEMENTS_EXCEPT_VIZ_GALLERY}px);\n      flex: 1;\n    }\n\n    & .footer {\n      flex: 1;\n      display: flex;\n      flex-direction: row;\n      justify-content: flex-end;\n      align-items: center;\n\n      & > span {\n        color: ${theme.colorText};\n        margin-right: ${theme.margin}px;\n      }\n    }\n\n    /* The following extra ampersands (&&&&) are used to boost selector specificity */\n\n    &&&& .ant-steps-item-tail {\n      display: none;\n    }\n\n    &&&& .ant-steps-item-icon {\n      margin-right: ${theme.marginXS}px;\n      width: ${theme.sizeUnit * 5}px;\n      height: ${theme.sizeUnit * 5}px;\n      line-height: ${theme.sizeUnit * 5}px;\n    }\n\n    &&&& .ant-steps-item-title {\n      line-height: ${theme.sizeUnit * 5}px;\n    }\n\n    &&&& .ant-steps-item-content {\n      overflow: unset;\n\n      .ant-steps-item-description {\n        margin-top: ${theme.sizeUnit}px;\n        padding-bottom: ${theme.sizeUnit}px;\n      }\n    }\n\n    &&&& .ant-tooltip-open {\n      display: inline;\n    }\n  `}\n`;\n_c = StyledContainer;\nconst StyledStepTitle = _apache_superset_core_ui__WEBPACK_IMPORTED_MODULE_6__.styled.span`\n  ${({ theme: { fontSize, fontWeightStrong } })=>`\n      font-size: ${fontSize}px;\n      font-weight: ${fontWeightStrong};\n    `}\n`;\nconst StyledStepDescription = _apache_superset_core_ui__WEBPACK_IMPORTED_MODULE_6__.styled.div`\n  ${({ theme })=>`\n    margin-top: ${theme.margin}px;\n    margin-bottom: ${theme.marginSM}px;\n    margin-left: ${theme.marginMD}px;\n  `}\n`;\nclass ChartCreation extends react__WEBPACK_IMPORTED_MODULE_1__.PureComponent {\n    componentDidMount() {\n        const params = new URLSearchParams(window.location.search).get('dataset');\n        if (params) {\n            this.loadDatasources(params, 0, 1).then((r)=>{\n                const datasource = r.data[0];\n                this.setState({\n                    datasource\n                });\n            });\n            this.props.addSuccessToast((0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_3__.t)('The dataset has been saved'));\n        }\n    }\n    exploreUrl() {\n        var _this_state_datasource;\n        const dashboardId = (0,src_utils_urlUtils__WEBPACK_IMPORTED_MODULE_8__.getUrlParam)(src_constants__WEBPACK_IMPORTED_MODULE_9__.URL_PARAMS.dashboardId);\n        let url = `/explore/?viz_type=${this.state.vizType}&datasource=${(_this_state_datasource = this.state.datasource) == null ? void 0 : _this_state_datasource.value}`;\n        if ((0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(dashboardId)) {\n            url += `&dashboard_id=${dashboardId}`;\n        }\n        return url;\n    }\n    gotoSlice() {\n        this.props.history.push(this.exploreUrl());\n    }\n    changeDatasource(datasource) {\n        this.setState({\n            datasource\n        });\n    }\n    changeVizType(vizType) {\n        this.setState({\n            vizType\n        });\n    }\n    isBtnDisabled() {\n        var _this_state_datasource;\n        return !(((_this_state_datasource = this.state.datasource) == null ? void 0 : _this_state_datasource.value) && this.state.vizType);\n    }\n    onVizTypeDoubleClick() {\n        if (!this.isBtnDisabled()) {\n            this.gotoSlice();\n        }\n    }\n    loadDatasources(search, page, pageSize) {\n        const query = rison__WEBPACK_IMPORTED_MODULE_2___default().encode({\n            columns: [\n                'id',\n                'table_name',\n                'datasource_type',\n                'database.database_name',\n                'schema'\n            ],\n            filters: [\n                {\n                    col: 'table_name',\n                    opr: 'ct',\n                    value: search\n                }\n            ],\n            page,\n            page_size: pageSize,\n            order_column: 'table_name',\n            order_direction: 'asc'\n        });\n        return _superset_ui_core__WEBPACK_IMPORTED_MODULE_4__[\"default\"].get({\n            endpoint: `/api/v1/dataset/?q=${query}`\n        }).then((response)=>{\n            const list = response.json.result.map((item)=>({\n                    id: item.id,\n                    value: `${item.id}__${item.datasource_type}`,\n                    label: (0,src_features_datasets_DatasetSelectLabel__WEBPACK_IMPORTED_MODULE_19__.DatasetSelectLabel)(item),\n                    table_name: item.table_name\n                }));\n            return {\n                data: list,\n                totalCount: response.json.count\n            };\n        });\n    }\n    render() {\n        var _this_state_datasource;\n        const { theme } = this.props;\n        const isButtonDisabled = this.isBtnDisabled();\n        const VIEW_INSTRUCTIONS_TEXT = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_3__.t)('view instructions');\n        const datasetHelpText = this.state.canCreateDataset ? /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n            \"data-test\": \"dataset-write\",\n            children: [\n                /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_router_dom__WEBPACK_IMPORTED_MODULE_10__.Link, {\n                    to: \"/dataset/add/\",\n                    \"data-test\": \"add-chart-new-dataset\",\n                    children: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_3__.t)('Add a dataset')\n                }, void 0, false, {\n                    fileName: \"/app/superset-frontend/src/pages/ChartCreation/index.tsx\",\n                    lineNumber: 275,\n                    columnNumber: 9\n                }, this),\n                ' ',\n                (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_3__.t)('or'),\n                ' ',\n                /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n                    href: \"https://superset.apache.org/docs/creating-charts-dashboards/creating-your-first-dashboard/#registering-a-new-table\",\n                    rel: \"noopener noreferrer\",\n                    target: \"_blank\",\n                    \"data-test\": \"add-chart-new-dataset-instructions\",\n                    children: [\n                        `${VIEW_INSTRUCTIONS_TEXT} `,\n                        /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_superset_ui_core_components_Icons__WEBPACK_IMPORTED_MODULE_20__.Icons.Full, {\n                            iconSize: \"m\",\n                            iconColor: theme.colorPrimary\n                        }, void 0, false, {\n                            fileName: \"/app/superset-frontend/src/pages/ChartCreation/index.tsx\",\n                            lineNumber: 286,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/app/superset-frontend/src/pages/ChartCreation/index.tsx\",\n                    lineNumber: 279,\n                    columnNumber: 9\n                }, this),\n                \".\"\n            ]\n        }, void 0, true, {\n            fileName: \"/app/superset-frontend/src/pages/ChartCreation/index.tsx\",\n            lineNumber: 274,\n            columnNumber: 7\n        }, this) : /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n            \"data-test\": \"no-dataset-write\",\n            children: [\n                /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n                    href: \"https://superset.apache.org/docs/creating-charts-dashboards/creating-your-first-dashboard/#registering-a-new-table\",\n                    rel: \"noopener noreferrer\",\n                    target: \"_blank\",\n                    children: [\n                        `${VIEW_INSTRUCTIONS_TEXT} `,\n                        /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_superset_ui_core_components_Icons__WEBPACK_IMPORTED_MODULE_20__.Icons.Full, {\n                            iconSize: \"m\",\n                            iconColor: theme.colorPrimary\n                        }, void 0, false, {\n                            fileName: \"/app/superset-frontend/src/pages/ChartCreation/index.tsx\",\n                            lineNumber: 298,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/app/superset-frontend/src/pages/ChartCreation/index.tsx\",\n                    lineNumber: 292,\n                    columnNumber: 9\n                }, this),\n                \".\"\n            ]\n        }, void 0, true, {\n            fileName: \"/app/superset-frontend/src/pages/ChartCreation/index.tsx\",\n            lineNumber: 291,\n            columnNumber: 7\n        }, this);\n        return /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(StyledContainer, {\n            children: [\n                /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                    children: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_3__.t)('Create a new chart')\n                }, void 0, false, {\n                    fileName: \"/app/superset-frontend/src/pages/ChartCreation/index.tsx\",\n                    lineNumber: 306,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_superset_ui_core_components__WEBPACK_IMPORTED_MODULE_12__.Steps, {\n                    direction: \"vertical\",\n                    size: \"small\",\n                    children: [\n                        /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_superset_ui_core_components__WEBPACK_IMPORTED_MODULE_12__.Steps.Step, {\n                            title: /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(StyledStepTitle, {\n                                children: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_3__.t)('Choose a dataset')\n                            }, void 0, false, {\n                                fileName: \"/app/superset-frontend/src/pages/ChartCreation/index.tsx\",\n                                lineNumber: 309,\n                                columnNumber: 20\n                            }, void 0),\n                            status: ((_this_state_datasource = this.state.datasource) == null ? void 0 : _this_state_datasource.value) ? 'finish' : 'process',\n                            description: /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(StyledStepDescription, {\n                                className: \"dataset\",\n                                children: [\n                                    /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_superset_ui_core_components__WEBPACK_IMPORTED_MODULE_13__[\"default\"], {\n                                        autoFocus: true,\n                                        ariaLabel: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_3__.t)('Dataset'),\n                                        name: \"select-datasource\",\n                                        onChange: this.changeDatasource,\n                                        options: this.loadDatasources,\n                                        optionFilterProps: [\n                                            'id',\n                                            'table_name'\n                                        ],\n                                        placeholder: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_3__.t)('Choose a dataset'),\n                                        showSearch: true,\n                                        value: this.state.datasource\n                                    }, void 0, false, {\n                                        fileName: \"/app/superset-frontend/src/pages/ChartCreation/index.tsx\",\n                                        lineNumber: 313,\n                                        columnNumber: 17\n                                    }, void 0),\n                                    datasetHelpText\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/app/superset-frontend/src/pages/ChartCreation/index.tsx\",\n                                lineNumber: 312,\n                                columnNumber: 15\n                            }, void 0)\n                        }, void 0, false, {\n                            fileName: \"/app/superset-frontend/src/pages/ChartCreation/index.tsx\",\n                            lineNumber: 308,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_superset_ui_core_components__WEBPACK_IMPORTED_MODULE_12__.Steps.Step, {\n                            title: /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(StyledStepTitle, {\n                                children: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_3__.t)('Choose chart type')\n                            }, void 0, false, {\n                                fileName: \"/app/superset-frontend/src/pages/ChartCreation/index.tsx\",\n                                lineNumber: 329,\n                                columnNumber: 20\n                            }, void 0),\n                            status: this.state.vizType ? 'finish' : 'process',\n                            description: /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(StyledStepDescription, {\n                                children: /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(src_explore_components_controls_VizTypeControl_VizTypeGallery__WEBPACK_IMPORTED_MODULE_16__[\"default\"], {\n                                    denyList: denyList,\n                                    className: \"viz-gallery\",\n                                    onChange: this.changeVizType,\n                                    onDoubleClick: this.onVizTypeDoubleClick,\n                                    selectedViz: this.state.vizType\n                                }, void 0, false, {\n                                    fileName: \"/app/superset-frontend/src/pages/ChartCreation/index.tsx\",\n                                    lineNumber: 333,\n                                    columnNumber: 17\n                                }, void 0)\n                            }, void 0, false, {\n                                fileName: \"/app/superset-frontend/src/pages/ChartCreation/index.tsx\",\n                                lineNumber: 332,\n                                columnNumber: 15\n                            }, void 0)\n                        }, void 0, false, {\n                            fileName: \"/app/superset-frontend/src/pages/ChartCreation/index.tsx\",\n                            lineNumber: 328,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/app/superset-frontend/src/pages/ChartCreation/index.tsx\",\n                    lineNumber: 307,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"footer\",\n                    children: [\n                        isButtonDisabled && /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                            children: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_3__.t)('Please select both a Dataset and a Chart type to proceed')\n                        }, void 0, false, {\n                            fileName: \"/app/superset-frontend/src/pages/ChartCreation/index.tsx\",\n                            lineNumber: 346,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,_emotion_react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_superset_ui_core_components__WEBPACK_IMPORTED_MODULE_14__.Button, {\n                            buttonStyle: \"primary\",\n                            disabled: isButtonDisabled,\n                            onClick: this.gotoSlice,\n                            children: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_3__.t)('Create new chart')\n                        }, void 0, false, {\n                            fileName: \"/app/superset-frontend/src/pages/ChartCreation/index.tsx\",\n                            lineNumber: 350,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/app/superset-frontend/src/pages/ChartCreation/index.tsx\",\n                    lineNumber: 344,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/app/superset-frontend/src/pages/ChartCreation/index.tsx\",\n            lineNumber: 305,\n            columnNumber: 7\n        }, this);\n    }\n    constructor(props){\n        super(props);\n        this.state = {\n            vizType: null,\n            canCreateDataset: (0,src_utils_findPermission__WEBPACK_IMPORTED_MODULE_17__.findPermission)('can_write', 'Dataset', props.user.roles)\n        };\n        this.changeDatasource = this.changeDatasource.bind(this);\n        this.changeVizType = this.changeVizType.bind(this);\n        this.gotoSlice = this.gotoSlice.bind(this);\n        this.loadDatasources = this.loadDatasources.bind(this);\n        this.onVizTypeDoubleClick = this.onVizTypeDoubleClick.bind(this);\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_c3 = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_11__.withRouter)(_c2 = (0,src_components_MessageToasts_withToasts__WEBPACK_IMPORTED_MODULE_15__[\"default\"])(_c1 = (0,_emotion_react__WEBPACK_IMPORTED_MODULE_7__.b)(ChartCreation))));\nvar _c, _c1, _c2, _c3;\n__webpack_require__.$Refresh$.register(_c, \"StyledContainer\");\n__webpack_require__.$Refresh$.register(_c1, \"%default%$withRouter$withToasts\");\n__webpack_require__.$Refresh$.register(_c2, \"%default%$withRouter\");\n__webpack_require__.$Refresh$.register(_c3, \"%default%\");\n\n\nconst $ReactRefreshModuleId$ = __webpack_require__.$Refresh$.moduleId;\nconst $ReactRefreshCurrentExports$ = __react_refresh_utils__.getModuleExports(\n\t$ReactRefreshModuleId$\n);\n\nfunction $ReactRefreshModuleRuntime$(exports) {\n\tif (true) {\n\t\tlet errorOverlay;\n\t\tif (typeof __react_refresh_error_overlay__ !== 'undefined') {\n\t\t\terrorOverlay = __react_refresh_error_overlay__;\n\t\t}\n\t\tlet testMode;\n\t\tif (typeof __react_refresh_test__ !== 'undefined') {\n\t\t\ttestMode = __react_refresh_test__;\n\t\t}\n\t\treturn __react_refresh_utils__.executeRuntime(\n\t\t\texports,\n\t\t\t$ReactRefreshModuleId$,\n\t\t\tmodule.hot,\n\t\t\terrorOverlay,\n\t\t\ttestMode\n\t\t);\n\t}\n}\n\nif (typeof Promise !== 'undefined' && $ReactRefreshCurrentExports$ instanceof Promise) {\n\t$ReactRefreshCurrentExports$.then($ReactRefreshModuleRuntime$);\n} else {\n\t$ReactRefreshModuleRuntime$($ReactRefreshCurrentExports$);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGFnZXMvQ2hhcnRDcmVhdGlvbi9pbmRleC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBaUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBRUE7QUFDQTtBQUlBO0FBZUE7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUNBOzs7Ozs7QUFNQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOzs7QUFHQTs7Ozs7OztBQU9BOzs7Ozs7OztBQVFBO0FBQ0E7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQVlBO0FBQ0E7Ozs7Ozs7Ozs7O0FBV0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFJQTs7Ozs7OztBQU9BO0FBQ0E7Ozs7Ozs7QUFPQTtBQUNBO0FBekZBO0FBMkZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFzQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQXlDQTtBQXhDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQUE7QUFBQTtBQUNBOzs7Ozs7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFBQTtBQUFBOzs7Ozs7Ozs7Ozs7QUFDQTs7Ozs7O0FBSUE7QUFBQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQUE7QUFBQTs7Ozs7Ozs7Ozs7O0FBQ0E7Ozs7Ozs7QUFLQTs7QUFFQTtBQUFBOzs7Ozs7QUFDQTtBQUFBO0FBQUE7O0FBQ0E7QUFDQTtBQUFBOzs7Ozs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUVBOzs7Ozs7Ozs7Ozs7QUFJQTtBQUNBO0FBQUE7Ozs7OztBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFNQTtBQUFBOztBQUNBO0FBRUE7Ozs7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUtBO0FBM0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTRLQTtBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3VwZXJzZXQvLi9zcmMvcGFnZXMvQ2hhcnRDcmVhdGlvbi9pbmRleC50c3g/NzE0YyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgeyBQdXJlQ29tcG9uZW50LCBSZWFjdE5vZGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgcmlzb24gZnJvbSAncmlzb24nO1xuaW1wb3J0IHsgaXNEZWZpbmVkLCBKc29uUmVzcG9uc2UsIFN1cGVyc2V0Q2xpZW50LCB0IH0gZnJvbSAnQHN1cGVyc2V0LXVpL2NvcmUnO1xuaW1wb3J0IHsgc3R5bGVkIH0gZnJvbSAnQGFwYWNoZS1zdXBlcnNldC9jb3JlL3VpJztcbmltcG9ydCB7IHdpdGhUaGVtZSwgVGhlbWUgfSBmcm9tICdAZW1vdGlvbi9yZWFjdCc7XG5pbXBvcnQgeyBnZXRVcmxQYXJhbSB9IGZyb20gJ3NyYy91dGlscy91cmxVdGlscyc7XG5pbXBvcnQgeyBGaWx0ZXJQbHVnaW5zLCBVUkxfUEFSQU1TIH0gZnJvbSAnc3JjL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBMaW5rLCB3aXRoUm91dGVyLCBSb3V0ZUNvbXBvbmVudFByb3BzIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XG5pbXBvcnQgeyBBc3luY1NlbGVjdCwgQnV0dG9uLCBTdGVwcyB9IGZyb20gJ0BzdXBlcnNldC11aS9jb3JlL2NvbXBvbmVudHMnO1xuaW1wb3J0IHdpdGhUb2FzdHMgZnJvbSAnc3JjL2NvbXBvbmVudHMvTWVzc2FnZVRvYXN0cy93aXRoVG9hc3RzJztcblxuaW1wb3J0IFZpelR5cGVHYWxsZXJ5LCB7XG4gIE1BWF9BRFZJU0FCTEVfVklaX0dBTExFUllfV0lEVEgsXG59IGZyb20gJ3NyYy9leHBsb3JlL2NvbXBvbmVudHMvY29udHJvbHMvVml6VHlwZUNvbnRyb2wvVml6VHlwZUdhbGxlcnknO1xuaW1wb3J0IHsgZmluZFBlcm1pc3Npb24gfSBmcm9tICdzcmMvdXRpbHMvZmluZFBlcm1pc3Npb24nO1xuaW1wb3J0IHsgVXNlcldpdGhQZXJtaXNzaW9uc0FuZFJvbGVzIH0gZnJvbSAnc3JjL3R5cGVzL2Jvb3RzdHJhcFR5cGVzJztcbmltcG9ydCBnZXRCb290c3RyYXBEYXRhIGZyb20gJ3NyYy91dGlscy9nZXRCb290c3RyYXBEYXRhJztcbmltcG9ydCB7XG4gIERhdGFzZXQsXG4gIERhdGFzZXRTZWxlY3RMYWJlbCxcbn0gZnJvbSAnc3JjL2ZlYXR1cmVzL2RhdGFzZXRzL0RhdGFzZXRTZWxlY3RMYWJlbCc7XG5pbXBvcnQgeyBJY29ucyB9IGZyb20gJ0BzdXBlcnNldC11aS9jb3JlL2NvbXBvbmVudHMvSWNvbnMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIENoYXJ0Q3JlYXRpb25Qcm9wcyBleHRlbmRzIFJvdXRlQ29tcG9uZW50UHJvcHMge1xuICB1c2VyOiBVc2VyV2l0aFBlcm1pc3Npb25zQW5kUm9sZXM7XG4gIGFkZFN1Y2Nlc3NUb2FzdDogKGFyZzogc3RyaW5nKSA9PiB2b2lkO1xuICB0aGVtZTogVGhlbWU7XG59XG5cbmV4cG9ydCB0eXBlIENoYXJ0Q3JlYXRpb25TdGF0ZSA9IHtcbiAgZGF0YXNvdXJjZT86IHsgbGFiZWw6IHN0cmluZyB8IFJlYWN0Tm9kZTsgdmFsdWU6IHN0cmluZyB9O1xuICBkYXRhc2V0TmFtZT86IHN0cmluZyB8IHN0cmluZ1tdIHwgbnVsbDtcbiAgdml6VHlwZTogc3RyaW5nIHwgbnVsbDtcbiAgY2FuQ3JlYXRlRGF0YXNldDogYm9vbGVhbjtcbn07XG5cbmNvbnN0IEVTVElNQVRFRF9OQVZfSEVJR0hUID0gNTY7XG5jb25zdCBFTEVNRU5UU19FWENFUFRfVklaX0dBTExFUlkgPSBFU1RJTUFURURfTkFWX0hFSUdIVCArIDI1MDtcblxuY29uc3QgYm9vdHN0cmFwRGF0YSA9IGdldEJvb3RzdHJhcERhdGEoKTtcbmNvbnN0IGRlbnlMaXN0OiBzdHJpbmdbXSA9IChcbiAgYm9vdHN0cmFwRGF0YS5jb21tb24uY29uZi5WSVpfVFlQRV9ERU5ZTElTVCB8fCBbXVxuKS5jb25jYXQoT2JqZWN0LnZhbHVlcyhGaWx0ZXJQbHVnaW5zKSk7XG5cbmNvbnN0IFN0eWxlZENvbnRhaW5lciA9IHN0eWxlZC5kaXZgXG4gICR7KHsgdGhlbWUgfSkgPT4gYFxuICAgIGZsZXg6IDEgMSBhdXRvO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgbWF4LXdpZHRoOiAke01BWF9BRFZJU0FCTEVfVklaX0dBTExFUllfV0lEVEh9cHg7XG4gICAgbWF4LWhlaWdodDogY2FsYygxMDB2aCAtICR7RVNUSU1BVEVEX05BVl9IRUlHSFR9cHgpO1xuICAgIGJvcmRlci1yYWRpdXM6ICR7dGhlbWUuYm9yZGVyUmFkaXVzfXB4O1xuICAgIGJhY2tncm91bmQtY29sb3I6ICR7dGhlbWUuY29sb3JCZ0NvbnRhaW5lcn07XG4gICAgbWFyZ2luLWxlZnQ6IGF1dG87XG4gICAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xuICAgIHBhZGRpbmctbGVmdDogJHt0aGVtZS5wYWRkaW5nfXB4O1xuICAgIHBhZGRpbmctcmlnaHQ6ICR7dGhlbWUucGFkZGluZ31weDtcbiAgICBwYWRkaW5nLWJvdHRvbTogJHt0aGVtZS5wYWRkaW5nfXB4O1xuXG4gICAgaDMge1xuICAgICAgcGFkZGluZy1ib3R0b206ICR7dGhlbWUucGFkZGluZ1NNfXB4O1xuICAgIH1cblxuICAgICYgLmRhdGFzZXQge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgbWFyZ2luLWJvdHRvbTogJHt0aGVtZS5tYXJnaW5NRH1weDtcblxuICAgICAgJiA+IGRpdiB7XG4gICAgICAgIG1pbi13aWR0aDogMjAwcHg7XG4gICAgICAgIHdpZHRoOiAzMDBweDtcbiAgICAgIH1cblxuICAgICAgJiA+IHNwYW4ge1xuICAgICAgICBjb2xvcjogJHt0aGVtZS5jb2xvclRleHR9O1xuICAgICAgICBtYXJnaW4tbGVmdDogJHt0aGVtZS5tYXJnaW59cHg7XG4gICAgICB9XG4gICAgfVxuXG4gICAgJiAudml6LWdhbGxlcnkge1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgJHt0aGVtZS5jb2xvckJvcmRlcn07XG4gICAgICBib3JkZXItcmFkaXVzOiAke3RoZW1lLmJvcmRlclJhZGl1c31weDtcbiAgICAgIG1hcmdpbjogJHt0aGVtZS5tYXJnaW5YWFN9cHggMHB4O1xuICAgICAgbWF4LWhlaWdodDogY2FsYygxMDB2aCAtICR7RUxFTUVOVFNfRVhDRVBUX1ZJWl9HQUxMRVJZfXB4KTtcbiAgICAgIGZsZXg6IDE7XG4gICAgfVxuXG4gICAgJiAuZm9vdGVyIHtcbiAgICAgIGZsZXg6IDE7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAgICAgIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XG4gICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuXG4gICAgICAmID4gc3BhbiB7XG4gICAgICAgIGNvbG9yOiAke3RoZW1lLmNvbG9yVGV4dH07XG4gICAgICAgIG1hcmdpbi1yaWdodDogJHt0aGVtZS5tYXJnaW59cHg7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyogVGhlIGZvbGxvd2luZyBleHRyYSBhbXBlcnNhbmRzICgmJiYmKSBhcmUgdXNlZCB0byBib29zdCBzZWxlY3RvciBzcGVjaWZpY2l0eSAqL1xuXG4gICAgJiYmJiAuYW50LXN0ZXBzLWl0ZW0tdGFpbCB7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgIH1cblxuICAgICYmJiYgLmFudC1zdGVwcy1pdGVtLWljb24ge1xuICAgICAgbWFyZ2luLXJpZ2h0OiAke3RoZW1lLm1hcmdpblhTfXB4O1xuICAgICAgd2lkdGg6ICR7dGhlbWUuc2l6ZVVuaXQgKiA1fXB4O1xuICAgICAgaGVpZ2h0OiAke3RoZW1lLnNpemVVbml0ICogNX1weDtcbiAgICAgIGxpbmUtaGVpZ2h0OiAke3RoZW1lLnNpemVVbml0ICogNX1weDtcbiAgICB9XG5cbiAgICAmJiYmIC5hbnQtc3RlcHMtaXRlbS10aXRsZSB7XG4gICAgICBsaW5lLWhlaWdodDogJHt0aGVtZS5zaXplVW5pdCAqIDV9cHg7XG4gICAgfVxuXG4gICAgJiYmJiAuYW50LXN0ZXBzLWl0ZW0tY29udGVudCB7XG4gICAgICBvdmVyZmxvdzogdW5zZXQ7XG5cbiAgICAgIC5hbnQtc3RlcHMtaXRlbS1kZXNjcmlwdGlvbiB7XG4gICAgICAgIG1hcmdpbi10b3A6ICR7dGhlbWUuc2l6ZVVuaXR9cHg7XG4gICAgICAgIHBhZGRpbmctYm90dG9tOiAke3RoZW1lLnNpemVVbml0fXB4O1xuICAgICAgfVxuICAgIH1cblxuICAgICYmJiYgLmFudC10b29sdGlwLW9wZW4ge1xuICAgICAgZGlzcGxheTogaW5saW5lO1xuICAgIH1cbiAgYH1cbmA7XG5cbmNvbnN0IFN0eWxlZFN0ZXBUaXRsZSA9IHN0eWxlZC5zcGFuYFxuICAkeyh7IHRoZW1lOiB7IGZvbnRTaXplLCBmb250V2VpZ2h0U3Ryb25nIH0gfSkgPT4gYFxuICAgICAgZm9udC1zaXplOiAke2ZvbnRTaXplfXB4O1xuICAgICAgZm9udC13ZWlnaHQ6ICR7Zm9udFdlaWdodFN0cm9uZ307XG4gICAgYH1cbmA7XG5cbmNvbnN0IFN0eWxlZFN0ZXBEZXNjcmlwdGlvbiA9IHN0eWxlZC5kaXZgXG4gICR7KHsgdGhlbWUgfSkgPT4gYFxuICAgIG1hcmdpbi10b3A6ICR7dGhlbWUubWFyZ2lufXB4O1xuICAgIG1hcmdpbi1ib3R0b206ICR7dGhlbWUubWFyZ2luU019cHg7XG4gICAgbWFyZ2luLWxlZnQ6ICR7dGhlbWUubWFyZ2luTUR9cHg7XG4gIGB9XG5gO1xuXG5leHBvcnQgY2xhc3MgQ2hhcnRDcmVhdGlvbiBleHRlbmRzIFB1cmVDb21wb25lbnQ8XG4gIENoYXJ0Q3JlYXRpb25Qcm9wcyxcbiAgQ2hhcnRDcmVhdGlvblN0YXRlXG4+IHtcbiAgY29uc3RydWN0b3IocHJvcHM6IENoYXJ0Q3JlYXRpb25Qcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgdml6VHlwZTogbnVsbCxcbiAgICAgIGNhbkNyZWF0ZURhdGFzZXQ6IGZpbmRQZXJtaXNzaW9uKFxuICAgICAgICAnY2FuX3dyaXRlJyxcbiAgICAgICAgJ0RhdGFzZXQnLFxuICAgICAgICBwcm9wcy51c2VyLnJvbGVzLFxuICAgICAgKSxcbiAgICB9O1xuXG4gICAgdGhpcy5jaGFuZ2VEYXRhc291cmNlID0gdGhpcy5jaGFuZ2VEYXRhc291cmNlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5jaGFuZ2VWaXpUeXBlID0gdGhpcy5jaGFuZ2VWaXpUeXBlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5nb3RvU2xpY2UgPSB0aGlzLmdvdG9TbGljZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMubG9hZERhdGFzb3VyY2VzID0gdGhpcy5sb2FkRGF0YXNvdXJjZXMuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uVml6VHlwZURvdWJsZUNsaWNrID0gdGhpcy5vblZpelR5cGVEb3VibGVDbGljay5iaW5kKHRoaXMpO1xuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKS5nZXQoJ2RhdGFzZXQnKTtcbiAgICBpZiAocGFyYW1zKSB7XG4gICAgICB0aGlzLmxvYWREYXRhc291cmNlcyhwYXJhbXMsIDAsIDEpLnRoZW4ociA9PiB7XG4gICAgICAgIGNvbnN0IGRhdGFzb3VyY2UgPSByLmRhdGFbMF07XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBkYXRhc291cmNlIH0pO1xuICAgICAgfSk7XG4gICAgICB0aGlzLnByb3BzLmFkZFN1Y2Nlc3NUb2FzdCh0KCdUaGUgZGF0YXNldCBoYXMgYmVlbiBzYXZlZCcpKTtcbiAgICB9XG4gIH1cblxuICBleHBsb3JlVXJsKCkge1xuICAgIGNvbnN0IGRhc2hib2FyZElkID0gZ2V0VXJsUGFyYW0oVVJMX1BBUkFNUy5kYXNoYm9hcmRJZCk7XG4gICAgbGV0IHVybCA9IGAvZXhwbG9yZS8/dml6X3R5cGU9JHt0aGlzLnN0YXRlLnZpelR5cGV9JmRhdGFzb3VyY2U9JHt0aGlzLnN0YXRlLmRhdGFzb3VyY2U/LnZhbHVlfWA7XG4gICAgaWYgKGlzRGVmaW5lZChkYXNoYm9hcmRJZCkpIHtcbiAgICAgIHVybCArPSBgJmRhc2hib2FyZF9pZD0ke2Rhc2hib2FyZElkfWA7XG4gICAgfVxuICAgIHJldHVybiB1cmw7XG4gIH1cblxuICBnb3RvU2xpY2UoKSB7XG4gICAgdGhpcy5wcm9wcy5oaXN0b3J5LnB1c2godGhpcy5leHBsb3JlVXJsKCkpO1xuICB9XG5cbiAgY2hhbmdlRGF0YXNvdXJjZShkYXRhc291cmNlOiB7IGxhYmVsOiBzdHJpbmcgfCBSZWFjdE5vZGU7IHZhbHVlOiBzdHJpbmcgfSkge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBkYXRhc291cmNlIH0pO1xuICB9XG5cbiAgY2hhbmdlVml6VHlwZSh2aXpUeXBlOiBzdHJpbmcgfCBudWxsKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IHZpelR5cGUgfSk7XG4gIH1cblxuICBpc0J0bkRpc2FibGVkKCkge1xuICAgIHJldHVybiAhKHRoaXMuc3RhdGUuZGF0YXNvdXJjZT8udmFsdWUgJiYgdGhpcy5zdGF0ZS52aXpUeXBlKTtcbiAgfVxuXG4gIG9uVml6VHlwZURvdWJsZUNsaWNrKCkge1xuICAgIGlmICghdGhpcy5pc0J0bkRpc2FibGVkKCkpIHtcbiAgICAgIHRoaXMuZ290b1NsaWNlKCk7XG4gICAgfVxuICB9XG5cbiAgbG9hZERhdGFzb3VyY2VzKHNlYXJjaDogc3RyaW5nLCBwYWdlOiBudW1iZXIsIHBhZ2VTaXplOiBudW1iZXIpIHtcbiAgICBjb25zdCBxdWVyeSA9IHJpc29uLmVuY29kZSh7XG4gICAgICBjb2x1bW5zOiBbXG4gICAgICAgICdpZCcsXG4gICAgICAgICd0YWJsZV9uYW1lJyxcbiAgICAgICAgJ2RhdGFzb3VyY2VfdHlwZScsXG4gICAgICAgICdkYXRhYmFzZS5kYXRhYmFzZV9uYW1lJyxcbiAgICAgICAgJ3NjaGVtYScsXG4gICAgICBdLFxuICAgICAgZmlsdGVyczogW3sgY29sOiAndGFibGVfbmFtZScsIG9wcjogJ2N0JywgdmFsdWU6IHNlYXJjaCB9XSxcbiAgICAgIHBhZ2UsXG4gICAgICBwYWdlX3NpemU6IHBhZ2VTaXplLFxuICAgICAgb3JkZXJfY29sdW1uOiAndGFibGVfbmFtZScsXG4gICAgICBvcmRlcl9kaXJlY3Rpb246ICdhc2MnLFxuICAgIH0pO1xuICAgIHJldHVybiBTdXBlcnNldENsaWVudC5nZXQoe1xuICAgICAgZW5kcG9pbnQ6IGAvYXBpL3YxL2RhdGFzZXQvP3E9JHtxdWVyeX1gLFxuICAgIH0pLnRoZW4oKHJlc3BvbnNlOiBKc29uUmVzcG9uc2UpID0+IHtcbiAgICAgIGNvbnN0IGxpc3Q6IHtcbiAgICAgICAgaWQ6IG51bWJlcjtcbiAgICAgICAgbGFiZWw6IHN0cmluZyB8IFJlYWN0Tm9kZTtcbiAgICAgICAgdmFsdWU6IHN0cmluZztcbiAgICAgICAgdGFibGVfbmFtZTogc3RyaW5nO1xuICAgICAgfVtdID0gcmVzcG9uc2UuanNvbi5yZXN1bHQubWFwKChpdGVtOiBEYXRhc2V0KSA9PiAoe1xuICAgICAgICBpZDogaXRlbS5pZCxcbiAgICAgICAgdmFsdWU6IGAke2l0ZW0uaWR9X18ke2l0ZW0uZGF0YXNvdXJjZV90eXBlfWAsXG4gICAgICAgIGxhYmVsOiBEYXRhc2V0U2VsZWN0TGFiZWwoaXRlbSksXG4gICAgICAgIHRhYmxlX25hbWU6IGl0ZW0udGFibGVfbmFtZSxcbiAgICAgIH0pKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRhdGE6IGxpc3QsXG4gICAgICAgIHRvdGFsQ291bnQ6IHJlc3BvbnNlLmpzb24uY291bnQsXG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgdGhlbWUgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgaXNCdXR0b25EaXNhYmxlZCA9IHRoaXMuaXNCdG5EaXNhYmxlZCgpO1xuICAgIGNvbnN0IFZJRVdfSU5TVFJVQ1RJT05TX1RFWFQgPSB0KCd2aWV3IGluc3RydWN0aW9ucycpO1xuICAgIGNvbnN0IGRhdGFzZXRIZWxwVGV4dCA9IHRoaXMuc3RhdGUuY2FuQ3JlYXRlRGF0YXNldCA/IChcbiAgICAgIDxzcGFuIGRhdGEtdGVzdD1cImRhdGFzZXQtd3JpdGVcIj5cbiAgICAgICAgPExpbmsgdG89XCIvZGF0YXNldC9hZGQvXCIgZGF0YS10ZXN0PVwiYWRkLWNoYXJ0LW5ldy1kYXRhc2V0XCI+XG4gICAgICAgICAge3QoJ0FkZCBhIGRhdGFzZXQnKX1cbiAgICAgICAgPC9MaW5rPnsnICd9XG4gICAgICAgIHt0KCdvcicpfXsnICd9XG4gICAgICAgIDxhXG4gICAgICAgICAgaHJlZj1cImh0dHBzOi8vc3VwZXJzZXQuYXBhY2hlLm9yZy9kb2NzL2NyZWF0aW5nLWNoYXJ0cy1kYXNoYm9hcmRzL2NyZWF0aW5nLXlvdXItZmlyc3QtZGFzaGJvYXJkLyNyZWdpc3RlcmluZy1hLW5ldy10YWJsZVwiXG4gICAgICAgICAgcmVsPVwibm9vcGVuZXIgbm9yZWZlcnJlclwiXG4gICAgICAgICAgdGFyZ2V0PVwiX2JsYW5rXCJcbiAgICAgICAgICBkYXRhLXRlc3Q9XCJhZGQtY2hhcnQtbmV3LWRhdGFzZXQtaW5zdHJ1Y3Rpb25zXCJcbiAgICAgICAgPlxuICAgICAgICAgIHtgJHtWSUVXX0lOU1RSVUNUSU9OU19URVhUfSBgfVxuICAgICAgICAgIDxJY29ucy5GdWxsIGljb25TaXplPVwibVwiIGljb25Db2xvcj17dGhlbWUuY29sb3JQcmltYXJ5fSAvPlxuICAgICAgICA8L2E+XG4gICAgICAgIC5cbiAgICAgIDwvc3Bhbj5cbiAgICApIDogKFxuICAgICAgPHNwYW4gZGF0YS10ZXN0PVwibm8tZGF0YXNldC13cml0ZVwiPlxuICAgICAgICA8YVxuICAgICAgICAgIGhyZWY9XCJodHRwczovL3N1cGVyc2V0LmFwYWNoZS5vcmcvZG9jcy9jcmVhdGluZy1jaGFydHMtZGFzaGJvYXJkcy9jcmVhdGluZy15b3VyLWZpcnN0LWRhc2hib2FyZC8jcmVnaXN0ZXJpbmctYS1uZXctdGFibGVcIlxuICAgICAgICAgIHJlbD1cIm5vb3BlbmVyIG5vcmVmZXJyZXJcIlxuICAgICAgICAgIHRhcmdldD1cIl9ibGFua1wiXG4gICAgICAgID5cbiAgICAgICAgICB7YCR7VklFV19JTlNUUlVDVElPTlNfVEVYVH0gYH1cbiAgICAgICAgICA8SWNvbnMuRnVsbCBpY29uU2l6ZT1cIm1cIiBpY29uQ29sb3I9e3RoZW1lLmNvbG9yUHJpbWFyeX0gLz5cbiAgICAgICAgPC9hPlxuICAgICAgICAuXG4gICAgICA8L3NwYW4+XG4gICAgKTtcblxuICAgIHJldHVybiAoXG4gICAgICA8U3R5bGVkQ29udGFpbmVyPlxuICAgICAgICA8aDM+e3QoJ0NyZWF0ZSBhIG5ldyBjaGFydCcpfTwvaDM+XG4gICAgICAgIDxTdGVwcyBkaXJlY3Rpb249XCJ2ZXJ0aWNhbFwiIHNpemU9XCJzbWFsbFwiPlxuICAgICAgICAgIDxTdGVwcy5TdGVwXG4gICAgICAgICAgICB0aXRsZT17PFN0eWxlZFN0ZXBUaXRsZT57dCgnQ2hvb3NlIGEgZGF0YXNldCcpfTwvU3R5bGVkU3RlcFRpdGxlPn1cbiAgICAgICAgICAgIHN0YXR1cz17dGhpcy5zdGF0ZS5kYXRhc291cmNlPy52YWx1ZSA/ICdmaW5pc2gnIDogJ3Byb2Nlc3MnfVxuICAgICAgICAgICAgZGVzY3JpcHRpb249e1xuICAgICAgICAgICAgICA8U3R5bGVkU3RlcERlc2NyaXB0aW9uIGNsYXNzTmFtZT1cImRhdGFzZXRcIj5cbiAgICAgICAgICAgICAgICA8QXN5bmNTZWxlY3RcbiAgICAgICAgICAgICAgICAgIGF1dG9Gb2N1c1xuICAgICAgICAgICAgICAgICAgYXJpYUxhYmVsPXt0KCdEYXRhc2V0Jyl9XG4gICAgICAgICAgICAgICAgICBuYW1lPVwic2VsZWN0LWRhdGFzb3VyY2VcIlxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuY2hhbmdlRGF0YXNvdXJjZX1cbiAgICAgICAgICAgICAgICAgIG9wdGlvbnM9e3RoaXMubG9hZERhdGFzb3VyY2VzfVxuICAgICAgICAgICAgICAgICAgb3B0aW9uRmlsdGVyUHJvcHM9e1snaWQnLCAndGFibGVfbmFtZSddfVxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3QoJ0Nob29zZSBhIGRhdGFzZXQnKX1cbiAgICAgICAgICAgICAgICAgIHNob3dTZWFyY2hcbiAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLmRhdGFzb3VyY2V9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICB7ZGF0YXNldEhlbHBUZXh0fVxuICAgICAgICAgICAgICA8L1N0eWxlZFN0ZXBEZXNjcmlwdGlvbj5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAvPlxuICAgICAgICAgIDxTdGVwcy5TdGVwXG4gICAgICAgICAgICB0aXRsZT17PFN0eWxlZFN0ZXBUaXRsZT57dCgnQ2hvb3NlIGNoYXJ0IHR5cGUnKX08L1N0eWxlZFN0ZXBUaXRsZT59XG4gICAgICAgICAgICBzdGF0dXM9e3RoaXMuc3RhdGUudml6VHlwZSA/ICdmaW5pc2gnIDogJ3Byb2Nlc3MnfVxuICAgICAgICAgICAgZGVzY3JpcHRpb249e1xuICAgICAgICAgICAgICA8U3R5bGVkU3RlcERlc2NyaXB0aW9uPlxuICAgICAgICAgICAgICAgIDxWaXpUeXBlR2FsbGVyeVxuICAgICAgICAgICAgICAgICAgZGVueUxpc3Q9e2RlbnlMaXN0fVxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidml6LWdhbGxlcnlcIlxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuY2hhbmdlVml6VHlwZX1cbiAgICAgICAgICAgICAgICAgIG9uRG91YmxlQ2xpY2s9e3RoaXMub25WaXpUeXBlRG91YmxlQ2xpY2t9XG4gICAgICAgICAgICAgICAgICBzZWxlY3RlZFZpej17dGhpcy5zdGF0ZS52aXpUeXBlfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvU3R5bGVkU3RlcERlc2NyaXB0aW9uPlxuICAgICAgICAgICAgfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvU3RlcHM+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9vdGVyXCI+XG4gICAgICAgICAge2lzQnV0dG9uRGlzYWJsZWQgJiYgKFxuICAgICAgICAgICAgPHNwYW4+XG4gICAgICAgICAgICAgIHt0KCdQbGVhc2Ugc2VsZWN0IGJvdGggYSBEYXRhc2V0IGFuZCBhIENoYXJ0IHR5cGUgdG8gcHJvY2VlZCcpfVxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICl9XG4gICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgYnV0dG9uU3R5bGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgIGRpc2FibGVkPXtpc0J1dHRvbkRpc2FibGVkfVxuICAgICAgICAgICAgb25DbGljaz17dGhpcy5nb3RvU2xpY2V9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge3QoJ0NyZWF0ZSBuZXcgY2hhcnQnKX1cbiAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L1N0eWxlZENvbnRhaW5lcj5cbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHdpdGhSb3V0ZXIod2l0aFRvYXN0cyh3aXRoVGhlbWUoQ2hhcnRDcmVhdGlvbikpKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/pages/ChartCreation/index.tsx\n\n}");

/***/ }),

/***/ "./src/utils/types.ts":
/*!****************************!*\
  !*** ./src/utils/types.ts ***!
  \****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("{/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isIterable: () => (/* binding */ isIterable)\n/* harmony export */ });\n/* provided dependency */ var __react_refresh_utils__ = __webpack_require__(/*! ./node_modules/@pmmmwh/react-refresh-webpack-plugin/lib/runtime/RefreshUtils.js */ \"./node_modules/@pmmmwh/react-refresh-webpack-plugin/lib/runtime/RefreshUtils.js\");\n/* provided dependency */ var __react_refresh_error_overlay__ = __webpack_require__(/*! ./node_modules/@pmmmwh/react-refresh-webpack-plugin/overlay/index.js */ \"./node_modules/@pmmmwh/react-refresh-webpack-plugin/overlay/index.js\");\n__webpack_require__.$Refresh$.runtime = __webpack_require__(/*! ./node_modules/react-refresh/runtime.js */ \"./node_modules/react-refresh/runtime.js\");\n\n/* Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */ // Create a new type by picking only the keys with V type from T\nconst isIterable = (obj)=>obj != null && typeof obj[Symbol.iterator] === 'function';\n\n\nconst $ReactRefreshModuleId$ = __webpack_require__.$Refresh$.moduleId;\nconst $ReactRefreshCurrentExports$ = __react_refresh_utils__.getModuleExports(\n\t$ReactRefreshModuleId$\n);\n\nfunction $ReactRefreshModuleRuntime$(exports) {\n\tif (true) {\n\t\tlet errorOverlay;\n\t\tif (typeof __react_refresh_error_overlay__ !== 'undefined') {\n\t\t\terrorOverlay = __react_refresh_error_overlay__;\n\t\t}\n\t\tlet testMode;\n\t\tif (typeof __react_refresh_test__ !== 'undefined') {\n\t\t\ttestMode = __react_refresh_test__;\n\t\t}\n\t\treturn __react_refresh_utils__.executeRuntime(\n\t\t\texports,\n\t\t\t$ReactRefreshModuleId$,\n\t\t\tmodule.hot,\n\t\t\terrorOverlay,\n\t\t\ttestMode\n\t\t);\n\t}\n}\n\nif (typeof Promise !== 'undefined' && $ReactRefreshCurrentExports$ instanceof Promise) {\n\t$ReactRefreshCurrentExports$.then($ReactRefreshModuleRuntime$);\n} else {\n\t$ReactRefreshModuleRuntime$($ReactRefreshCurrentExports$);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbHMvdHlwZXMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7Ozs7Ozs7Ozs7Ozs7O0FBZ0JBO0FBT0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdXBlcnNldC8uL3NyYy91dGlscy90eXBlcy50cz85ZDUyIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8vIENyZWF0ZSBhIG5ldyB0eXBlIGJ5IHBpY2tpbmcgb25seSB0aGUga2V5cyB3aXRoIFYgdHlwZSBmcm9tIFRcbmV4cG9ydCB0eXBlIE9ubHlLZXlXaXRoVHlwZTxULCBWPiA9IGtleW9mIHtcbiAgW0sgaW4ga2V5b2YgVCBhcyBOb25OdWxsYWJsZTxUW0tdPiBleHRlbmRzIFYgPyBLIDogbmV2ZXJdOiBUW0tdO1xufTtcblxuZXhwb3J0IGNvbnN0IGlzSXRlcmFibGUgPSAob2JqOiBhbnkpOiBvYmogaXMgSXRlcmFibGU8YW55PiA9PlxuICBvYmogIT0gbnVsbCAmJiB0eXBlb2Ygb2JqW1N5bWJvbC5pdGVyYXRvcl0gPT09ICdmdW5jdGlvbic7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/utils/types.ts\n\n}");

/***/ })

}]);